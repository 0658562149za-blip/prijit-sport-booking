/* ═══════════════════════════════════════════════════════════
   1. ✅ GLOBAL TOUCH ACTION
   ═══════════════════════════════════════════════════════════ */

/* ให้ทุก element scroll ได้ลื่น */
* {
  touch-action: manipulation !important;
}

/* ═══════════════════════════════════════════════════════════
   2. ✅ SPECIFIC ELEMENTS
   ═══════════════════════════════════════════════════════════ */

/* Time Slots - กดได้, scroll ได้ */
.time-slot-btn {
  touch-action: manipulation !important;
}

/* Navigation Items */
.nav-item {
  touch-action: manipulation !important;
}

/* Buttons */
button {
  touch-action: manipulation !important;
}

/* Gallery */
.gallery-thumbnail,
.gallery-nav-btn,
.staff-gallery-card {
  touch-action: manipulation !important;
}

/* Modal */
.modal-overlay,
.auth-modal,
.extension-modal,
.staff-gallery-modal {
  touch-action: pan-y pinch-zoom !important;
}

/* Scrollable Content */
.auth-modal,
.extension-modal-content,
.payment-content {
  touch-action: pan-y !important;
  -webkit-overflow-scrolling: touch !important;
}

/* ═══════════════════════════════════════════════════════════
   3. ✅ SLIDER (ถ้ามี swipe)
   ═══════════════════════════════════════════════════════════ */

.slider-container,
.gallery-main-image,
.slider-wrapper {
  touch-action: pan-x pan-y !important;
}

/* ═══════════════════════════════════════════════════════════
   4. ✅ PREVENT DEFAULT ISSUES
   ═══════════════════════════════════════════════════════════ */

/* Elements ที่ต้อง prevent default - disable touch-action */
.no-scroll {
  touch-action: none !important;
}

/* ═══════════════════════════════════════════════════════════
   5. ✅ SMOOTH SCROLLING
   ═══════════════════════════════════════════════════════════ */

html {
  scroll-behavior: smooth !important;
}

body {
  -webkit-overflow-scrolling: touch !important;
  overscroll-behavior-y: contain !important;
}

/* ═══════════════════════════════════════════════════════════
   6. ✅ GPU ACCELERATION (ลด jank)
   ═══════════════════════════════════════════════════════════ */

@media (max-width: 768px) {
  .time-slot-btn,
  .nav-item,
  .gallery-thumbnail,
  button {
    transform: translateZ(0) !important;
    -webkit-transform: translateZ(0) !important;
    will-change: transform !important;
  }
  
  /* ปิด will-change เมื่อไม่ใช้ */
  .time-slot-btn:not(:active),
  .nav-item:not(:active),
  button:not(:active) {
    will-change: auto !important;
  }
}

/* ═══════════════════════════════════════════════════════════
   7. ✅ REDUCE PAINT (ลด paint operations)
   ═══════════════════════════════════════════════════════════ */

@media (max-width: 768px) {
  * {
    -webkit-tap-highlight-color: transparent !important;
  }
  
  /* Contain layout */
  .content-card,
  .booking-card,
  .activity-card {
    contain: layout style paint !important;
  }
}

/* ═══════════════════════════════════════════════════════════
   8. ✅ SCROLL PERFORMANCE
   ═══════════════════════════════════════════════════════════ */

/* Contain scroll */
.modal-overlay,
.menu-overlay {
  overscroll-behavior: contain !important;
}

/* Smooth inertia scrolling */
.auth-modal,
.extension-modal-content,
body {
  -webkit-overflow-scrolling: touch !important;
}

/* ═══════════════════════════════════════════════════════════
   9. ✅ PASSIVE EVENT LISTENERS (via CSS)
   ═══════════════════════════════════════════════════════════ */

/* 
  CSS touch-action จะทำให้ browser รู้ว่า
  element ไหนต้อง scroll ได้ โดยไม่ต้องรอ JavaScript
  → scroll ลื่นขึ้น
  → ไม่มี warning
*/

/* ═══════════════════════════════════════════════════════════
   10. ✅ MOBILE SPECIFIC OPTIMIZATIONS
   ═══════════════════════════════════════════════════════════ */

@media (max-width: 768px) {
  /* Optimize repaints */
  img {
    content-visibility: auto !important;
  }
  
  /* Reduce layout thrashing */
  .time-slots-grid,
  .nav-links {
    contain: layout !important;
  }
  
  /* Optimize animations */
  * {
    backface-visibility: hidden !important;
    -webkit-backface-visibility: hidden !important;
  }
}