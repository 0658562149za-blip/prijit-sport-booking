<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô - PRIJIT SPORT</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Sarabun', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    .container {
      background: white;
      padding: 40px;
      border-radius: 20px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.2);
      max-width: 500px;
      width: 100%;
    }

    h1 {
      color: #667eea;
      margin-bottom: 10px;
    }

    .warning {
      background: #fef3c7;
      color: #92400e;
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 20px;
      border-left: 4px solid #f59e0b;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group label {
      display: block;
      margin-bottom: 8px;
      color: #333;
      font-weight: 600;
    }

    .form-group input {
      width: 100%;
      padding: 12px;
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      font-size: 16px;
    }

    .form-group input:focus {
      outline: none;
      border-color: #667eea;
    }

    .btn {
      width: 100%;
      padding: 15px;
      background: #667eea;
      color: white;
      border: none;
      border-radius: 10px;
      font-size: 18px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
    }

    .btn:hover {
      background: #5568d3;
      transform: translateY(-2px);
    }

    .btn:disabled {
      background: #cbd5e1;
      cursor: not-allowed;
    }

    .result {
      margin-top: 20px;
      padding: 15px;
      border-radius: 8px;
      display: none;
    }

    .result.success {
      background: #d1fae5;
      color: #065f46;
      border-left: 4px solid #10b981;
      display: block;
    }

    .result.error {
      background: #fee2e2;
      color: #991b1b;
      border-left: 4px solid #ef4444;
      display: block;
    }

    .info {
      background: #f3f4f6;
      padding: 15px;
      border-radius: 8px;
      margin-top: 20px;
    }

    .info-title {
      font-weight: 600;
      margin-bottom: 10px;
      color: #333;
    }

    .info-item {
      display: flex;
      justify-content: space-between;
      padding: 8px 0;
      border-bottom: 1px solid #e5e7eb;
    }

    .info-item:last-child {
      border-bottom: none;
    }

    .info-label {
      color: #666;
    }

    .info-value {
      font-weight: 600;
      color: #333;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üë§ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô</h1>
    <p style="color: #666; margin-bottom: 20px;">PRIJIT SPORT Admin Tool</p>

    <div class="warning">
      <strong>‚ö†Ô∏è ‡∏Ñ‡∏≥‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô:</strong> ‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Admin ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô! ‡∏´‡πâ‡∏≤‡∏°‡πÅ‡∏ä‡∏£‡πå‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏ô‡∏µ‡πâ‡∏Å‡∏±‡∏ö‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å
    </div>

    <form id="createStaffForm" onsubmit="handleCreateStaff(event)">
      <div class="form-group">
        <label>‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ (Username) *</label>
        <input 
          type="text" 
          id="staffUsername" 
          placeholder="‡πÄ‡∏ä‡πà‡∏ô: staff1"
          required
          pattern="[a-zA-Z0-9_-]{3,20}"
          title="‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£ ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç - _ ‡πÅ‡∏•‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ 3-20 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£"
        >
        <small style="color: #666;">‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£ ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç - _</small>
      </div>

      <div class="form-group">
        <label>‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• *</label>
        <input 
          type="text" 
          id="staffFullname" 
          placeholder="‡πÄ‡∏ä‡πà‡∏ô: ‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ"
          required
        >
      </div>

      <div class="form-group">
        <label>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå *</label>
        <input 
          type="tel" 
          id="staffPhone" 
          placeholder="‡πÄ‡∏ä‡πà‡∏ô: 0812345678"
          required
          pattern="[0-9]{10}"
          title="‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£ 10 ‡∏´‡∏•‡∏±‡∏Å"
        >
      </div>

      <div class="form-group">
        <label>‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô *</label>
        <input 
          type="password" 
          id="staffPassword" 
          placeholder="‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 6 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£"
          required
          minlength="6"
        >
        <small style="color: #666;">‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ‡∏£‡∏´‡∏±‡∏™‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ (‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£ + ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç + ‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå)</small>
      </div>

      <button type="submit" class="btn" id="createBtn">
        ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô
      </button>
    </form>

    <div class="result" id="resultMessage"></div>

    <div class="info" id="staffInfo" style="display: none;">
      <div class="info-title">‚ÑπÔ∏è ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á</div>
      <div class="info-item">
        <span class="info-label">Username:</span>
        <span class="info-value" id="infoUsername">-</span>
      </div>
      <div class="info-item">
        <span class="info-label">Email:</span>
        <span class="info-value" id="infoEmail">-</span>
      </div>
      <div class="info-item">
        <span class="info-label">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•:</span>
        <span class="info-value" id="infoFullname">-</span>
      </div>
      <div class="info-item">
        <span class="info-label">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£:</span>
        <span class="info-value" id="infoPhone">-</span>
      </div>
    </div>
  </div>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

  <script>
    // Firebase Configuration
    const firebaseConfig = {
      apiKey: "AIzaSyB6jVc8qcyS9zIJvfi-E1BL7BaxrUorO7w",
      authDomain: "prijit-sport.firebaseapp.com",
      databaseURL: "https://prijit-sport-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "prijit-sport",
      storageBucket: "prijit-sport.firebasestorage.app",
      messagingSenderId: "19782245186",
      appId: "1:19782245186:web:8ff3e2e17a214edc3546db"
    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const database = firebase.database();

    // Show Result Message
    function showResult(message, type) {
      const resultDiv = document.getElementById('resultMessage');
      resultDiv.textContent = message;
      resultDiv.className = `result ${type}`;
      
      if (type === 'success') {
        setTimeout(() => {
          document.getElementById('createStaffForm').reset();
        }, 3000);
      }
    }

    // Handle Create Staff Account
    async function handleCreateStaff(event) {
      event.preventDefault();

      const username = document.getElementById('staffUsername').value.trim();
      const fullname = document.getElementById('staffFullname').value.trim();
      const phone = document.getElementById('staffPhone').value.trim();
      const password = document.getElementById('staffPassword').value;

      // Validation
      if (!username || !fullname || !phone || !password) {
        showResult('‚ùå ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô', 'error');
        return;
      }

      if (!/^[a-zA-Z0-9_-]{3,20}$/.test(username)) {
        showResult('‚ùå Username ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ a-z, 0-9, -, _)', 'error');
        return;
      }

      if (!/^[0-9]{10}$/.test(phone)) {
        showResult('‚ùå ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç 10 ‡∏´‡∏•‡∏±‡∏Å)', 'error');
        return;
      }

      if (password.length < 6) {
        showResult('‚ùå ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 6 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£', 'error');
        return;
      }

      // Disable button
      const createBtn = document.getElementById('createBtn');
      createBtn.disabled = true;
      createBtn.textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏±‡∏ç‡∏ä‡∏µ...';

      try {
        // ‡∏™‡∏£‡πâ‡∏≤‡∏á Auth Account
        const email = username + '@staff.prijitsport.com';
        console.log('Creating account with email:', email);

        const userCredential = await auth.createUserWithEmailAndPassword(email, password);
        console.log('‚úÖ Auth account created:', userCredential.user.uid);

        // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô Database
        await database.ref('users/' + userCredential.user.uid).set({
          username: username,
          fullname: fullname,
          phone: phone,
          role: 'staff', // ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å!
          createdAt: new Date().toISOString(),
          createdBy: 'admin'
        });
        console.log('‚úÖ Database entry created');

        // ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
        showResult('‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!', 'success');

        // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
        document.getElementById('infoUsername').textContent = username;
        document.getElementById('infoEmail').textContent = email;
        document.getElementById('infoFullname').textContent = fullname;
        document.getElementById('infoPhone').textContent = phone;
        document.getElementById('staffInfo').style.display = 'block';

        // Sign out ‡∏à‡∏≤‡∏Å staff account
        await auth.signOut();
        console.log('‚úÖ Signed out from staff account');

      } catch (error) {
        console.error('‚ùå Error creating staff:', error);

        let errorMessage = '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ' + error.message;

        if (error.code === 'auth/email-already-in-use') {
          errorMessage = '‚ùå Username ‡∏ô‡∏µ‡πâ‡∏ñ‡∏π‡∏Å‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß';
        } else if (error.code === 'auth/weak-password') {
          errorMessage = '‚ùå ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏û‡∏≠';
        } else if (error.code === 'auth/network-request-failed') {
          errorMessage = 'üåê ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏≠‡∏¥‡∏ô‡πÄ‡∏ó‡∏≠‡∏£‡πå‡πÄ‡∏ô‡πá‡∏ï‡πÑ‡∏î‡πâ';
        }

        showResult(errorMessage, 'error');
      } finally {
        // Enable button
        createBtn.disabled = false;
        createBtn.textContent = '‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô';
      }
    }
  </script>
</body>
</html>