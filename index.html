<!DOCTYPE html>
<html lang="th">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="google-site-verification" content="bR1mEsXKVvOw49DkWfjDAmJHnfmsgKIcgD6kVuu1stI" />
    <title>‡∏à‡∏≠‡∏á‡∏™‡∏ô‡∏≤‡∏°‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏• PRIJIT SPORT - ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏≠‡∏á‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå 24 ‡∏ä‡∏°.</title>
    <meta name="description" content="‡∏à‡∏≠‡∏á‡∏™‡∏ô‡∏≤‡∏°‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏• 7 ‡∏Ñ‡∏ô PRIJIT SPORT ‡∏°‡∏µ 6 ‡∏™‡∏ô‡∏≤‡∏° ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ñ‡∏π‡∏Å ‡∏à‡∏≠‡∏á‡∏á‡πà‡∏≤‡∏¢ ‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå‡∏ï‡∏•‡∏≠‡∏î 24 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏ó‡∏±‡∏ô‡∏™‡∏°‡∏±‡∏¢">
    <meta name="keywords" content="‡∏à‡∏≠‡∏á‡∏™‡∏ô‡∏≤‡∏°‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏•, ‡∏™‡∏ô‡∏≤‡∏°‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏• 7 ‡∏Ñ‡∏ô, ‡∏™‡∏ô‡∏≤‡∏°‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏•, PRIJIT SPORT, ‡∏à‡∏≠‡∏á‡∏™‡∏ô‡∏≤‡∏°, ‡∏™‡∏ô‡∏≤‡∏°‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏•‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå, ‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏•">
    <meta name="author" content="PRIJIT SPORT">
    <meta name="robots" content="index, follow">
    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="‡∏à‡∏≠‡∏á‡∏™‡∏ô‡∏≤‡∏°‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏• PRIJIT SPORT">
    <meta property="og:description" content="‡∏à‡∏≠‡∏á‡∏™‡∏ô‡∏≤‡∏°‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏• 7 ‡∏Ñ‡∏ô ‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå 24 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á ‡∏°‡∏µ 6 ‡∏™‡∏ô‡∏≤‡∏° ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ñ‡∏π‡∏Å ‡∏à‡∏≠‡∏á‡∏á‡πà‡∏≤‡∏¢">
    <meta property="og:image" content="https://prijit-sport.github.io/prijit-sport-booking/f4.jpg">
    <meta property="og:url" content="https://prijit-sport.github.io/prijit-sport-booking/">
    <meta property="og:site_name" content="PRIJIT SPORT">
    <meta property="og:locale" content="th_TH">

    <!-- Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SportsActivityLocation",
      "name": "PRIJIT SPORT",
      "description": "‡∏™‡∏ô‡∏≤‡∏°‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏• 7 ‡∏Ñ‡∏ô ‡∏à‡∏≠‡∏á‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå 24 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á ‡∏°‡∏µ 6 ‡∏™‡∏ô‡∏≤‡∏°",
      "url": "https://prijit-sport.github.io/prijit-sport-booking/",
      "image": "https://prijit-sport.github.io/prijit-sport-booking/f4.jpg",
      "address": {
        "@type": "PostalAddress",
        "addressLocality": "‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏°‡∏´‡∏≤‡∏ô‡∏Ñ‡∏£",
        "addressCountry": "TH"
      },
      "priceRange": "$$"
    }
    </script>
    
    <!-- Favicon -->
    <meta http-equiv="Permissions-Policy" content="interest-cohort=()">
    <link rel="icon" type="image/jpeg" href="f6.jpg">
    
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      html {
        scroll-behavior: smooth;
      }
      section {
        scroll-margin-top: 80px;
      }
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background-image: linear-gradient(
            rgba(243, 244, 246, 0.3),
            rgba(243, 244, 246, 0.3)
          ),
          url("f4.jpg");
        background-size: cover;
        background-position: center;
        background-attachment: fixed;
        background-repeat: no-repeat;
        line-height: 1.6;
      }

      /* Navigation Bar */
         .navbar {
      background: #22c55e;
      padding: 15px 0;
      position: sticky;
      top: 0;
      z-index: 1002;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    .nav-container {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 20px;
    }
    .nav-links {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
    }
    .nav-item {
      color: white;
      font-weight: bold;
      font-size: 1em;
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
      background: none;
      border: none;
      font-family: inherit;
      transition: background 0.2s ease;
      -webkit-tap-highlight-color: transparent;
      user-select: none;
    }
    
    .nav-item:hover {
        background: rgba(255, 255, 255, 0.2);
      }
        
      /* Hover ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ Desktop */
      @media (hover: hover) and (pointer: fine) {
        .nav-item:hover {
          background: rgba(255, 255, 255, 0.2);
        }
      }

      .user-section {
        color: white;
        font-weight: bold;
        display: flex;
        align-items: center;
        gap: 15px;
      }

      .logout-btn {
        background: rgba(122, 120, 120, 0.527);
        border: 2px solid white;
        padding: 8px 16px;
        border-radius: 8px;
        cursor: pointer;
      }
       .logout-btn:hover {
        background: rgba(255, 255, 255, 0.3);
      }

      .login-btn {
      background: rgba(122, 120, 120, 0.527) !important;
      color: #eef3f0 !important;
      font-weight: bold;
      border: 2px solid white;
      padding: 10px 25px;
      border-radius: 25px;
      cursor: pointer;
    }

      /* Hamburger Menu */
    .hamburger {
      display: none;
      width: 44px;
      height: 44px;
      background: rgba(255,255,255,0.15);
      border: 2px solid rgba(255,255,255,0.25);
      border-radius: 10px;
      cursor: pointer;
      position: relative;
    }
    .hamburger span {
      display: block;
      width: 24px;
      height: 2.5px;
      background: white;
      border-radius: 3px;
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      transition: all 0.3s ease;
    }
    .hamburger span:nth-child(1) { top: 12px; }
    .hamburger span:nth-child(2) { top: 20px; }
    .hamburger span:nth-child(3) { top: 28px; }
    .hamburger.active span:nth-child(1) {
      top: 20px;
      transform: translateX(-50%) rotate(45deg);
    }
    .hamburger.active span:nth-child(2) { opacity: 0; }
    .hamburger.active span:nth-child(3) {
      top: 20px;
      transform: translateX(-50%) rotate(-45deg);
    }

      /* Menu Overlay */
  .menu-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, rgba(34,197,94,0.98), rgba(16,185,129,0.98));
      backdrop-filter: blur(20px);
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }
    .menu-overlay.active {
      opacity: 1;
      visibility: visible;
    }
    .menu-overlay .nav-links {
      flex-direction: column;
      align-items: center;
      gap: 0;
    }
    .menu-overlay .nav-item {
      padding: 18px 40px;
      margin: 8px 0;
      border-radius: 15px;
      font-size: 1.3em;
      background: rgba(255,255,255,0.15);
      backdrop-filter: blur(10px);
      border: 2px solid rgba(255,255,255,0.2);
      min-width: 280px;
      text-align: center;
      opacity: 0;
      transform: translateY(20px);
    }
    .menu-overlay.active .nav-item {
      animation: slideIn 0.4s ease forwards;
    }
    .menu-overlay.active .nav-item:nth-child(1) { animation-delay: 0.1s; }
    .menu-overlay.active .nav-item:nth-child(2) { animation-delay: 0.15s; }
    .menu-overlay.active .nav-item:nth-child(3) { animation-delay: 0.2s; }
    .menu-overlay.active .nav-item:nth-child(4) { animation-delay: 0.25s; }
    .menu-overlay.active .nav-item:nth-child(5) { animation-delay: 0.3s; }
    .menu-overlay.active .nav-item:nth-child(6) { animation-delay: 0.35s; }
    .menu-overlay.active .nav-item:nth-child(7) { animation-delay: 0.4s; }
    @keyframes slideIn {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    .menu-overlay .nav-item:active {
      transform: scale(0.95);
      background: rgba(255,255,255,0.3);
    }

      /* Modal */
        .modal-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.7);
      z-index: 2000;
      justify-content: center;
      align-items: center;
    }
    .modal-overlay.active { display: flex; }
    .auth-modal {
      background: white;
      border-radius: 20px;
      padding: 50px;
      max-width: 450px;
      width: 90%;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      max-height: 90vh;
      overflow-y: auto;
      position: relative;
    }
    .modal-close-btn {
      position: absolute;
      top: 15px;
      right: 20px;
      font-size: 28px;
      cursor: pointer;
      background: none;
      border: none;
      color: #666;
    }
    .auth-title {
      font-size: 2.5em;
      text-align: center;
      margin-bottom: 30px;
      color: #1f2937;
    }
    .form-group { margin-bottom: 25px; }
    .form-label {
      display: block;
      margin-bottom: 8px;
      font-weight: bold;
      color: #374151;
      font-size: 1.1em;
    }
    .form-input {
      width: 100%;
      padding: 15px;
      border: 2px solid #d1d5db;
      border-radius: 10px;
      font-size: 1.1em;
    }
    .form-input:focus {
      outline: none;
      border-color: #22c55e;
    }
    .submit-btn {
      width: 100%;
      background: #22c55e;
      color: white;
      border: none;
      padding: 18px;
      border-radius: 10px;
      font-size: 1.2em;
      font-weight: bold;
      cursor: pointer;
      margin-top: 10px;
    }
    .auth-switch {
      text-align: center;
      margin-top: 20px;
      color: #6b7280;
    }
    .auth-switch a {
      color: #22c55e;
      font-weight: bold;
      cursor: pointer;
    }

      /* Hero Section */
      .hero {
      color: white;
      text-align: center;
      padding: 100px 20px;
      background: linear-gradient(rgba(34,197,94,0), rgba(22,163,74,1)), url("f5.png");
      background-size: cover;
      background-position: center;
      position: relative;
    }
    .hero h1 {
      font-size: 3.5em;
      margin-bottom: 20px;
      text-shadow: 3px 3px 8px rgba(0,0,0,0.7);
    }
    .hero p {
      font-size: 1.5em;
      margin-bottom: 15px;
      text-shadow: 2px 2px 6px rgba(0,0,0,0.6);
    }

      .hero-logo-left {
        position: absolute;
        top: 50%;
        left: 8%;
        transform: translateY(-50%);
        width: 250px;
        height: 250px;
        opacity: 0.85;
        filter: drop-shadow(0 10px 30px rgba(0, 0, 0, 0.5));
        animation: floatLogoLeft 4s ease-in-out infinite;
        z-index: 1;
      }

      @keyframes floatLogoLeft {
        0%, 100% {
          transform: translateY(-50%) translateX(0);
        }
        50% {
          transform: translateY(-50%) translateX(-10px);
        }
      }
      
      /* Section Styles */
      section {
        padding: 30px 15px;
        scroll-margin-top: 70px;
        width: 100%;
      }

      section > * {
        max-width: 1200px;
        margin-left: auto;
        margin-right: auto;
      }

      .section-title {
        font-size: 2.5em;
        text-align: center;
        margin-bottom: 20px;
        color: white;
        font-weight: bold;
        text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.8);
      }

      .content-card {
        background: rgba(255, 255, 255, 0.97);
        border-radius: 15px;
        padding: 20px 15px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        backdrop-filter: blur(10px);
      }

      .section-header {
        background: #e5e7eb;
        padding: 12px 20px;
        border-radius: 10px;
        font-size: 1.3em;
        font-weight: bold;
        margin-bottom: 20px;
        color: #1f2937;
        text-align: center;
      }

      /* Slider */
      .slider-section {
        position: relative;
        padding: 40px 15px;
        width: 100%;
      }

      .slider-container {
        max-width: 1200px;
        margin: 0 auto;
        position: relative;
        height: 450px;
        overflow: hidden;
        border-radius: 20px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
      }

      .slider-wrapper {
        position: relative;
        height: 100%;
        width: 100%;
      }

      .slide {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        opacity: 0;
        transition: opacity 1s ease-in-out;
      }

      .slide.active {
        opacity: 1;
      }

      .slide img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        object-position: center;
      }

      .slider-btn {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        background: rgba(255, 255, 255, 0.9);
        border: none;
        width: 50px;
        height: 50px;
        border-radius: 50%;
        cursor: pointer;
        font-size: 1.5em;
        color: #22c55e;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s;
        z-index: 10;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      }

      .slider-btn:hover {
        background: white;
        transform: translateY(-50%) scale(1.1);
      }

      .slider-btn.prev {
        left: 20px;
      }

      .slider-btn.next {
        right: 20px;
      }

      .slider-dots {
        position: absolute;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        gap: 10px;
        z-index: 10;
      }

      .dot {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.5);
        cursor: pointer;
        transition: all 0.3s;
      }

      .dot.active {
        background: white;
        width: 30px;
        border-radius: 6px;
      }

      .slider-welcome-text {
        text-align: center;
        margin-top: 40px;
        padding: 40px 20px;
        background: linear-gradient(135deg, #0dd417, #00aa3e);
        border-radius: 20px;
        max-width: 800px;
        margin-left: auto;
        margin-right: auto;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      }

      .slider-welcome-text h2 {
        font-size: 3em;
        color: white;
        margin-bottom: 15px;
        font-weight: bold;
      }

      .slider-welcome-text p {
        font-size: 1.3em;
        color: white;
        opacity: 0.95;
      }

      /* Mobile responsive */
      @media (max-width: 768px) {
      .hamburger { display: block; }
      .nav-container > .nav-links { display: none; }
    }
      
      /* Field Info */
      .field-details {
        line-height: 2;
        color: #374151;
        font-size: 1.1em;
      }

      .price-list {
        margin: 20px 0;
        background: #f9fafb;
        padding: 20px 15px;
        border-radius: 10px;
      }

      .price-item {
        padding: 12px 0;
        border-bottom: 1px solid #e5e7eb;
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 15px;
      }

      .price-item:last-child {
        border-bottom: none;
      }

      .field-name {
        font-weight: bold;
        color: #1f2937;
        font-size: 1.1em;
        flex-shrink: 0;
      }

      .field-price {
        color: #22c55e;
        font-weight: bold;
        font-size: 1.1em;
        text-align: right;
      }

      /* Map */
      .map-container {
        margin-top: 20px;
        border-radius: 15px;
        overflow: hidden;
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
      }

      .map-container iframe {
        display: block;
        width: 100%;
        height: 450px;
      }

      /* Rules */
      .rules-list {
        counter-reset: rule-counter;
      }

      .rule-item {
        margin: 25px 0;
        padding: 20px;
        background: #f9fafb;
        border-radius: 10px;
        position: relative;
        padding-left: 60px;
        font-size: 1.05em;
        line-height: 1.8;
      }

      .rule-item:before {
        counter-increment: rule-counter;
        content: counter(rule-counter) ".";
        position: absolute;
        left: 20px;
        font-weight: bold;
        font-size: 1.3em;
        color: #22c55e;
      }

      /* Time Slots */
      .time-slots-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 15px;
        margin-top: 15px;
      }

      .time-slot-btn {
  padding: 15px;
  border: 2px solid #d1d5db;
  border-radius: 10px;
  background: white;
  cursor: pointer;
  transition: all 0.3s;
  font-size: 1em;
  font-weight: 500;
  text-align: center;
  position: relative;
  -webkit-tap-highlight-color: transparent;
  user-select: none;
}
  @media (hover: hover) and (pointer: fine) {
      .time-slot-btn:hover {
        border-color: #22c55e;
        background: #f0fdf4;
        transform: translateY(-2px);
      }
      }
      .time-slot-btn.selected {
        background: #22c55e;
        color: white;
        border-color: #22c55e;
      }

      .time-slot-btn.available {
        background: #f0fdf4;
        border-color: #22c55e;
      }

      .time-slot-btn.booked {
        background: #fee2e2;
        border-color: #ef4444;
        cursor: not-allowed;
        opacity: 0.7;
      }

      .time-slot-btn .status-badge {
        position: absolute;
        top: 5px;
        right: 5px;
        font-size: 0.8em;
        padding: 2px 8px;
        border-radius: 12px;
        font-weight: bold;
      }

      .time-slot-btn.available .status-badge {
        background: #22c55e;
        color: white;
      }

      .time-slot-btn.booked .status-badge {
        background: #ef4444;
        color: white;
      }

      .availability-legend {
        display: flex;
        justify-content: center;
        gap: 30px;
        margin: 20px 0;
        flex-wrap: wrap;
      }

      .legend-item {
        display: flex;
        align-items: center;
        gap: 10px;
        font-size: 1.1em;
      }

      .legend-box {
        width: 30px;
        height: 30px;
        border-radius: 5px;
        border: 2px solid #d1d5db;
      }

      .legend-box.available {
        background: #22c55e;
        border-color: #22c55e;
      }

      .legend-box.booked {
        background: #ef4444;
        border-color: #ef4444;
      }

      .availability-notice {
        background: #dbeafe;
        border: 2px solid #3b82f6;
        padding: 15px;
        border-radius: 10px;
        margin-bottom: 20px;
        text-align: center;
      }

      .availability-notice.checking {
        background: #fef3c7;
        border-color: #fbbf24;
      }

      /* Booking Card */
      .booking-card {
        background: rgba(249, 250, 251, 0.98);
        padding: 25px;
        border-radius: 15px;
        margin: 0 auto 20px;
        border-left: 5px solid #22c55e;
        position: relative;
        max-width: 600px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
        backdrop-filter: blur(5px);
      }

      .booking-card h3 {
        color: #1f2937;
        margin-bottom: 15px;
        text-align: center;
        font-size: 1.3em;
      }

      .booking-card p {
        margin: 8px 0;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .booking-card p strong {
        color: #1f2937;
      }

      .cancel-btn {
        background: #ef4444;
        color: white;
        border: none;
        padding: 12px 24px;
        border-radius: 8px;
        font-weight: bold;
        cursor: pointer;
        margin-top: 20px;
        transition: background 0.3s;
        display: block;
        margin-left: auto;
        margin-right: auto;
      }

      .cancel-btn:hover {
        background: #dc2626;
      }

      /* Gallery */
      .gallery-main-image {
        position: relative;
        width: 100%;
        height: 500px;
        margin-bottom: 30px;
        background: #000;
        border-radius: 15px;
        overflow: hidden;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      }

      #galleryMainImage {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.3s ease;
      }

      .gallery-nav-btn {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        background: rgba(34, 197, 94, 0.9);
        color: white;
        border: none;
        font-size: 2.5rem;
        padding: 20px 25px;
        cursor: pointer;
        transition: all 0.3s;
        z-index: 10;
        border-radius: 50%;
        width: 60px;
        height: 60px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .gallery-nav-btn:hover {
        background: rgba(22, 163, 74, 1);
        transform: translateY(-50%) scale(1.1);
        box-shadow: 0 5px 20px rgba(34, 197, 94, 0.5);
      }

      .gallery-prev-btn {
        left: 20px;
      }

      .gallery-next-btn {
        right: 20px;
      }

      .gallery-thumbnails {
        display: flex;
        gap: 15px;
        justify-content: center;
        flex-wrap: wrap;
        padding: 20px 0;
      }

      .gallery-thumbnail {
        width: 150px;
        height: 100px;
        object-fit: cover;
        cursor: pointer;
        border: 4px solid transparent;
        border-radius: 10px;
        transition: all 0.3s;
        opacity: 0.6;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
      }

      .gallery-thumbnail:hover {
        opacity: 1;
        transform: scale(1.05);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
      }

      .gallery-thumbnail.active {
        border-color: #22c55e;
        opacity: 1;
        box-shadow: 0 0 20px rgba(34, 197, 94, 0.6);
      }

      .gallery-counter {
        text-align: center;
        margin-top: 20px;
        font-size: 1.2em;
        color: #1f2937;
        font-weight: bold;
      }

      /* Contact */
      .contact-wrapper {
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: center;
        gap: 60px;
        margin: 40px auto;
        max-width: 800px;
        flex-wrap: wrap;
      }

      .contact-logo-img {
        width: 220px;
        height: 220px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .contact-logo-img img {
        width: 100%;
        height: 100%;
        object-fit: contain;
        border-radius: 15px;
        filter: drop-shadow(0 8px 20px rgba(0, 0, 0, 0.15));
        transition: transform 0.3s;
      }

      .contact-logo-img img:hover {
        transform: scale(1.05);
      }

      .contact-info {
        text-align: center;
      }

      .contact-phone {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 15px;
        margin: 15px 0;
        font-size: 1.3em;
      }

      .contact-phone span {
        font-size: 1.5em;
      }

      .thank-you-text {
        font-size: 5em;
        font-weight: bold;
        letter-spacing: 10px;
        margin-top: 60px;
        color: #1f2937;
        text-align: center;
      }

      /* Payment Modal */
      .payment-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.7);
        z-index: 1000;
        align-items: center;
        justify-content: center;
      }

      .payment-modal.active {
        display: flex;
      }

      .payment-content {
        background: white;
        border-radius: 20px;
        padding: 40px;
        max-width: 500px;
        width: 90%;
        max-height: 90vh;
        overflow-y: auto;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        animation: slideUp 0.3s ease-out;
      }

      @keyframes slideUp {
        from {
          opacity: 0;
          transform: translateY(50px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .payment-header {
        text-align: center;
        margin-bottom: 30px;
        padding-bottom: 20px;
        border-bottom: 2px solid #e5e7eb;
      }

      .payment-header h2 {
        font-size: 1.8em;
        color: #1f2937;
        margin-bottom: 10px;
      }

      .payment-summary {
        background: #f9fafb;
        padding: 20px;
        border-radius: 10px;
        margin-bottom: 20px;
      }

      .summary-row {
        display: flex;
        justify-content: space-between;
        padding: 10px 0;
        border-bottom: 1px solid #e5e7eb;
      }

      .summary-row:last-child {
        border-bottom: none;
        font-weight: bold;
        font-size: 1.2em;
        color: #22c55e;
        padding-top: 15px;
        margin-top: 10px;
        border-top: 2px solid #22c55e;
      }

      .summary-label {
        color: #6b7280;
      }

      .summary-value {
        font-weight: 600;
        color: #1f2937;
      }

      .deposit-highlight {
        background: #dcfce7;
        padding: 15px;
        border-radius: 10px;
        margin: 20px 0;
        border-left: 4px solid #22c55e;
      }

      .deposit-highlight strong {
        color: #16a34a;
        font-size: 1.2em;
      }

      .qr-code-container {
        text-align: center;
        padding: 20px;
        background: #f9fafb;
        border-radius: 10px;
        margin: 20px 0;
      }

      .qr-code-image {
        width: 250px;
        height: 250px;
        margin: 20px auto;
        background: white;
        padding: 15px;
        border-radius: 10px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      }

      .payment-info {
        background: #fef3c7;
        border: 2px solid #fbbf24;
        padding: 15px;
        border-radius: 10px;
        margin: 20px 0;
      }

      .payment-info p {
        margin: 8px 0;
        color: #92400e;
        font-weight: 500;
      }

      .upload-section {
        margin: 25px 0;
      }

      .upload-label {
        display: block;
        font-weight: bold;
        color: #1f2937;
        margin-bottom: 10px;
        font-size: 1.1em;
      }

      .upload-area {
        border: 3px dashed #d1d5db;
        border-radius: 10px;
        padding: 40px;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s;
        background: #f9fafb;
      }

      .upload-area:hover {
        border-color: #22c55e;
        background: #f0fdf4;
      }

      .upload-area.dragover {
        border-color: #22c55e;
        background: #dcfce7;
      }

      #slipPreview {
        max-width: 100%;
        max-height: 300px;
        margin-top: 15px;
        border-radius: 10px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      }

      .payment-buttons {
        display: flex;
        gap: 15px;
        margin-top: 25px;
      }

      .payment-buttons button {
        flex: 1;
        padding: 15px;
        border: none;
        border-radius: 10px;
        font-size: 1.1em;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s;
      }

      .upload-slip-btn {
        background: #22c55e;
        color: white;
      }

      .upload-slip-btn:hover {
        background: #16a34a;
      }

      .upload-slip-btn:disabled {
        background: #d1d5db;
        cursor: not-allowed;
      }

      .cancel-payment-btn {
        background: #f3f4f6;
        color: #6b7280;
      }

      .cancel-payment-btn:hover {
        background: #e5e7eb;
        color: #374151;
      }

      .payment-terms {
        background: #fee2e2;
        border: 2px solid #ef4444;
        padding: 15px;
        border-radius: 10px;
        margin: 20px 0;
      }

      .payment-terms h4 {
        color: #dc2626;
        margin-bottom: 10px;
        font-size: 1.1em;
      }

      .payment-terms ul {
        list-style: none;
        padding: 0;
      }

      .payment-terms li {
        padding: 8px 0;
        color: #991b1b;
        font-weight: 500;
      }

      .payment-terms li:before {
        content: "‚Ä¢ ";
        color: #ef4444;
        font-weight: bold;
        margin-right: 8px;
      }

      .timer-warning {
        text-align: center;
        color: #dc2626;
        font-weight: bold;
        font-size: 1.1em;
        margin-top: 20px;
        padding: 10px;
        background: #fee2e2;
        border-radius: 8px;
      }

      /* Spinner */
      @keyframes spin {
        to { transform: rotate(360deg); }
      }

      .spinner {
        display: inline-block;
        width: 12px;
        height: 12px;
        border: 2px solid #fff;
        border-top-color: transparent;
        border-radius: 50%;
        animation: spin 0.6s linear infinite;
        margin-left: 8px;
      }

      /* Responsive */
      @media (max-width: 768px) {
        section {
          padding: 20px 10px;
        }

        .section-title {
          font-size: 1.8em;
          margin-bottom: 15px;
        }

        .content-card {
          padding: 15px 10px;
        }

        .hero {
          padding: 60px 20px;
        }

        .hero h1 {
          font-size: 2em;
        }

        .hero p {
          font-size: 1.1em;
        }

        /* ‡∏ã‡πà‡∏≠‡∏ô‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏ö‡∏±‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤ */
        .hero-logo-left {
          display: none;
        }

        .slider-container {
          height: 300px;
        }

        .slider-welcome-text {
          padding: 30px 15px;
        }

        .slider-welcome-text h2 {
          font-size: 2em;
        }

        .slider-welcome-text p {
          font-size: 1.1em;
        }

        .time-slots-grid {
          grid-template-columns: repeat(2, 1fr);
        }

        .auth-modal {
          padding: 30px;
        }

        .thank-you-text {
          font-size: 3em;
          letter-spacing: 5px;
        }

        .gallery-main-image {
          height: 350px;
        }

        .gallery-thumbnail {
          width: 120px;
          height: 80px;
        }

        .gallery-nav-btn {
          font-size: 2rem;
          padding: 15px 20px;
          width: 50px;
          height: 50px;
        }

        .gallery-prev-btn {
          left: 10px;
        }

        .gallery-next-btn {
          right: 10px;
        }

        .map-container iframe {
          height: 350px;
        }

        .contact-logo-img {
          width: 120px;
          height: 120px;
        }
        
        .contact-phone {
          font-size: 1em;
        }
      }

      @media (max-width: 480px) {
        section {
          padding: 15px 8px;
        }

        .section-title {
          font-size: 1.5em;
          margin-bottom: 10px;
        }

        .content-card {
          padding: 12px 8px;
        }

        .hero {
          padding: 40px 15px;
        }

        .hero h1 {
          font-size: 1.5em;
        }

        .hero p {
          font-size: 0.9em;
        }

        /* ‡∏ã‡πà‡∏≠‡∏ô‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏ö‡∏±‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤ */
        .hero-logo-left {
          display: none;
        }

        .slider-container {
          height: 250px;
        }

        .slider-welcome-text {
          padding: 25px 10px;
        }

        .slider-welcome-text h2 {
          font-size: 1.5em;
        }

        .slider-welcome-text p {
          font-size: 1em;
        }

        .gallery-main-image {
          height: 250px;
          border-radius: 10px;
        }

        .gallery-thumbnail {
          width: 90px;
          height: 60px;
        }

        .gallery-nav-btn {
          font-size: 1.5rem;
          width: 40px;
          height: 40px;
          padding: 10px;
        }

        .map-container iframe {
          height: 300px;
        }

        .contact-logo-img {
          width: 90px;
          height: 90px;
        }
      }
    </style>
  </head>
  <body>
    <!-- Login/Register Modal -->
    <div id="loginModal" class="modal-overlay">
      <div class="auth-modal">
        <button class="modal-close-btn" onclick="closeLoginModal()">&times;</button>
        
        <div id="modalLoginForm">
          <h1 class="auth-title">‚öΩ ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</h1>
          <form onsubmit="handleLogin(event)">
            <div class="form-group">
              <label class="form-label">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</label>
              <input type="text" id="modalLoginUsername" class="form-input" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ" required />
            </div>
            <div class="form-group">
              <label class="form-label">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
              <input type="password" id="modalLoginPassword" class="form-input" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô" required />
            </div>
            <button type="submit" class="submit-btn">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
          </form>
          <div class="auth-switch">
            ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ? <a onclick="showRegisterInModal()">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</a>
          </div>
        </div>

        <div id="modalRegisterForm" style="display: none;">
          <h1 class="auth-title">üìù ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</h1>
          <form onsubmit="handleRegister(event)">
            <div class="form-group">
              <label class="form-label">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</label>
              <input type="text" id="modalRegUsername" class="form-input" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ" required />
            </div>
            <div class="form-group">
              <label class="form-label">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</label>
              <input type="text" id="modalRegFullname" class="form-input" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•" required />
            </div>
            <div class="form-group">
              <label class="form-label">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£</label>
              <input type="tel" id="modalRegPhone" class="form-input" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå" required />
            </div>
            <div class="form-group">
              <label class="form-label">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
              <input type="password" id="modalRegPassword" class="form-input" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô" required />
            </div>
            <button type="submit" class="submit-btn">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</button>
          </form>
          <div class="auth-switch">
            ‡∏°‡∏µ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÅ‡∏•‡πâ‡∏ß? <a onclick="showLoginInModal()">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</a>
          </div>
        </div>
      </div>
    </div>

    <!-- Navigation Bar -->
     <nav class="navbar">
    <div class="nav-container">
      <div class="hamburger" id="hamburgerBtn">
        <span></span>
        <span></span>
        <span></span>
      </div>

      <div class="nav-links" id="desktopNav">
        <button class="nav-item" data-section="homeSection">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</button>
        <button class="nav-item" data-section="fieldInfoSection">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏ô‡∏≤‡∏°</button>
        <button class="nav-item" data-section="rulesSection">‡∏Å‡∏é‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ö</button>
        <button class="nav-item" data-section="bookingSection">‡∏à‡∏≠‡∏á‡∏™‡∏ô‡∏≤‡∏°</button>
        <button class="nav-item" data-section="checkBookingSection">‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</button>
        <button class="nav-item" data-section="gallerySection">‡πÅ‡∏Å‡∏•‡πÄ‡∏•‡∏≠‡∏£‡∏µ‡πà</button>
        <button class="nav-item" data-section="contactSection">‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏°</button>
      </div>
      <div class="user-section">

        <span class="login-btn" id="loginNavBtn">üîê login</span>
        <div id="userInfo" style="display:none;">
          <span>üë§ <span id="currentUser"></span></span>
          <span class="logout-btn" id="logoutBtn">logout</span>
        </div>
      </div>
    </div>
  </nav>

    <!-- Mobile Menu -->
  <div class="menu-overlay" id="menuOverlay">
    <div class="nav-links" id="mobileNav">
      <button class="nav-item" data-section="homeSection">üè† ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</button>
      <button class="nav-item" data-section="fieldInfoSection">‚ÑπÔ∏è ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏ô‡∏≤‡∏°</button>
      <button class="nav-item" data-section="rulesSection">üìã ‡∏Å‡∏é‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ö</button>
      <button class="nav-item" data-section="bookingSection">‚öΩ ‡∏à‡∏≠‡∏á‡∏™‡∏ô‡∏≤‡∏°</button>
      <button class="nav-item" data-section="checkBookingSection">‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</button>
      <button class="nav-item" data-section="gallerySection">üì∏ ‡πÅ‡∏Å‡∏•‡πÄ‡∏•‡∏≠‡∏£‡∏µ‡πà</button>
      <button class="nav-item" data-section="contactSection">üìû ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏°</button>
    </div>
  </div>

    <!-- Home Section -->
    <section id="homeSection">

      <div class="hero">
        <img src="f6.jpg" alt="Logo" class="hero-logo-left" />
        <h1>PRIJIT SPORT</h1>
        <p>‚öΩ ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏≠‡∏á‡∏™‡∏ô‡∏≤‡∏°‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏• 7 ‡∏Ñ‡∏ô ‚öΩ</p>
        <p>‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô ‡∏à‡∏≠‡∏á‡∏á‡πà‡∏≤‡∏¢ ‡∏™‡∏∞‡∏î‡∏ß‡∏Å ‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß</p>
        <p>‚ú® ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ üí°</p>
      </div>
      
      <div class="slider-section">
        <div class="slider-container">
          <div class="slider-wrapper">

            <div class="slide active"><img src="f11.jpg" alt="slide1" /></div>
            <div class="slide"><img src="f8.jpg" alt="slide2" /></div>
            <div class="slide"><img src="f9.jpg" alt="slide3" /></div>
            <div class="slide"><img src="f1.jpg" alt="slide4" /></div>
            <div class="slide"><img src="f10.jpg" alt="slide5" /></div>
          </div>

          <button class="slider-btn prev" onclick="changeSlide(-1)">‚Äπ</button>
          <button class="slider-btn next" onclick="changeSlide(1)">‚Ä∫</button>

          <div class="slider-dots">
            <span class="dot active" onclick="currentSlide(0)"></span>
            <span class="dot" onclick="currentSlide(1)"></span>
            <span class="dot" onclick="currentSlide(2)"></span>
            <span class="dot" onclick="currentSlide(3)"></span>
            <span class="dot" onclick="currentSlide(4)"></span>
          </div>
        </div>
      
        <div class="slider-welcome-text">
          <h2>‚öΩ Welcome ‚öΩ</h2>
          <p>‡∏™‡∏π‡πà‡∏™‡∏ô‡∏≤‡∏°‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏• PRIJIT SPORT</p>
          <p style="margin-top: 10px; color: #ffffff;">‡∏™‡∏ô‡∏≤‡∏°‡∏´‡∏ç‡πâ‡∏≤‡πÄ‡∏ó‡∏µ‡∏¢‡∏°‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û ‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô ‡πÅ‡∏•‡∏∞ ‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢</p>
        </div>
      </div>
    </section>

    <!-- Field Info Section -->
    <section id="fieldInfoSection">
      <h2 class="section-title">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏ô‡∏≤‡∏°</h2>
      <div class="content-card">
        <div class="section-header">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏ô‡∏≤‡∏°‡πÅ‡∏•‡∏∞‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå</div>
        <div class="field-details">
          <p><strong>üèüÔ∏è ‡∏°‡∏µ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î 6 ‡∏™‡∏ô‡∏≤‡∏°</strong></p>
          <p>üí° ‡∏°‡∏µ‡∏™‡∏õ‡∏≠‡∏ï‡πÑ‡∏•‡∏ó‡πå ‡∏™‡∏ô‡∏≤‡∏°‡∏•‡∏∞ 6 ‡∏à‡∏∏‡∏î</p>
          <p>üå± ‡∏™‡∏ô‡∏≤‡∏°‡∏´‡∏ç‡πâ‡∏≤‡πÄ‡∏ó‡∏µ‡∏¢‡∏°</p>
          <p>üìä ‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏±‡∏ö‡∏ú‡∏•‡∏™‡∏Å‡∏≠‡∏£‡πå (Scoreboard)</p>
          <p>‚öΩ ‡∏•‡∏π‡∏Å‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏• ‡∏™‡∏ô‡∏≤‡∏°‡∏•‡∏∞ 2 ‡πÉ‡∏ö</p>
          <p>üöª ‡∏°‡∏µ‡∏´‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≥ 2 ‡∏à‡∏∏‡∏î</p>
        </div>

        <div class="price-list">
          <h3 style="margin-bottom: 20px; color: #000000; text-align: center;">üí∞ ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Ñ‡πà‡∏≤‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</h3>
          <div class="price-item">
            <span class="field-name">‡∏™‡∏ô‡∏≤‡∏° 1 (35√ó54m)</span>
            <span class="field-price">‡∏Å‡πà‡∏≠‡∏ô 6 ‡πÇ‡∏°‡∏á = 1,000 ‡∏ö‡∏≤‡∏ó | ‡∏´‡∏•‡∏±‡∏á 6 ‡πÇ‡∏°‡∏á = 1,200 ‡∏ö‡∏≤‡∏ó</span>
          </div>
          <div class="price-item">
            <span class="field-name">‡∏™‡∏ô‡∏≤‡∏° 2 (35√ó54m)</span>
            <span class="field-price">‡∏Å‡πà‡∏≠‡∏ô 6 ‡πÇ‡∏°‡∏á = 1,000 ‡∏ö‡∏≤‡∏ó | ‡∏´‡∏•‡∏±‡∏á 6 ‡πÇ‡∏°‡∏á = 1,200 ‡∏ö‡∏≤‡∏ó</span>
          </div>
          <div class="price-item">
            <span class="field-name">‡∏™‡∏ô‡∏≤‡∏° 3 (35√ó52m)</span>
            <span class="field-price">‡∏Å‡πà‡∏≠‡∏ô 6 ‡πÇ‡∏°‡∏á = 1,000 ‡∏ö‡∏≤‡∏ó | ‡∏´‡∏•‡∏±‡∏á 6 ‡πÇ‡∏°‡∏á = 1,200 ‡∏ö‡∏≤‡∏ó</span>
          </div>
          <div class="price-item">
            <span class="field-name">‡∏™‡∏ô‡∏≤‡∏° 4 (37√ó55m)</span>
            <span class="field-price">‡∏Å‡πà‡∏≠‡∏ô 6 ‡πÇ‡∏°‡∏á = 1,100 ‡∏ö‡∏≤‡∏ó | ‡∏´‡∏•‡∏±‡∏á 6 ‡πÇ‡∏°‡∏á = 1,300 ‡∏ö‡∏≤‡∏ó</span>
          </div>
          <div class="price-item">
            <span class="field-name">‡∏™‡∏ô‡∏≤‡∏° 5 (34√ó50m)</span>
            <span class="field-price">‡∏Å‡πà‡∏≠‡∏ô 6 ‡πÇ‡∏°‡∏á = 900 ‡∏ö‡∏≤‡∏ó | ‡∏´‡∏•‡∏±‡∏á 6 ‡πÇ‡∏°‡∏á = 1,100 ‡∏ö‡∏≤‡∏ó</span>
          </div>
          <div class="price-item">
            <span class="field-name">‡∏™‡∏ô‡∏≤‡∏° 6 (27√ó45m)</span>
            <span class="field-price">‡∏Å‡πà‡∏≠‡∏ô 6 ‡πÇ‡∏°‡∏á = 700 ‡∏ö‡∏≤‡∏ó | ‡∏´‡∏•‡∏±‡∏á 6 ‡πÇ‡∏°‡∏á = 900 ‡∏ö‡∏≤‡∏ó</span>
          </div>
        </div>

        <div class="section-header" style="margin-top: 40px;">üìç ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á</div>
        <div class="map-container">
          <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3876.519192244568!2d100.42645637479106!3d13.68697489879167!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x30e2bd50acd08fd7%3A0x9ec98b477706a73!2z4Liq4LiZ4Liy4Lih4Lif4Li44LiV4Lia4Lit4Lil4LmE4Lie4Lij4LiI4Li04LiV4Lij4Liq4Lib4Lit4Lij4LmM4LiV!5e0!3m2!1sth!2sth!4v1767945226405!5m2!1sth!2sth" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
        </div>

        <div style="text-align: center; margin-top: 20px; padding: 20px; background: #f0fdf4; border-radius: 10px;">
          <p style="color: #16a34a; font-weight: bold; font-size: 1.1em;">üìå ‡∏à‡∏∏‡∏î‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï: ‡∏Å‡πà‡∏≠‡∏ô‡∏™‡∏µ‡πà‡πÅ‡∏¢‡∏Å‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 1 ‡πÅ‡∏•‡∏∞ ‡∏ö‡∏≤‡∏á‡πÅ‡∏Ñ</p>
          <p style="color: #020202; margin-top: 10px;">üöó ‡∏°‡∏µ‡∏ó‡∏µ‡πà‡∏à‡∏≠‡∏î‡∏£‡∏ñ‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏Ç‡∏ß‡∏≤‡∏á ‡∏™‡∏∞‡∏î‡∏ß‡∏Å‡∏™‡∏ö‡∏≤‡∏¢</p>
        </div>
      </div> 
    </section>

    <!-- Rules Section -->
    <section id="rulesSection">
      <h2 class="section-title">‡∏Å‡∏é‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ö</h2>
      <div class="content-card">
        <div class="section-header">‡∏Ç‡πâ‡∏≠‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏™‡∏ô‡∏≤‡∏°</div>
        <div class="rules-list">
          <div class="rule-item">
            ‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏∞‡∏ö‡∏≠‡∏• ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏£‡∏≠‡∏á‡πÄ‡∏ó‡πâ‡∏≤‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏•‡∏™‡∏ô‡∏≤‡∏°‡∏´‡∏ç‡πâ‡∏≤‡πÄ‡∏ó‡∏µ‡∏¢‡∏° (Stud Turf/AG) ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏≠‡∏á‡πÄ‡∏ó‡πâ‡∏≤‡∏ü‡∏∏‡∏ï‡∏ã‡∏≠‡∏• ‡∏´‡πâ‡∏≤‡∏°‡πÉ‡∏ä‡πâ‡∏£‡∏≠‡∏á‡πÄ‡∏ó‡πâ‡∏≤‡∏´‡∏°‡∏∏‡∏î‡πÅ‡∏´‡∏•‡∏° ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏≠‡∏á‡πÄ‡∏ó‡πâ‡∏≤‡πÅ‡∏ö‡∏ö‡∏´‡∏°‡∏∏‡∏î‡πÄ‡∏´‡∏•‡πá‡∏Å ‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏≠‡∏≤‡∏à‡∏ó‡∏≥‡∏•‡∏≤‡∏¢‡∏™‡∏ô‡∏≤‡∏°‡πÑ‡∏î‡πâ
          </div>
          <div class="rule-item">
            ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏™‡∏ô‡∏≤‡∏° ‡∏´‡πâ‡∏≤‡∏°‡∏ô‡∏≥‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤ ‡∏´‡πâ‡∏≤‡∏°‡∏ô‡∏≥‡∏≠‡∏≤‡∏´‡∏≤‡∏£ ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°‡πÅ‡∏≠‡∏•‡∏Å‡∏≠‡∏Æ‡∏≠‡∏•‡πå‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤ ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏£‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏ö‡∏£‡∏¥‡πÄ‡∏ß‡∏ì‡∏™‡∏ô‡∏≤‡∏°
          </div>
          <div class="rule-item">
            ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ ‡∏´‡πâ‡∏≤‡∏°‡πÄ‡∏•‡πà‡∏ô‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á ‡πÉ‡∏ä‡πâ‡∏ó‡πà‡∏≤‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢ ‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡πÉ‡∏î‡πÜ ‡∏ó‡∏µ‡πà‡∏≠‡∏≤‡∏à‡∏Å‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏Å‡∏¥‡∏î‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô
          </div>
          <div class="rule-item">
            ‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ó‡∏¥‡πâ‡∏á‡∏Ç‡∏¢‡∏∞‡∏•‡∏á‡∏ñ‡∏±‡∏á‡∏Ç‡∏¢‡∏∞ ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
          </div>
          <div class="rule-item" style="background: #dcfce7; border-left: 5px solid #22c55e">
            ‚ö†Ô∏è ‡∏Ç‡πâ‡∏≠‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç: ‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏Ç‡∏≠‡∏á‡∏ï‡∏ô‡πÄ‡∏≠‡∏á ‡∏ó‡∏≤‡∏á‡∏™‡∏ô‡∏≤‡∏°‡πÑ‡∏°‡πà‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö‡∏ï‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏ç‡∏´‡∏≤‡∏¢‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏™‡∏¥‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•
          </div>
        </div>
      </div>
    </section>

    <!-- Booking Section -->
    <section id="bookingSection">
      <h2 class="section-title">‡∏à‡∏≠‡∏á‡∏™‡∏ô‡∏≤‡∏°</h2>
      <div class="content-card">
        <div class="section-header">‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏≠‡∏á‡∏™‡∏ô‡∏≤‡∏°</div>
        
        <div class="availability-legend">
          <div class="legend-item">
            <div class="legend-box available"></div>
            <span>‡∏ß‡πà‡∏≤‡∏á</span>
          </div>
          <div class="legend-item">
            <div class="legend-box booked"></div>
            <span>‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏á</span>
          </div>
        </div>
        
        <div class="form-group">
          <label class="form-label">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏ô‡∏≤‡∏°</label>
          <select id="fieldSelect" class="form-input" onchange="checkAvailability()">
            <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏ô‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£</option>
            <option value="‡∏™‡∏ô‡∏≤‡∏° 1">‡∏™‡∏ô‡∏≤‡∏° 1 (35√ó54m) - 1,000/1,200 ‡∏ö‡∏≤‡∏ó</option>
            <option value="‡∏™‡∏ô‡∏≤‡∏° 2">‡∏™‡∏ô‡∏≤‡∏° 2 (35√ó54m) - 1,000/1,200 ‡∏ö‡∏≤‡∏ó</option>
            <option value="‡∏™‡∏ô‡∏≤‡∏° 3">‡∏™‡∏ô‡∏≤‡∏° 3 (35√ó52m) - 1,000/1,200 ‡∏ö‡∏≤‡∏ó</option>
            <option value="‡∏™‡∏ô‡∏≤‡∏° 4">‡∏™‡∏ô‡∏≤‡∏° 4 (37√ó55m) - 1,100/1,300 ‡∏ö‡∏≤‡∏ó</option>
            <option value="‡∏™‡∏ô‡∏≤‡∏° 5">‡∏™‡∏ô‡∏≤‡∏° 5 (34√ó50m) - 900/1,100 ‡∏ö‡∏≤‡∏ó</option>
            <option value="‡∏™‡∏ô‡∏≤‡∏° 6">‡∏™‡∏ô‡∏≤‡∏° 6 (27√ó45m) - 700/900 ‡∏ö‡∏≤‡∏ó</option>
          </select>
        </div>

        <div class="form-group">
          <label class="form-label">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</label>
          <input type="date" id="dateSelect" class="form-input" onchange="checkAvailability()" />
        </div>
        <div id="availabilityStatus" class="availability-notice" style="display: none">
          <strong>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏™‡∏ô‡∏≤‡∏°...</strong>
        </div>
        
        <div class="form-group">
          <label class="form-label">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤</label>
          <div class="time-slots-grid" id="timeSlotsContainer">
            <button class="time-slot-btn" type="button" data-time="08:00 - 10:00">08:00 - 10:00</button>
            <button class="time-slot-btn" type="button" data-time="10:00 - 12:00">10:00 - 12:00</button>
            <button class="time-slot-btn" type="button" data-time="11:00 - 13:00">11:00 - 13:00</button>
            <button class="time-slot-btn" type="button" data-time="13:00 - 14:00">13:00 - 14:00</button>
            <button class="time-slot-btn" type="button" data-time="14:00 - 16:00">14:00 - 16:00</button>
            <button class="time-slot-btn" type="button" data-time="15:00 - 16:00">15:00 - 16:00</button>
            <button class="time-slot-btn" type="button" data-time="16:00 - 17:00">16:00 - 17:00</button>
            <button class="time-slot-btn" type="button" data-time="17:00 - 18:00">17:00 - 18:00</button>
            <button class="time-slot-btn" type="button" data-time="18:00 - 19:00">18:00 - 19:00</button>
            <button class="time-slot-btn" type="button" data-time="19:00 - 20:00">19:00 - 20:00</button>
          </div> 

          <button class="submit-btn" onclick="confirmBooking()">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
          </button>
        </div>
    </section>

    <!-- Check Booking Section -->
    <section id="checkBookingSection">
      <h2 class="section-title">‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</h2>
      <div class="content-card">
        <div class="section-header">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</div>

        <div id="bookingList" style="min-height: 200px">
          <p style="text-align: center; color: #6b7280; padding: 40px">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</p>
        </div>
      </div>
    </section>

    <!-- Gallery Section -->
    <section id="gallerySection">
      <h2 class="section-title">‡πÅ‡∏Å‡∏•‡πÄ‡∏•‡∏≠‡∏£‡∏µ‡πà</h2>
      <div class="content-card">
        <div class="section-header">üì∏ ‡∏†‡∏≤‡∏û‡∏ö‡∏£‡∏£‡∏¢‡∏≤‡∏Å‡∏≤‡∏®‡∏™‡∏ô‡∏≤‡∏° PRIJIT SPORT</div>

        <div class="gallery-main-image">
          <img id="galleryMainImage" src="f11.jpg" alt="‡∏™‡∏ô‡∏≤‡∏°‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏• PRIJIT SPORT">
          <button class="gallery-nav-btn gallery-prev-btn" onclick="changeGalleryImage(-1)">‚ùÆ</button>
          <button class="gallery-nav-btn gallery-next-btn" onclick="changeGalleryImage(1)">‚ùØ</button>
        </div>

        <div class="gallery-counter">
          <span id="currentImageNumber">1</span> / <span id="totalImages">7</span>
        </div>

        <div class="gallery-thumbnails">
          <img class="gallery-thumbnail active" src="f11.jpg" onclick="selectGalleryImage(0)" alt="‡∏†‡∏≤‡∏û 1">
          <img class="gallery-thumbnail" src="f8.jpg" onclick="selectGalleryImage(1)" alt="‡∏†‡∏≤‡∏û 2">
          <img class="gallery-thumbnail" src="f9.jpg" onclick="selectGalleryImage(2)" alt="‡∏†‡∏≤‡∏û 3">
          <img class="gallery-thumbnail" src="f1.jpg" onclick="selectGalleryImage(3)" alt="‡∏†‡∏≤‡∏û 4">
          <img class="gallery-thumbnail" src="f10.jpg" onclick="selectGalleryImage(4)" alt="‡∏†‡∏≤‡∏û 5">
          <img class="gallery-thumbnail" src="f2.jpg" onclick="selectGalleryImage(5)" alt="‡∏†‡∏≤‡∏û 6">
          <img class="gallery-thumbnail" src="f3.jpg" onclick="selectGalleryImage(6)" alt="‡∏†‡∏≤‡∏û 7">
        </div>

        <div style="text-align: center; margin-top: 40px; padding: 30px; background: #f0fdf4; border-radius: 15px;">
          <p style="font-size: 1.3em; color: #16a34a; font-weight: bold;">‚öΩ ‡∏†‡∏≤‡∏û‡∏ö‡∏£‡∏£‡∏¢‡∏≤‡∏Å‡∏≤‡∏®‡∏™‡∏ô‡∏≤‡∏° ‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô ‡πÅ‡∏•‡∏∞‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ ‚öΩ</p>
          <p style="margin-top: 10px; color: #6b7280;">‡∏à‡∏≠‡∏á‡∏™‡∏ô‡∏≤‡∏°‡∏ú‡πà‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå ‡∏™‡∏∞‡∏î‡∏ß‡∏Å ‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß</p>
        </div>
      </div>
    </section>

    <!-- Contact Section -->
    <section id="contactSection">
      <h2 class="section-title">‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏°</h2>
      <div class="content-card">
        <div class="section-header">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠</div>

        <div class="contact-wrapper">
          <div class="contact-logo-img">
            <img src="f6.jpg" alt="PRIJIT SPORT Logo" />
          </div>

          <div class="contact-info">
            <div class="contact-phone">
              <span>üìû</span>
              <strong>089-115-3822</strong>
            </div>
            <div class="contact-phone">
              <span>üìû</span>
              <strong>02-899-2448</strong>
            </div>
          </div>
        </div>

        <div class="thank-you-text">thank you</div>
        <p style="text-align: center;">‚öΩPRIJIT SPORT‚öΩ</p>
      </div>
    </section>
    
    <!-- Firebase Scripts -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js" onerror="console.error('‚ùå Failed to load firebase-app-compat.js'); window.firebaseLoadError = true;"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js" onerror="console.error('‚ùå Failed to load firebase-auth-compat.js'); window.firebaseLoadError = true;"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js" onerror="console.error('‚ùå Failed to load firebase-database-compat.js'); window.firebaseLoadError = true;"></script>

    <script>
console.log('üöÄ [PRIJIT SPORT] Script starting...', new Date().toISOString());

// ========================================
// 1Ô∏è‚É£ CACHE CLEANUP
// ========================================
(function() {
  console.log('üßπ [1/3] Cache cleanup...');
  try { localStorage.clear(); console.log('  ‚úÖ localStorage cleared'); } catch(e) {}
  try { sessionStorage.clear(); console.log('  ‚úÖ sessionStorage cleared'); } catch(e) {}
  console.log('‚úÖ [1/3] Cache cleanup complete');
})();

// ========================================
// 2Ô∏è‚É£ GLOBAL VARIABLES
// ========================================
console.log('üì¶ [2/3] Declaring global variables...');

// Firebase
let auth, database, currentUser = null;

// Booking
let selectedTimeSlot = null;
let currentBookingData = null;
let uploadedSlipFile = null;
let currentAvailabilityCheck = null;

// Navigation & Menu
let lastMenuToggleTime = 0;
const MENU_TOGGLE_DELAY = 150;
let lastNavigationTime = 0;
const NAVIGATION_DELAY = 150; 

// Slider
let currentSlideIndex = 0;
let slideInterval = null;

// Gallery
const galleryImages = ['f11.jpg', 'f8.jpg', 'f9.jpg', 'f1.jpg', 'f10.jpg', 'f2.jpg', 'f3.jpg'];
let currentGalleryIndex = 0;

// Payment
let paymentTimer = null;

// Constants
const DEPOSIT_PERCENTAGE = 0.3;
const MAX_BOOKING_DAYS = 30;
const MAX_FILE_SIZE_MB = 5;
const PAYMENT_TIMEOUT_MINUTES = 15;
const MAX_FILE_SIZE_BYTES = MAX_FILE_SIZE_MB * 1024 * 1024;

console.log('‚úÖ [2/3] Global variables initialized');
console.log('  ‚öôÔ∏è NAVIGATION_DELAY:', NAVIGATION_DELAY, 'ms');
console.log('  ‚öôÔ∏è MENU_TOGGLE_DELAY:', MENU_TOGGLE_DELAY, 'ms');

// ========================================
// 3Ô∏è‚É£ INIT NAVIGATION (bind events)
// ========================================
(function initNavigation() {
  console.log('üéØ [3/3] Initializing navigation...');
  
  function bindEvents() {
    const navItems = document.querySelectorAll('.nav-item[data-section]');
    console.log('  üîß Found', navItems.length, 'nav items');
    
    navItems.forEach((item, index) => {
      const sectionId = item.getAttribute('data-section');
      const loadBooking = item.getAttribute('data-load-booking') === 'true';
      
      let touchStartTime = 0;
      let touchHandled = false;
      
      // ‚úÖ TOUCHSTART EVENT (Immediate - ‡πÑ‡∏°‡πà‡∏°‡∏µ delay)
      item.addEventListener('touchstart', function(e) {
        touchStartTime = Date.now();
        
        // Visual feedback ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
        this.style.backgroundColor = 'rgba(255, 255, 255, 0.4)';
        
        console.log(`üì± Touch START: ${sectionId} [${index}]`);
      }, { passive: true });
      
      // ‚úÖ TOUCHEND EVENT (Execute action)
      item.addEventListener('touchend', function(e) {
        e.preventDefault();
        e.stopPropagation();
        
        const now = Date.now();
        const touchDuration = now - touchStartTime;
        
        // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô accidental tap (‡πÄ‡∏£‡πá‡∏ß‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ)
        if (touchDuration < 50) {
          console.log('  ‚ö†Ô∏è Touch too fast, ignoring');
          return;
        }
        
        // Debounce
        if (now - lastNavigationTime > 200) {
          lastNavigationTime = now;
          touchHandled = true;
          
          // Clear visual feedback
          setTimeout(() => { 
            this.style.backgroundColor = ''; 
            touchHandled = false;
          }, 300);
          
          console.log(`‚úÖ Touch END: ${sectionId} [${index}] - navigating`);
          navigateToSection(sectionId, loadBooking);
        } else {
          console.log('  ‚ö†Ô∏è Debounced touch');
        }
      }, { passive: false });
      
      // ‚úÖ CLICK EVENT (Desktop fallback)
      item.addEventListener('click', function(e) {
        // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô ghost click ‡∏´‡∏•‡∏±‡∏á touch
        if (touchHandled || (Date.now() - lastNavigationTime) < 500) {
          e.preventDefault();
          console.log('  ‚ö†Ô∏è Blocked ghost click');
          return;
        }
        
        const now = Date.now();
        if (now - lastNavigationTime > 200) {
          lastNavigationTime = now;
          console.log(`üñ±Ô∏è Click nav: ${sectionId} [${index}]`);
          navigateToSection(sectionId, loadBooking);
        }
      });
    });  
      
    // ‚úÖ HAMBURGER MENU
    const hamburger = document.getElementById('hamburgerBtn');
    if (hamburger) {
      let hamTouchStart = 0;
      let hamTouchHandled = false;
      
      hamburger.addEventListener('touchstart', function(e) {
        hamTouchStart = Date.now();
        this.style.backgroundColor = 'rgba(255, 255, 255, 0.5)';
      }, { passive: true });
      
      hamburger.addEventListener('touchend', function(e) {
        e.preventDefault();
        e.stopPropagation();
        
        const now = Date.now();
        const duration = now - hamTouchStart;
        
        if (duration >= 50 && now - lastMenuToggleTime > 200) {
          lastMenuToggleTime = now;
          hamTouchHandled = true;
          
          this.style.backgroundColor = '';
          setTimeout(() => { hamTouchHandled = false; }, 300);
          
          console.log('  üçî Hamburger toggled');
          toggleMobileMenu();
        }
      }, { passive: false });
      
      hamburger.addEventListener('click', function(e) {
        if (hamTouchHandled || (Date.now() - lastMenuToggleTime) < 500) {
          e.preventDefault();
          return;
        }
        
        const now = Date.now();
        if (now - lastMenuToggleTime > 200) {
          lastMenuToggleTime = now;
          toggleMobileMenu();
        }
      });
    }
    
    // ‚úÖ LOGIN/LOGOUT BUTTONS (same pattern)
    const loginBtn = document.getElementById('loginNavBtn');
    if (loginBtn) {
      let loginTouchHandled = false;
      
      loginBtn.addEventListener('touchend', function(e) {
        e.preventDefault();
        e.stopPropagation();
        loginTouchHandled = true;
        openLoginModal();
        setTimeout(() => { loginTouchHandled = false; }, 300);
      }, { passive: false });
      
      loginBtn.addEventListener('click', function(e) {
        if (loginTouchHandled) {
          e.preventDefault();
          return;
        }
        openLoginModal();
      });
    }
    
    const logoutBtn = document.getElementById('logoutBtn');
    if (logoutBtn) {
      let logoutTouchHandled = false;
      
      logoutBtn.addEventListener('touchend', function(e) {
        e.preventDefault();
        e.stopPropagation();
        logoutTouchHandled = true;
        handleLogout();
        setTimeout(() => { logoutTouchHandled = false; }, 300);
      }, { passive: false });
      
      logoutBtn.addEventListener('click', function(e) {
        if (logoutTouchHandled) {
          e.preventDefault();
          return;
        }
        handleLogout();
      });
    }
    
    
    // ‚úÖ FIELD ‡πÅ‡∏•‡∏∞ DATE SELECT - ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏™‡∏ô‡∏≤‡∏°
    const fieldSelect = document.getElementById('fieldSelect');
    const dateSelect = document.getElementById('dateSelect');
    
    if (fieldSelect && dateSelect) {
      fieldSelect.addEventListener('change', function() {
        console.log('üèüÔ∏è Field changed:', this.value);
        checkAvailability();
      });
      
      dateSelect.addEventListener('change', function() {
        console.log('üìÖ Date changed:', this.value);
        checkAvailability();
      });
      
      console.log('‚úÖ Field/Date select listeners bound');
    }
    console.log('‚úÖ [3/3] Navigation initialized with touchstart + touchend pattern');
  }
  
  // ‚úÖ ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å bindEvents() ‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', bindEvents);
  } else {
    bindEvents();
  }
})();

// ========================================
// NAVIGATION FUNCTIONS
// ========================================
function navigateToSection(sectionId, loadBooking = false) {
  console.log('üìç Navigate to:', sectionId);
  closeMobileMenu();
  
  const section = document.getElementById(sectionId);
  if (section) {
    section.scrollIntoView({ behavior: 'smooth', block: 'start' });
    if (loadBooking) {
      setTimeout(() => {
        console.log('  üìã Loading booking list...');
        updateBookingList();
      }, 300);
    }
  } else {
    console.error('  ‚ùå Section not found:', sectionId);
  }
}
 
function navigateToSection(sectionId) {
  const overlay = document.getElementById('menuOverlay');
  const hamburger = document.getElementById('hamburgerBtn');
  overlay.classList.remove('active');
  hamburger.classList.remove('active');
  document.body.style.overflow = '';
  
  const section = document.getElementById(sectionId);
  if (section) {
    section.scrollIntoView({ behavior: 'smooth', block: 'start' });
  }
}

function toggleMobileMenu() {
  const overlay = document.getElementById('menuOverlay');
  const hamburger = document.getElementById('hamburgerBtn');
  const isActive = overlay.classList.contains('active');
  
  if (isActive) {
    overlay.classList.remove('active');
    hamburger.classList.remove('active');
    document.body.style.overflow = '';
  } else {
    overlay.classList.add('active');
    hamburger.classList.add('active');
    document.body.style.overflow = 'hidden';
  }
}
// ========================================
// MODAL FUNCTIONS
// ========================================
function openLoginModal() {
  document.getElementById('loginModal').classList.add('active');
  showLoginInModal();
}
function closeLoginModal() {
  document.getElementById('loginModal').classList.remove('active');
}
function showLoginInModal() {
  document.getElementById('modalLoginForm').style.display = 'block';
  document.getElementById('modalRegisterForm').style.display = 'none';
}
function showRegisterInModal() {
  document.getElementById('modalLoginForm').style.display = 'none';
  document.getElementById('modalRegisterForm').style.display = 'block';
}

// ========================================
// SLIDER FUNCTIONS
// ========================================
function startSlider() {
  slideInterval = setInterval(() => changeSlide(1), 4000);
}

function stopSlider() {
  clearInterval(slideInterval);
}

function showSlide(index) {
  const slides = document.querySelectorAll(".slide");
  const dots = document.querySelectorAll(".dot");

  if (index >= slides.length) currentSlideIndex = 0;
  if (index < 0) currentSlideIndex = slides.length - 1;

  slides.forEach((slide) => slide.classList.remove("active"));
  dots.forEach((dot) => dot.classList.remove("active"));

  slides[currentSlideIndex].classList.add("active");
  dots[currentSlideIndex].classList.add("active");
}

function changeSlide(direction) {
  currentSlideIndex += direction;
  const slides = document.querySelectorAll(".slide");

  if (currentSlideIndex >= slides.length) currentSlideIndex = 0;
  else if (currentSlideIndex < 0) currentSlideIndex = slides.length - 1;

  showSlide(currentSlideIndex);
  stopSlider();
  startSlider();
}

function currentSlide(index) {
  currentSlideIndex = index;
  showSlide(currentSlideIndex);
  stopSlider();
  startSlider();
}

// ========================================
// GALLERY FUNCTIONS
// ========================================
function changeGalleryImage(direction) {
  currentGalleryIndex += direction;
  
  if (currentGalleryIndex < 0) currentGalleryIndex = galleryImages.length - 1;
  else if (currentGalleryIndex >= galleryImages.length) currentGalleryIndex = 0;
  
  updateGalleryDisplay();
}

function selectGalleryImage(index) {
  currentGalleryIndex = index;
  updateGalleryDisplay();
}

function updateGalleryDisplay() {
  document.getElementById('galleryMainImage').src = galleryImages[currentGalleryIndex];
  document.getElementById('currentImageNumber').textContent = currentGalleryIndex + 1;
  document.getElementById('totalImages').textContent = galleryImages.length;
  
  const thumbnails = document.querySelectorAll('.gallery-thumbnail');
  thumbnails.forEach((thumb, index) => {
    if (index === currentGalleryIndex) thumb.classList.add('active');
    else thumb.classList.remove('active');
  });
}

document.addEventListener('keydown', (e) => {
  const gallerySection = document.getElementById('gallerySection');
  if (gallerySection && isInViewport(gallerySection)) {
    if (e.key === 'ArrowLeft') changeGalleryImage(-1);
    else if (e.key === 'ArrowRight') changeGalleryImage(1);
  }
});

function isInViewport(element) {
  const rect = element.getBoundingClientRect();
  return (
    rect.top >= 0 &&
    rect.left >= 0 &&
    rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&
    rect.right <= (window.innerWidth || document.documentElement.clientWidth)
  );
}

// ========================================
// TIME SLOTS FUNCTIONS
// ========================================
function  initializeTimeSlots() {
  const timeSlots = document.querySelectorAll('.time-slot-btn');
  
  timeSlots.forEach(btn => {
    let touchHandled = false;
    
    // ‚úÖ TOUCHEND (Mobile)
    btn.addEventListener('touchend', function(e) {
      e.preventDefault();
      e.stopPropagation();
      
      if (this.classList.contains('booked')) {
        alert('‚ùå ‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏µ‡πâ‡∏ñ‡∏π‡∏Å‡∏à‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏∑‡πà‡∏ô');
        return;
      }
      
      touchHandled = true;
      selectTime(this);
      setTimeout(() => { touchHandled = false; }, 300);
    }, { passive: false });
    
    // ‚úÖ CLICK (Desktop fallback)
    btn.addEventListener('click', function(e) {
      // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô ghost click
      if (touchHandled) {
        e.preventDefault();
        return;
      }
      
      if (this.classList.contains('booked')) {
        alert('‚ùå ‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏µ‡πâ‡∏ñ‡∏π‡∏Å‡∏à‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏∑‡πà‡∏ô');
        return;
      }
      
      selectTime(this);
    });
  });
}

function selectTime(element) {
  if (element.classList.contains('booked')) return;
  
  const timeSlots = document.querySelectorAll(".time-slot-btn");
  timeSlots.forEach((slot) => slot.classList.remove("selected"));
  element.classList.add("selected");
  selectedTimeSlot = element.getAttribute('data-time');
}

function resetTimeSlots() {
  const timeSlots = document.querySelectorAll('.time-slot-btn');
  timeSlots.forEach(btn => {
    btn.classList.remove('available', 'booked', 'selected');
    btn.disabled = false;
    const badge = btn.querySelector('.status-badge');
    if (badge) badge.remove();
  });
}

function checkAvailability() {
  // ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å request ‡πÄ‡∏Å‡πà‡∏≤ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ) ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ .off()
  if (currentAvailabilityCheck) {
    currentAvailabilityCheck = null;
  }

  const field = document.getElementById('fieldSelect').value;
  const date = document.getElementById('dateSelect').value;

  if (!field || !date) {
    resetTimeSlots();
    return;
  }

  const statusDiv = document.getElementById('availabilityStatus');
  statusDiv.style.display = 'block';
  statusDiv.className = 'availability-notice checking';
  statusDiv.innerHTML = '<strong>‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏™‡∏ô‡∏≤‡∏°...</strong>';

  const timeoutId = setTimeout(() => {
    statusDiv.innerHTML = '<strong style="color: #ef4444;">‚ö†Ô∏è ‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏•‡πà‡∏≤‡∏ä‡πâ‡∏≤ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</strong>';
  }, 10000);

  const query = database.ref('bookings').orderByChild('field').equalTo(field);
  currentAvailabilityCheck = query;

  query.once('value')
    .then((snapshot) => {
      clearTimeout(timeoutId);
      if (currentAvailabilityCheck !== query) {
        console.log('‚ö†Ô∏è Request ‡∏ñ‡∏π‡∏Å‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÅ‡∏•‡πâ‡∏ß');
        return;
      }
      
      const bookedTimes = [];
      snapshot.forEach((child) => {
        const booking = child.val();
        if (booking.date === date && booking.bookingStatus !== 'cancelled') {
          bookedTimes.push(booking.time);
        }
      });
    
      updateTimeSlotAvailability(bookedTimes);
      statusDiv.style.display = 'none';
      currentAvailabilityCheck = null;
    })
    .catch((error) => {
      clearTimeout(timeoutId);
      if (currentAvailabilityCheck !== query) return;

      console.error("Error checking availability:", error);
      statusDiv.className = 'availability-notice';
      statusDiv.style.display = 'block';
      statusDiv.innerHTML = '<strong style="color: #ef4444;">‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</strong>';
      currentAvailabilityCheck = null;
    });  
}

function updateTimeSlotAvailability(bookedTimes) {
  const timeSlots = document.querySelectorAll('.time-slot-btn');
  
  timeSlots.forEach(btn => {
    const time = btn.getAttribute('data-time');
    
    btn.classList.remove('available', 'booked', 'selected');
    const existingBadge = btn.querySelector('.status-badge');
    if (existingBadge) existingBadge.remove();

    if (bookedTimes.includes(time)) {
      btn.classList.add('booked');
      btn.disabled = true;
      const badge = document.createElement('span');
      badge.className = 'status-badge';
      badge.textContent = '‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏á';
      btn.appendChild(badge);
    } else {
      btn.classList.add('available');
      btn.disabled = false;
      const badge = document.createElement('span');
      badge.className = 'status-badge';
      badge.textContent = '‡∏ß‡πà‡∏≤‡∏á';
      btn.appendChild(badge);
    }
  });
}

function resetBookingForm() {
  document.getElementById('fieldSelect').value = '';
  document.getElementById('dateSelect').value = '';
  selectedTimeSlot = null;
  resetTimeSlots();
}

// ========================================
// AUTH FUNCTIONS
// ========================================
function handleLogin(e) {
  e.preventDefault();
  const username = document.getElementById("modalLoginUsername").value;
  const password = document.getElementById("modalLoginPassword").value;
  const email = username + "@prijitsport.com";
  
  auth.signInWithEmailAndPassword(email, password)
    .then(userCredential => {
      return database.ref('users/' + userCredential.user.uid).once('value');
    })
    .then(snapshot => {
      currentUser = { uid: auth.currentUser.uid, ...snapshot.val() };
      document.getElementById("currentUser").textContent = currentUser.fullname;
      document.getElementById("loginNavBtn").style.display = "none";
      document.getElementById("userInfo").style.display = "flex";
      closeLoginModal();
      alert("‚úÖ ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!");
    })
    .catch(error => {
      alert("‚ùå ‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á");
    });
}

function handleRegister(e) {
  e.preventDefault();
  const username = document.getElementById("modalRegUsername").value;
  const fullname = document.getElementById("modalRegFullname").value;
  const phone = document.getElementById("modalRegPhone").value;
  const password = document.getElementById("modalRegPassword").value;
  const email = username + "@prijitsport.com";
  
  auth.createUserWithEmailAndPassword(email, password)
    .then(userCredential => {
      return database.ref('users/' + userCredential.user.uid).set({
        username, fullname, phone,
        createdAt: new Date().toISOString()
      });
    })
    .then(() => {
      alert("‚úÖ ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!");
      e.target.reset();
      showLoginInModal();
    })
    .catch(error => {
      if (error.code === 'auth/email-already-in-use') {
        alert("‚ùå ‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß");
      } else {
        alert("‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: " + error.message);
      }
    });
}

function handleLogout() {
  if (confirm("‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö?")) {
    auth.signOut().then(() => {
      currentUser = null;
      document.getElementById("loginNavBtn").style.display = "inline-block";
      document.getElementById("userInfo").style.display = "none";
      alert("‚úÖ ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢");
    });
  }
}


// ========================================
// BOOKING FUNCTIONS
// ========================================
function confirmBooking() {
  const field = document.getElementById("fieldSelect").value;
  const date = document.getElementById("dateSelect").value;

  if (!field || !date || !selectedTimeSlot) {
    alert("‚ùå ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô");
    return;
  }

  const selectedDate = new Date(date);
  const today = new Date();
  today.setHours(0, 0, 0, 0);

  if (selectedDate < today) {
    alert("‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏à‡∏≠‡∏á‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÑ‡∏î‡πâ");
    return;
  }
  
  const maxDate = new Date(today);
  maxDate.setDate(maxDate.getDate() + 30);
  if (selectedDate > maxDate) {
    alert("‚ùå ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏à‡∏≠‡∏á‡πÑ‡∏î‡πâ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 30 ‡∏ß‡∏±‡∏ô‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô");
    return;
  }

  let totalPrice = 0;
  const hour = parseInt(selectedTimeSlot.split(":")[0]);

  if (field.includes("‡∏™‡∏ô‡∏≤‡∏° 1") || field.includes("‡∏™‡∏ô‡∏≤‡∏° 2") || field.includes("‡∏™‡∏ô‡∏≤‡∏° 3")) {
    totalPrice = hour >= 18 ? 1200 : 1000;
  } else if (field.includes("‡∏™‡∏ô‡∏≤‡∏° 4")) {
    totalPrice = hour >= 18 ? 1300 : 1100;
  } else if (field.includes("‡∏™‡∏ô‡∏≤‡∏° 5")) {
    totalPrice= hour >= 18 ? 1100 : 900;
  } else if (field.includes("‡∏™‡∏ô‡∏≤‡∏° 6")) {
    totalPrice = hour >= 18 ? 900 : 700;
  }

  const depositAmount = Math.round(totalPrice * DEPOSIT_PERCENTAGE);
  const remainingAmount = totalPrice - depositAmount;

  currentBookingData = {
    field: field,
    date: date,
    time: selectedTimeSlot,
    totalPrice: totalPrice,
    depositAmount: depositAmount,
    remainingAmount: remainingAmount
  };

  const confirmMsg = `üìã ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á:

üìç ‡∏™‡∏ô‡∏≤‡∏°: ${field}
üìÖ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: ${date}
‚è∞ ‡πÄ‡∏ß‡∏•‡∏≤: ${selectedTimeSlot}

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üí∞ ‡∏Ñ‡πà‡∏≤‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: ${totalPrice.toLocaleString()} ‡∏ö‡∏≤‡∏ó
üíµ ‡∏Ñ‡πà‡∏≤‡∏°‡∏±‡∏î‡∏à‡∏≥ 30%: ${depositAmount.toLocaleString()} ‡∏ö‡∏≤‡∏ó
üí∏ ‡∏Ñ‡πà‡∏≤‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠: ${remainingAmount.toLocaleString()} ‡∏ö‡∏≤‡∏ó
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

üë§ ‡∏ú‡∏π‡πâ‡∏à‡∏≠‡∏á: ${currentUser.fullname}
üìû ‡πÄ‡∏ö‡∏≠‡∏£‡πå: ${currentUser.phone}

‚ö†Ô∏è ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç:
- ‡∏ä‡∏≥‡∏£‡∏∞‡∏Ñ‡πà‡∏≤‡∏°‡∏±‡∏î‡∏à‡∏≥ ${depositAmount.toLocaleString()} ‡∏ö‡∏≤‡∏ó‡∏ú‡πà‡∏≤‡∏ô QR Code
- ‡∏°‡∏≤‡∏ï‡∏≤‡∏°‡∏ô‡∏±‡∏î = ‡∏Ñ‡∏∑‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏°‡∏±‡∏î‡∏à‡∏≥‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
- ‡πÑ‡∏°‡πà‡∏°‡∏≤‡∏ï‡∏≤‡∏°‡∏ô‡∏±‡∏î = ‡∏£‡∏¥‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏°‡∏±‡∏î‡∏à‡∏≥

‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏ï‡πà‡∏≠?`;
  
  if (!confirm(confirmMsg)) return;

  showPaymentModal();
}

function showPaymentModal() {
  const data = currentBookingData;

  const modalHTML = `
    <div id="paymentModal" class="payment-modal active">
      <div class="payment-content">
        <div class="payment-header">
          <h2>üí≥ ‡∏ä‡∏≥‡∏£‡∏∞‡∏Ñ‡πà‡∏≤‡∏°‡∏±‡∏î‡∏à‡∏≥</h2>
          <p>‡∏à‡∏≠‡∏á‡∏™‡∏ô‡∏≤‡∏° ${data.field}</p>
        </div>

        <div class="payment-summary">
          <div class="summary-row">
            <span class="summary-label">üíµ ‡∏Ñ‡πà‡∏≤‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î:</span>
            <span class="summary-value">${data.totalPrice.toLocaleString()} ‡∏ö‡∏≤‡∏ó</span>
          </div>
          <div class="summary-row">
            <span class="summary-label">üìç ‡∏Ñ‡πà‡∏≤‡∏°‡∏±‡∏î‡∏à‡∏≥ 30%:</span>
            <span class="summary-value">${data.depositAmount.toLocaleString()} ‡∏ö‡∏≤‡∏ó</span>
          </div>
          <div class="summary-row">
            <span class="summary-label">üí∏ ‡∏Ñ‡πà‡∏≤‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠:</span>
            <span class="summary-value">${data.remainingAmount.toLocaleString()} ‡∏ö‡∏≤‡∏ó</span>
          </div>
          <div class="summary-row">
            <span class="summary-label">üí∞ ‡∏ï‡πâ‡∏≠‡∏á‡∏ä‡∏≥‡∏£‡∏∞‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ:</span>
            <span class="summary-value" style="color: #22c55e; font-size: 1.3em;">${data.depositAmount.toLocaleString()} ‡∏ö‡∏≤‡∏ó</span>
          </div>
        </div>

        <div class="deposit-highlight">
          <p><strong>üì± ‡∏™‡πÅ‡∏Å‡∏ô QR Code ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡∏≥‡∏£‡∏∞‡∏Ñ‡πà‡∏≤‡∏°‡∏±‡∏î‡∏à‡∏≥</strong></p>
          <p style="font-size: 0.95em; color: #16a34a; margin-top: 5px;">
            ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏û‡∏µ‡∏¢‡∏á ${data.depositAmount.toLocaleString()} ‡∏ö‡∏≤‡∏ó ‡∏Ñ‡πà‡∏≤‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏à‡πà‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏ô‡∏≤‡∏°
          </p>
        </div>

        <div class="qr-code-container">
          <div class="qr-code-image">
            <img id="qrCodeCanvas" src="qr-promptpay.png" alt="QR Code PromptPay" 
                style="width: 100%; height: 100%; object-fit: contain;"
                onerror="handleQRError(this)">
          </div>
        </div>
        
        <div class="payment-info">
          <p><strong>üí∞ ‡∏¢‡∏≠‡∏î‡∏ä‡∏≥‡∏£‡∏∞:</strong> ${data.depositAmount.toLocaleString()} ‡∏ö‡∏≤‡∏ó</p>
          <p><strong>üì± ‡πÄ‡∏•‡∏Ç‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏û‡∏¢‡πå:</strong> 1103100835163</p>
          <p><strong>üè¢ ‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ç‡∏ä‡∏µ:</strong> ‡∏ô‡∏≤‡∏¢ ‡∏û‡∏±‡∏™‡∏Å‡∏£ ‡∏£‡∏≤‡∏ä‡∏ä‡∏°‡∏†‡∏π</p>
          <p><strong>üÜî Ref:</strong> ${data.field.replace('‡∏™‡∏ô‡∏≤‡∏° ', 'F')}-${data.date.replace(/-/g, '')}</p>
        </div>

        <div class="upload-section">
          <label class="upload-label">üì§ ‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏•‡∏¥‡∏õ‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</label>
          <div class="upload-area" id="uploadArea" onclick="document.getElementById('slipInput').click()">
            <p>üìé ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏™‡∏•‡∏¥‡∏õ</p>
            <p style="font-size: 0.9em; color: #6b7280; margin-top: 10px;">
              ‡∏´‡∏£‡∏∑‡∏≠‡∏•‡∏≤‡∏Å‡πÑ‡∏ü‡∏•‡πå‡∏°‡∏≤‡∏ß‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà<br>
              ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö: JPG, PNG (‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏î‡∏µ‡∏¢‡∏ß)
            </p>
          </div>
          <input type="file" id="slipInput" accept="image/*" style="display: none;" onchange="handleSlipUpload(event)">
          <img id="slipPreview" style="display: none;">
        </div>

        <div class="payment-terms">
          <h4>‚ö†Ô∏è ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏°‡∏±‡∏î‡∏à‡∏≥</h4>
          <ul>
            <li>‚úÖ ‡∏°‡∏≤‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏±‡∏î: ‡∏Ñ‡∏∑‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏°‡∏±‡∏î‡∏à‡∏≥ ${data.depositAmount.toLocaleString()} ‡∏ö‡∏≤‡∏ó ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</li>
            <li>‚ùå ‡πÑ‡∏°‡πà‡∏°‡∏≤‡∏ï‡∏≤‡∏°‡∏ô‡∏±‡∏î: ‡∏£‡∏¥‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏°‡∏±‡∏î‡∏à‡∏≥‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</li>
            <li>üìå ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏°‡∏≤‡∏ñ‡∏∂‡∏á‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏ß‡∏•‡∏≤ 15 ‡∏ô‡∏≤‡∏ó‡∏µ</li>
          </ul>
        </div>

        <div class="payment-buttons">
          <button class="cancel-payment-btn" onclick="closePaymentModal()">‚ùå ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
          <button class="upload-slip-btn" id="confirmPaymentBtn" disabled onclick="submitPayment()">
            ‚¨ÜÔ∏è ‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏•‡∏¥‡∏õ
          </button>
        </div>

        <div class="timer-warning" id="paymentTimer">
          ‚è∞ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ä‡∏≥‡∏£‡∏∞‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 15 ‡∏ô‡∏≤‡∏ó‡∏µ
        </div>
      </div>
    </div>
  `;

  document.body.insertAdjacentHTML('beforeend', modalHTML);
  generateQRCode(data);
  startPaymentTimer();
  setupDragDrop();
}

function generateQRCode(data) { 
  console.log('‚úÖ QR Code loaded for deposit:', data.depositAmount, '‡∏ö‡∏≤‡∏ó');
}

function handleQRError(img) {
  img.style.display = 'none';
  const container = img.parentElement;
  container.innerHTML = `
    <div style="padding: 20px; text-align: center; color: #ef4444;">
      <p style="font-size: 1.2em; margin-bottom: 10px;">‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏û‡∏ö QR Code</p>
      <p style="font-size: 0.9em; color: #6b7280;">
        ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏õ‡∏ó‡∏µ‡πà:<br>
        <strong style="color: #1f2937;">‡πÄ‡∏•‡∏Ç‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏û‡∏¢‡πå: 1103100835163</strong><br>
        <strong style="color: #1f2937;">‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ç‡∏ä‡∏µ: ‡∏ô‡∏≤‡∏¢ ‡∏û‡∏±‡∏™‡∏Å‡∏£ ‡∏£‡∏≤‡∏ä‡∏ä‡∏°‡∏†‡∏π</strong>
      </p>
    </div>
  `;
  console.error('QR Code image not found: qr-promptpay.png');
}

function handleSlipUpload(event) {
  const file = event.target.files[0];
  
  if (!file) return;
  
  const validTypes = ['image/jpeg', 'image/jpg', 'image/png'];
  if (!validTypes.includes(file.type)) {
    alert('‚ùå ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå‡∏†‡∏≤‡∏û‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô (JPG, PNG)');
    event.target.value = '';
    return;
  }
  
  if (file.size > MAX_FILE_SIZE_BYTES) {
    alert('‚ùå ‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏ç‡πà‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ! ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå‡∏Ç‡∏ô‡∏≤‡∏î‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô ' + MAX_FILE_SIZE_MB + ' MB\n' + 
          '‡∏Ç‡∏ô‡∏≤‡∏î‡πÑ‡∏ü‡∏•‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì: ' + (file.size / 1024 / 1024).toFixed(2) + ' MB');
    event.target.value = '';
    return;
  }
  
  uploadedSlipFile = file;
  const reader = new FileReader();
  reader.onload = function(e) {
    const preview = document.getElementById('slipPreview');
    preview.src = e.target.result;
    preview.style.display = 'block';
    document.getElementById('confirmPaymentBtn').disabled = false;
  };
  reader.readAsDataURL(file);
}

function setupDragDrop() {
  const uploadArea = document.getElementById('uploadArea');
  
  const handleDragOver = (e) => {
    e.preventDefault();
    uploadArea.classList.add('dragover');
  };
  
  const handleDragLeave = () => {
    uploadArea.classList.remove('dragover');
  };
  
  const handleDrop = (e) => {
    e.preventDefault();
    uploadArea.classList.remove('dragover');
    
    const file = e.dataTransfer.files[0];
    if (file && file.type.startsWith('image/')) {
      const input = document.getElementById('slipInput');
      const dataTransfer = new DataTransfer();
      dataTransfer.items.add(file);
      input.files = dataTransfer.files;
      handleSlipUpload({ target: input });
    }
  };
  
  uploadArea.addEventListener('dragover', handleDragOver);
  uploadArea.addEventListener('dragleave', handleDragLeave);
  uploadArea.addEventListener('drop', handleDrop);
  
  uploadArea._dragHandlers = { handleDragOver, handleDragLeave, handleDrop };
}

function startPaymentTimer() {
  let timeLeft = PAYMENT_TIMEOUT_MINUTES * 60;
  const timerDiv = document.getElementById('paymentTimer');
  
  paymentTimer = setInterval(() => {
    timeLeft--;
    const minutes = Math.floor(timeLeft / 60);
    const seconds = timeLeft % 60;
    
    timerDiv.textContent = `‚è∞ ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏ß‡∏•‡∏≤ ${minutes}:${seconds.toString().padStart(2, '0')} ‡∏ô‡∏≤‡∏ó‡∏µ`;
    
    if (timeLeft <= 0) {
      clearInterval(paymentTimer);
      alert('‚ùå ‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á');
      closePaymentModal();
    }
  }, 1000);
}

function closePaymentModal() {
  clearInterval(paymentTimer);
  cleanupBookingLock();
  
  const uploadArea = document.getElementById('uploadArea');
  if (uploadArea && uploadArea._dragHandlers) {
    uploadArea.removeEventListener('dragover', uploadArea._dragHandlers.handleDragOver);
    uploadArea.removeEventListener('dragleave', uploadArea._dragHandlers.handleDragLeave);
    uploadArea.removeEventListener('drop', uploadArea._dragHandlers.handleDrop);
  }

  const modal = document.getElementById('paymentModal');
  if (modal) modal.remove();
  
  currentBookingData = null;
  uploadedSlipFile = null;
}

function cleanupBookingLock() {
  if (currentBookingData) {
    const uniqueKey = `${currentBookingData.field}_${currentBookingData.date}_${currentBookingData.time}`;
    database.ref('booking_locks/' + uniqueKey).remove();
  }
}

window.addEventListener('beforeunload', () => {
  cleanupBookingLock();
});

function submitPayment() {
  if (!uploadedSlipFile) {
    alert('‚ùå ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏•‡∏¥‡∏õ‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô');
    return;
  }

  const btn = document.getElementById('confirmPaymentBtn');
  btn.disabled = true;
  btn.innerHTML = '‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î... <span class="spinner"></span>';
  
  uploadSlipAndCreateBooking();
}

function uploadSlipAndCreateBooking() {
  const data = currentBookingData;
  const reader = new FileReader();
  
  reader.onload = function(e) {
    const slipBase64 = e.target.result;
    
    const bookingRef = database.ref('bookings').push();
    const uniqueKey = `${data.field}_${data.date}_${data.time}`;

    const bookingData = {
      userId: currentUser.uid,
      username: currentUser.fullname,
      phone: currentUser.phone,
      field: data.field,
      date: data.date,
      time: data.time,
      totalPrice: data.totalPrice,
      depositAmount: data.depositAmount,
      remainingAmount: data.remainingAmount,
      depositStatus: 'pending',
      depositSlipUrl: slipBase64,
      depositPaidAt: new Date().toISOString(),
      remainingStatus: 'unpaid',
      remainingPaidAt: null,
      bookingStatus: 'pending_payment',
      checkedInAt: null,
      completedAt: null,
      depositRefunded: false,
      depositRefundedAt: null,
      depositForfeited: false,
      depositForfeitedAt: null,
      field_date_time: uniqueKey,
      createdAt: new Date().toISOString()
    };

    database.ref('booking_locks/' + uniqueKey).transaction((currentData) => {
      if (currentData === null) {
        return { locked: true, timestamp: Date.now() };
      } else {
        return undefined;
      }
    }, (error, committed, snapshot) => {
      if (error) {
        alert('‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ' + error.message);
        document.getElementById('confirmPaymentBtn').disabled = false;
        document.getElementById('confirmPaymentBtn').textContent = '‚¨ÜÔ∏è ‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏•‡∏¥‡∏õ';
      } else if (!committed) {
        alert('‚ùå ‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏µ‡πâ‡∏ñ‡∏π‡∏Å‡∏à‡∏≠‡∏á‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏∑‡πà‡∏ô');
        closePaymentModal();
        checkAvailability();
      } else {
        bookingRef.set(bookingData)
          .then(() => {
            clearInterval(paymentTimer);
            
            alert(`‚úÖ ‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏•‡∏¥‡∏õ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!

üìã ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á: #${bookingRef.key.substr(-6).toUpperCase()}

‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 5 ‡∏ô‡∏≤‡∏ó‡∏µ
‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ú‡πà‡∏≤‡∏ô SMS

üìç ‡∏™‡∏ô‡∏≤‡∏°: ${data.field}
üìÖ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: ${data.date}
‚è∞ ‡πÄ‡∏ß‡∏•‡∏≤: ${data.time}
üí∞ ‡∏°‡∏±‡∏î‡∏à‡∏≥: ${data.depositAmount.toLocaleString()} ‡∏ö‡∏≤‡∏ó ‚úÖ
üí∏ ‡∏Ñ‡πà‡∏≤‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠: ${data.remainingAmount.toLocaleString()} ‡∏ö‡∏≤‡∏ó

‚ö†Ô∏è ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏°‡∏≤‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏±‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏°‡∏±‡∏î‡∏à‡∏≥‡∏Ñ‡∏∑‡∏ô`);
          
            closePaymentModal();
            resetBookingForm();
            document.location.href = '#checkBookingSection';
            updateBookingList();
          })
          .catch((error) => {
            database.ref('booking_locks/' + uniqueKey).remove();
            alert('‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ' + error.message);
            document.getElementById('confirmPaymentBtn').disabled = false;
            document.getElementById('confirmPaymentBtn').textContent = '‚¨ÜÔ∏è ‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏•‡∏¥‡∏õ';
          });
      }
    });
  };

  reader.readAsDataURL(uploadedSlipFile);
}
function updateBookingList() {
  console.log('üîÑ Updating booking list...');
  
  const user = auth.currentUser;
  if (!user) {
    console.log('‚ùå No user logged in');
    return;
  }

  const bookingListDiv = document.getElementById('bookingList');
  if (!bookingListDiv) {
    console.log('‚ùå bookingList element not found');
    return;
  }

  bookingListDiv.innerHTML = '<p style="text-align: center; color: #666;">‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</p>';

  database.ref('bookings')
    .orderByChild('userId')
    .equalTo(user.uid)
    .once('value')
    .then((snapshot) => {
      console.log('üìä Snapshot exists:', snapshot.exists());
      
      if (!snapshot.exists()) {
        bookingListDiv.innerHTML = '<p style="text-align: center; color: #666;">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</p>';
        return;
      }

      const bookings = [];
      snapshot.forEach((childSnapshot) => {
        const booking = childSnapshot.val();
        booking.id = childSnapshot.key;
        bookings.push(booking);
      });

      console.log('üìã Total bookings:', bookings.length);

      // ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏°‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
      bookings.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));

      // ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
      bookingListDiv.innerHTML = bookings.map(booking => {
        return generateBookingCard(booking);
      }).join('');
    })
    .catch((error) => {
      console.error('‚ùå Error loading bookings:', error);
      bookingListDiv.innerHTML = '<p style="text-align: center; color: red;">‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</p>';
    });
}
function updateBookingList() {
  const bookingList = document.getElementById("bookingList");

  if (!currentUser) {
    bookingList.innerHTML = '<p style="text-align: center; color: #6b7280; padding: 40px;">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</p>';
    return;
  }

  bookingList.innerHTML = `
    <div style="text-align: center; padding: 40px;">
      <div class="spinner" style="width: 40px; height: 40px; margin: 0 auto 20px; border: 4px solid #e5e7eb; border-top-color: #22c55e;"></div>
      <p style="color: #6b7280;">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á...</p>
    </div>
  `;

  database.ref('bookings')
    .orderByChild('userId')
    .equalTo(currentUser.uid)
    .once('value')
    .then((snapshot) => {
      if (!snapshot.exists()) {
        bookingList.innerHTML = '<p style="text-align: center; color: #6b7280; padding: 40px;">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</p>';
        return;
      }

      let html = "";
      let index = 0;
      snapshot.forEach((child) => {
        const booking = child.val();
        const bookingId = child.key;
        
        let statusColor = '#22c55e';
        let statusText = '‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö';
      
        if (booking.bookingStatus === 'confirmed') {
          statusColor = '#3b82f6';
          statusText = '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß';
        } else if (booking.bookingStatus === 'completed') {
          statusColor = '#10b981';
          statusText = '‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô';
        } else if (booking.bookingStatus === 'no_show') {
          statusColor = '#ef4444';
          statusText = '‡πÑ‡∏°‡πà‡∏°‡∏≤‡∏ï‡∏≤‡∏°‡∏ô‡∏±‡∏î';
        } else if (booking.bookingStatus === 'cancelled') {
          statusColor = '#6b7280';
          statusText = '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å';
        }

        html += `
          <div class="booking-card" style="border-left-color: ${statusColor}">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
              <h3 style="margin: 0; flex: 1; text-align: center;">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà ${index + 1}</h3>
              <span style="background: ${statusColor}; color: white; padding: 6px 14px; border-radius: 12px; font-size: 0.9em; font-weight: bold; white-space: nowrap;">
                ${statusText}
              </span>
            </div>
            
            <p><strong>üìç ‡∏™‡∏ô‡∏≤‡∏°:</strong> <span>${booking.field}</span></p>
            <p><strong>üìÖ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:</strong> <span>${booking.date}</span></p>
            <p><strong>‚è∞ ‡πÄ‡∏ß‡∏•‡∏≤:</strong> <span>${booking.time}</span></p>
            
            <div style="background: #f3f4f6; padding: 15px; border-radius: 10px; margin: 15px 0;">
              <p><strong>üí∞ ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î:</strong> <span>${booking.totalPrice ? booking.totalPrice.toLocaleString() : 'N/A'} ‡∏ö‡∏≤‡∏ó</span></p>
              <p><strong>üíµ ‡∏°‡∏±‡∏î‡∏à‡∏≥ 30%:</strong> 
                <span style="color: ${booking.depositStatus === 'pending' ? '#f59e0b' : '#10b981'};">
                  ${booking.depositAmount ? booking.depositAmount.toLocaleString() : 'N/A'} ‡∏ö‡∏≤‡∏ó 
                  ${booking.depositStatus === 'pending' ? 'üü°' : '‚úÖ'}
                </span>
              </p>
              <p><strong>üí∏ ‡∏Ñ‡πà‡∏≤‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠:</strong> <span>${booking.remainingAmount ? booking.remainingAmount.toLocaleString() : 'N/A'} ‡∏ö‡∏≤‡∏ó</span></p>
            </div>
            
            ${booking.depositRefunded ? '<p style="color: #10b981; font-weight: bold; text-align: center;">‚úÖ ‡∏Ñ‡∏∑‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏°‡∏±‡∏î‡∏à‡∏≥‡πÅ‡∏•‡πâ‡∏ß</p>' : ''}
            ${booking.depositForfeited ? '<p style="color: #ef4444; font-weight: bold; text-align: center;">‚ùå ‡∏£‡∏¥‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏°‡∏±‡∏î‡∏à‡∏≥‡πÅ‡∏•‡πâ‡∏ß</p>' : ''}
            
            <p><strong>üìû ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠:</strong> <span>${booking.phone}</span></p>
            <p style="color: #6b7280; font-size: 0.9em; margin-top: 10px; text-align: center;">
              ‡∏à‡∏≠‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠: ${new Date(booking.createdAt).toLocaleString('th-TH')}
            </p>
            
            ${booking.bookingStatus === 'pending_payment' || booking.bookingStatus === 'confirmed' ? `
             <button class="cancel-btn" onclick="cancelBooking('${bookingId}')" id="cancel-btn-${bookingId}">
  ‚ùå ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
</button>
            ` : ''}
          </div>
        `;
        
        index++;
      });

      bookingList.innerHTML = html;
      console.log(`‚úÖ Loaded ${index} bookings`);
    })
    .catch((error) => {
      console.error("‚ùå Error loading bookings:", error);
      bookingList.innerHTML = `
        <div style="text-align: center; padding: 40px;">
          <p style="color: #ef4444; margin-bottom: 15px;">‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</p>
          <p style="color: #6b7280; font-size: 0.9em; margin-bottom: 20px;">${error.message}</p>
          <button onclick="updateBookingList()" style="padding: 12px 24px; background: #22c55e; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold;">
            üîÑ ‡∏•‡∏≠‡∏á‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á
          </button>
        </div>
      `;
    });
}

function cancelBooking(bookingId) {
  if (!confirm("‚ö†Ô∏è ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?\n\n‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏±‡∏ô‡∏ó‡∏µ")) {
    return;
  }

  console.log('üóëÔ∏è Starting to cancel booking:', bookingId);
  
  const bookingRef = database.ref('bookings/' + bookingId);
  
  // ‡πÅ‡∏™‡∏î‡∏á loading
  const originalButtonText = event.target.textContent;
  event.target.textContent = '‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å...';
  event.target.disabled = true;
  
  bookingRef.once('value')
    .then((snapshot) => {
      const booking = snapshot.val();
      
      console.log('üìã Booking data:', booking);
      
      if (!booking) {
        throw new Error('‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á');
      }
      
      // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
      const currentUser = auth.currentUser;
      if (!currentUser) {
        throw new Error('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤ Login ‡∏Å‡πà‡∏≠‡∏ô‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á');
      }
      
      if (booking.userId !== currentUser.uid) {
        throw new Error('‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏ô‡∏µ‡πâ');
      }
      
      const uniqueKey = `${booking.field}_${booking.date}_${booking.time}`;
      console.log('üîë Lock key:', uniqueKey);
      
      // ‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
      return Promise.all([
        database.ref('bookings/' + bookingId).remove(),
        database.ref('booking_locks/' + uniqueKey).remove()
      ]);
    })
    .then(() => {
      console.log('‚úÖ Booking cancelled successfully');
      alert("‚úÖ ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß\n\n‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏•‡πâ‡∏ß");
      
      // ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
      updateBookingList();
    })
    .catch((error) => {
      console.error('‚ùå Cancel booking error:', error);
      alert("‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: " + error.message);
      
      // ‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏î‡∏¥‡∏°
      if (event && event.target) {
        event.target.textContent = originalButtonText;
        event.target.disabled = false;
      }
    });
}

// ========================================
// iNITIALIZATION
// ========================================
document.addEventListener("DOMContentLoaded", () => {
  console.log('üéØ DOM ready - initializing...');
// ========================================
// HAMBURGER MENU
document.getElementById('hamburgerBtn').addEventListener('click', toggleMobileMenu);
// ========================================
// TIME SLOTS
  initializeTimeSlots();
  console.log('‚úÖ Time slots initialized');
// ========================================
// Desktop Nav
  document.querySelectorAll('#desktopNav .nav-item').forEach(item => {
    item.addEventListener('click', () => {
      navigateToSection(item.getAttribute('data-section'));
    });
  });
  
  // Mobile Nav
  document.querySelectorAll('#mobileNav .nav-item').forEach(item => {
    item.addEventListener('click', () => {
      navigateToSection(item.getAttribute('data-section'));
    });
  });
  // Login/Logout
  document.getElementById('loginNavBtn').addEventListener('click', openLoginModal);
  document.getElementById('logoutBtn').addEventListener('click', handleLogout);
  
  // Close overlay on background click
  document.getElementById('menuOverlay').addEventListener('click', (e) => {
    if (e.target.id === 'menuOverlay') toggleMobileMenu();
  });
  
  // Close modal on background click
  document.getElementById('loginModal').addEventListener('click', (e) => {
    if (e.target.id === 'loginModal') closeLoginModal();
  });
  
  // ESC key
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      closeLoginModal();
      if (document.getElementById('menuOverlay').classList.contains('active')) {
        toggleMobileMenu();
      }
    }
  });

// ========================================
// window RESIZE HANDLER
window.addEventListener('resize', () => {
    if (window.innerWidth > 768) {
      document.getElementById('menuOverlay').classList.remove('active');
      document.getElementById('hamburgerBtn').classList.remove('active');
      document.body.style.overflow = '';
    }
  });
   });


// ========================================
// FIREBASE INITIALIZATION
// ========================================
let firebaseInitRetryCount = 0;
const MAX_FIREBASE_RETRIES = 50;

function initializeFirebase() {
  firebaseInitRetryCount++;
  if (window.firebaseLoadError) {
    console.error('‚ùå Firebase scripts failed to load (network error)');
    alert('‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î Firebase scripts ‡πÑ‡∏î‡πâ\n\n‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏õ‡πÑ‡∏î‡πâ:\n- Network ‡πÑ‡∏°‡πà‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£\n- Firewall ‡∏ö‡∏•‡πá‡∏≠‡∏Å www.gstatic.com\n- ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏õ‡∏¥‡∏î Console (F12) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î');
    return;
  }
  
  if (typeof firebase === 'undefined') {
    if (firebaseInitRetryCount > MAX_FIREBASE_RETRIES) {
      console.error('‚ùå Firebase scripts failed to load after ' + (MAX_FIREBASE_RETRIES * 100 / 1000) + ' seconds');
      alert('‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Firebase ‡πÑ‡∏î‡πâ\n\n‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö:\n- ‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡∏≠‡∏¥‡∏ô‡πÄ‡∏ó‡∏≠‡∏£‡πå‡πÄ‡∏ô‡πá‡∏ï\n- Firewall/Proxy settings\n- Browser console (F12) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î');
      return;
    }
    
    if (firebaseInitRetryCount === 1 || firebaseInitRetryCount % 10 === 0) {
      console.log('‚è≥ Waiting for Firebase scripts... (' + firebaseInitRetryCount + '/' + MAX_FIREBASE_RETRIES + ')');
    }
    setTimeout(initializeFirebase, 100);
    return;
  }

  try {
    const firebaseConfig = {
      apiKey: "AIzaSyB6jVc8qcyS9zIJvfi-E1BL7BaxrUorO7w",
      authDomain: "prijit-sport.firebaseapp.com",
      databaseURL: "https://prijit-sport-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "prijit-sport",
      storageBucket: "prijit-sport.firebasestorage.app",
      messagingSenderId: "19782245186",
      appId: "1:19782245186:web:8ff3e2e17a214edc3546db"
    };

    firebase.initializeApp(firebaseConfig);
    auth = firebase.auth();
    database = firebase.database();
    console.log("‚úÖ Firebase ready! (loaded in " + (firebaseInitRetryCount * 100) + "ms)");
    
    auth.onAuthStateChanged((user) => {
      if (user) {
        database.ref('users/' + user.uid).once('value')
          .then((snapshot) => {
            currentUser = {
              uid: user.uid,
              ...snapshot.val()
            };
            
            document.getElementById("currentUser").textContent = currentUser.fullname;
            document.getElementById("loginNavBtn").style.display = "none";
            document.getElementById("userInfo").style.display = "flex";
            
            updateBookingList();
            console.log("‚úÖ Session restored:", currentUser.fullname);
          })
          .catch((error) => {
            console.error("‚ùå Failed to load user:", error);
          });
      } else {
        currentUser = null;
        document.getElementById("loginNavBtn").style.display = "inline-block";
        document.getElementById("userInfo").style.display = "none";
      }
    });
    
  } catch (error) {
    console.error("‚ùå Firebase initialization failed:", error);
    alert("‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏î‡πâ\n\nError: " + error.message);
  }
}

initializeFirebase();
    </script>
  </body>
</html>