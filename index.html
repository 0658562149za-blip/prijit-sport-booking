<!DOCTYPE html>
<html lang="th">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="google-site-verification" content="bR1mEsXKVvOw49DkWfjDAmJHnfmsgKIcgD6kVuu1stI" />
    <title>‡∏à‡∏≠‡∏á‡∏™‡∏ô‡∏≤‡∏°‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏• PRIJIT SPORT - ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏≠‡∏á‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå 24 ‡∏ä‡∏°.</title>
    <meta name="description" content="‡∏à‡∏≠‡∏á‡∏™‡∏ô‡∏≤‡∏°‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏• 7 ‡∏Ñ‡∏ô PRIJIT SPORT ‡∏°‡∏µ 6 ‡∏™‡∏ô‡∏≤‡∏° ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ñ‡∏π‡∏Å ‡∏à‡∏≠‡∏á‡∏á‡πà‡∏≤‡∏¢ ‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå‡∏ï‡∏•‡∏≠‡∏î 24 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏ó‡∏±‡∏ô‡∏™‡∏°‡∏±‡∏¢">
    <meta name="keywords" content="‡∏à‡∏≠‡∏á‡∏™‡∏ô‡∏≤‡∏°‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏•, ‡∏™‡∏ô‡∏≤‡∏°‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏• 7 ‡∏Ñ‡∏ô, ‡∏™‡∏ô‡∏≤‡∏°‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏•, PRIJIT SPORT, ‡∏à‡∏≠‡∏á‡∏™‡∏ô‡∏≤‡∏°, ‡∏™‡∏ô‡∏≤‡∏°‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏•‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå, ‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏•">
    <meta name="author" content="PRIJIT SPORT">
    <meta name="robots" content="index, follow">
    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="‡∏à‡∏≠‡∏á‡∏™‡∏ô‡∏≤‡∏°‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏• PRIJIT SPORT">
    <meta property="og:description" content="‡∏à‡∏≠‡∏á‡∏™‡∏ô‡∏≤‡∏°‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏• 7 ‡∏Ñ‡∏ô ‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå 24 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á ‡∏°‡∏µ 6 ‡∏™‡∏ô‡∏≤‡∏° ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ñ‡∏π‡∏Å ‡∏à‡∏≠‡∏á‡∏á‡πà‡∏≤‡∏¢">
    <meta property="og:image" content="https://prijit-sport.github.io/prijit-sport-booking/f4.jpg">
    <meta property="og:url" content="https://prijit-sport.github.io/prijit-sport-booking/">
    <meta property="og:site_name" content="PRIJIT SPORT">
    <meta property="og:locale" content="th_TH">

    <!-- Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SportsActivityLocation",
      "name": "PRIJIT SPORT",
      "description": "‡∏™‡∏ô‡∏≤‡∏°‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏• 7 ‡∏Ñ‡∏ô ‡∏à‡∏≠‡∏á‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå 24 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á ‡∏°‡∏µ 6 ‡∏™‡∏ô‡∏≤‡∏°",
      "url": "https://prijit-sport.github.io/prijit-sport-booking/",
      "image": "https://prijit-sport.github.io/prijit-sport-booking/f4.jpg",
      "address": {
        "@type": "PostalAddress",
        "addressLocality": "‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏°‡∏´‡∏≤‡∏ô‡∏Ñ‡∏£",
        "addressCountry": "TH"
      },
      "priceRange": "$$"
    }
    </script>
    
    <!-- Favicon -->
    <meta http-equiv="Permissions-Policy" content="interest-cohort=()">
    <link rel="icon" type="image/jpeg" href="f6.jpg">
    
    <style>
      input.error,
select.error,
textarea.error {
  border: 2px solid #ef4444 !important;
  animation: shake 0.3s;
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-5px); }
  75% { transform: translateX(5px); }
}

      #toast-container {
  position: fixed;
  bottom: 20px;
  right: 20px;
  z-index: 10000;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.toast {
  min-width: 280px;
  max-width: 400px;
  padding: 16px 20px;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  display: flex;
  align-items: center;
  gap: 12px;
  transform: translateX(450px);
  opacity: 0;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  font-size: 15px;
  font-weight: 500;
}

.toast.show {
  transform: translateX(0);
  opacity: 1;
}

.toast-success {
  background: linear-gradient(135deg, #22c55e, #16a34a);
  color: white;
}

.toast-error {
  background: linear-gradient(135deg, #ef4444, #dc2626);
  color: white;
}

.toast-warning {
  background: linear-gradient(135deg, #f59e0b, #d97706);
  color: white;
}

.toast-info {
  background: linear-gradient(135deg, #3b82f6, #2563eb);
  color: white;
}

.toast-icon {
  font-size: 24px;
  flex-shrink: 0;
}

.toast-close {
  margin-left: auto;
  background: none;
  border: none;
  color: white;
  font-size: 20px;
  cursor: pointer;
  padding: 0;
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0.7;
  transition: opacity 0.2s;
}

.toast-close:hover {
  opacity: 1;
}

/* Mobile responsive */
@media (max-width: 768px) {
  #toast-container {
    right: 10px;
    left: 10px;
    bottom: 10px;
  }
  
  .toast {
    min-width: auto;
    max-width: none;
  }
}

  @media (max-width: 360px) {
    #toast-container {
      right: 8px;
      left: 8px;
      bottom: 8px;
    }
    
    .toast {
      min-width: 0;
      width: 100%;
      padding: 12px 15px;
      font-size: 14px;
    }
  }
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      html {
        scroll-behavior: smooth;
        overflow-x: hidden;
        max-width: 100vw;
      }
      section {
        scroll-margin-top: 80px;
        max-width: 100vw;
        overflow-x: hidden;
      }
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background-image: linear-gradient(
            rgba(243, 244, 246, 0.3),
            rgba(243, 244, 246, 0.3)
          ),
          url("f4.jpg");
        background-size: cover;
        background-position: center;
        background-attachment: fixed;
        background-repeat: no-repeat;
        line-height: 1.6;
        overflow-x: hidden;
        max-width: 100vw;
      }
      /* Global Loading Overlay */  
#global-loading {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 10001;
  display: none;
}

#global-loading.active {
  display: block;
}

.loading-overlay {
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.7);
  backdrop-filter: blur(4px);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 20px;
  animation: fadeIn 0.2s ease;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.spinner {
  width: 60px;
  height: 60px;
  border: 4px solid rgba(255, 255, 255, 0.2);
  border-top-color: #22c55e;
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

.loading-text {
  color: white;
  font-size: 16px;
  font-weight: 600;
  margin: 0;
  text-align: center;
  animation: pulse 1.5s ease-in-out infinite;
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

/* Inline Loading (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°) */
.btn-loading {
  position: relative;
  pointer-events: none;
  opacity: 0.7;
}

.btn-loading::after {
  content: '';
  position: absolute;
  width: 16px;
  height: 16px;
  top: 50%;
  left: 50%;
  margin-left: -8px;
  margin-top: -8px;
  border: 2px solid white;
  border-top-color: transparent;
  border-radius: 50%;
  animation: spin 0.6s linear infinite;
}
      /* Navigation Bar */
  .navbar {
    width: 105%;
    padding: 15px 0;
   position: sticky;
    top: 0;
    z-index: 1002;
  }
    .nav-container {
      max-width: 1240px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px;
    }
    .nav-links {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
    }
    .nav-item {
      color:  #fffefe;
      font-weight: bold;
      font-size: 1em;
      padding: 10px 20px;
      border-radius: 50px;
      cursor: pointer;
      background:  #000000;
      border: 3px solid #d6d301;
      font-family: inherit;
      transition: background 0.2s ease;
      -webkit-tap-highlight-color: transparent;
      user-select: none;
    }
      /* Hover ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ Desktop */
      @media (hover: hover) and (pointer: fine) {
        .nav-item:hover {
          background: rgb(17, 207, 10);
        }
      .logout-btn:hover {
          background:  rgb(199, 6, 6) !important;
        }
        
     .login-btn:hover {
          background:  rgb(17, 207, 10) !important;
        }
      }

      .user-section {
        color: rgb(255, 255, 255);
        font-weight: bold;
        display: flex;
        align-items: center;
        gap: 5px;
      }

      .logout-btn {
        background: #4b4b4b !important;
        border: 2px solid rgb(252, 255, 54) !important;
        padding: 5px 10px;
        border-radius: 25px;
        cursor: pointer;
      }

      .login-btn {
      background: #4b4b4b !important;
      color: #ffffff !important;
      font-weight: bold;
      border: 2px solid  rgb(252, 255, 54) !important;
      padding: 5px 10px;
      border-radius: 25px;
      cursor: pointer;
    }

      /* Hamburger Menu */
    .hamburger {
      display: none;
      width: 44px;
      height: 44px;
      background: rgba(255,255,255,0.0);
      border: 2px solid rgba(255,255,255,0.0);
      border-radius: 10px;
      cursor: pointer;
      position: relative;
      
    }
    .hamburger span {
      display: block;
      width: 24px;
      height: 2.5px;
      background: rgb(0, 0, 0);
      border-radius: 3px;
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      transition: all 0.3s ease;
    }
    .hamburger span:nth-child(1) { top: 12px; }
    .hamburger span:nth-child(2) { top: 20px; }
    .hamburger span:nth-child(3) { top: 28px; }
    .hamburger.active span:nth-child(1) {
      top: 20px;
      transform: translateX(-50%) rotate(45deg);
    }
    .hamburger.active span:nth-child(2) { opacity: 0; }
    .hamburger.active span:nth-child(3) {
      top: 20px;
      transform: translateX(-50%) rotate(-45deg);
    }

      /* Menu Overlay */
  .menu-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, rgba(45, 235, 39, 0.98), rgba(12, 77, 6, 0.98));
      backdrop-filter: blur(20px);
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }
    .menu-overlay.active {
      opacity: 1;
      visibility: visible;
    }
    .menu-overlay .nav-links {
      flex-direction: column;
      align-items: center;
      gap: 0;
    }
    .menu-overlay .nav-item {
      padding: 10px 15px;
      margin: 8px 0;
      border-radius: 15px;
      font-size: 1.2em;
      background: rgb(0, 0, 0);
      backdrop-filter: blur(10px);
      border: 2px solid #d6d301;
      min-width: 280px;
      text-align: center;
      opacity: 0;
      transform: translateY(20px);
      
      /* üîß FIX: ‡πÄ‡∏û‡∏¥‡πà‡∏° will-change ‡πÄ‡∏û‡∏∑‡πà‡∏≠ update clickable area */
      will-change: transform, opacity;
      transform-style: preserve-3d;
      backface-visibility: hidden;
      -webkit-transform-style: preserve-3d;
      -webkit-backface-visibility: hidden;
    }

    /* üîß FIX: Responsive ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ */
    @media (max-width: 360px) {
      .menu-overlay .nav-item {
        min-width: calc(100vw - 40px);
        max-width: calc(100vw - 40px);
        margin: 6px auto;
      }
    }
    
    @media (min-width: 361px) and (max-width: 480px) {
      .menu-overlay .nav-item {
        min-width: calc(100vw - 60px);
        max-width: 320px;
        margin: 6px auto;
      }
    }
    .menu-overlay.active .nav-item {
      animation: slideIn 0.4s ease forwards;
      pointer-events: auto !important; /* üîß FIX: ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÉ‡∏´‡πâ clickable */
    }
    .menu-overlay.active .nav-item:nth-child(1) { animation-delay: 0.1s; }
    .menu-overlay.active .nav-item:nth-child(2) { animation-delay: 0.15s; }
    .menu-overlay.active .nav-item:nth-child(3) { animation-delay: 0.2s; }
    .menu-overlay.active .nav-item:nth-child(4) { animation-delay: 0.25s; }
    .menu-overlay.active .nav-item:nth-child(5) { animation-delay: 0.3s; }
    .menu-overlay.active .nav-item:nth-child(6) { animation-delay: 0.35s; }
    .menu-overlay.active .nav-item:nth-child(7) { animation-delay: 0.4s; }
    @keyframes slideIn {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    .menu-overlay .nav-item:active {
      transform: scale(0.95);
      background: rgb(46, 196, 0);
    }


      /* Modal */
        .modal-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.7);
      z-index: 2000;
      justify-content: center;
      align-items: center;
    }
    .modal-overlay.active { display: flex; }
    .auth-modal {
      background: rgb(255, 255, 255);
      border-radius: 20px;
      padding: 50px;
      max-width: 450px;
      width: 90%;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      max-height: 90vh;
      overflow-y: auto;
      position: relative;
    }
    .modal-close-btn {
      position: absolute;
      top: 15px;
      right: 20px;
      font-size: 28px;
      cursor: pointer;
      background: none;
      border: none;
      color: #666;
    }
    .auth-title {
      font-size: 2.5em;
      text-align: center;
      margin-bottom: 30px;
      color: #000000;
    }
    .form-group { margin-bottom: 25px; }
    .form-label {
      display: block;
      margin-bottom: 8px;
      font-weight: bold;
      color: #ffffff;
      font-size: 1.1em;
    }
    .form-input {
      width: 100%;
      padding: 15px;
      border: 2px solid #000000;
      border-radius: 10px;
      font-size: 1em;
    }
    .form-input:focus {
      outline: none;
      border-color:#0a0a0a; 
      box-shadow: 0 0 0 3px rgba(34,197,94,0.3);
    }
    .submit-btn {
      width: 100%;
      background: hsl(142, 92%, 38%);
      color: white;
      border-color: #fafd22;
      padding: 18px;
      border-radius: 10px;
      font-size: 1.2em;
      font-weight: bold;
      cursor: pointer;
      margin-top: 10px;
    }
    .auth-switch {
      text-align: center;
      margin-top: 20px;
      color: #6b7280;
    }
    .auth-switch a {
      color: #22c55e;
      font-weight: bold;
      cursor: pointer;
    }

      /* Hero Section */
      .hero {
      color: white;
      text-align: center;
      padding: 100px 20px;
      background: linear-gradient(rgba(34,197,94,0), rgba(22,163,74,1)), url("f5.png");
      background-size: cover;
      background-position: center;
      position: relative;
    }
    .hero h1 {
      font-size: 3.5em;
      margin-bottom: 20px;
      text-shadow: 3px 3px 8px rgba(0,0,0,0.7);
    }
    .hero p {
      font-size: 1.5em;
      margin-bottom: 15px;
      text-shadow: 2px 2px 6px rgba(0,0,0,0.6);
    }

      .hero-logo-left {
        position: absolute;
        top: 50%;
        left: 8%;
        transform: translateY(-50%);
        width: 250px;
        height: 250px;
        opacity: 0.85;
        filter: drop-shadow(0 10px 30px rgba(0, 0, 0, 0.5));
        animation: floatLogoLeft 4s ease-in-out infinite;
        z-index: 1;
      }

      @keyframes floatLogoLeft {
        0%, 100% {
          transform: translateY(-50%) translateX(0);
        }
        50% {
          transform: translateY(-50%) translateX(-10px);
        }
      }
      
      /* Section Styles */
      section {
        padding: 30px 15px;
        scroll-margin-top: 70px;
        width: 100%;
      }

      section > * {
        max-width: 1200px;
        margin-left: auto;
        margin-right: auto;
      }

      .section-title {
        font-size: 2.5em;
        text-align: center;
        margin-bottom: 20px;
        color: rgb(252, 250, 250);
        font-weight: bold;
        text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.8);
      }

      .content-card {
        background: #033f12;
        border-radius: 15px;
        padding: 20px 15px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        backdrop-filter: blur(10px);
      }

      .section-header {
        background: #00aa3e;
        padding: 12px 20px;
        border-radius: 10px;
        font-size: 1.3em;
        font-weight: bold;
        margin-bottom: 20px;
        color: #ffffff;
        text-align: center;
      }

      /* Slider */
      .slider-section {
        position: relative;
        padding: 40px 15px;
        width: 100%;
      }

      .slider-container {
        max-width: 1200px;
        margin: 0 auto;
        position: relative;
        height: 450px;
        overflow: hidden;
        border-radius: 20px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
      }

      .slider-wrapper {
        position: relative;
        height: 100%;
        width: 100%;
      }

      .slide {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        opacity: 0;
        transition: opacity 1s ease-in-out;
      }

      .slide.active {
        opacity: 1;
      }

      .slide img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        object-position: center;
      }

      .slider-btn {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        background: rgba(255, 255, 255, 0.9);
        border: none;
        width: 50px;
        height: 50px;
        border-radius: 50%;
        cursor: pointer;
        font-size: 1.5em;
        color: #22c55e;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s;
        z-index: 10;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      }

      .slider-btn:hover {
        background: white;
        transform: translateY(-50%) scale(1.1);
      }

      .slider-btn.prev {
        left: 20px;
      }

      .slider-btn.next {
        right: 20px;
      }

      .slider-dots {
        position: absolute;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        gap: 10px;
        z-index: 10;
      }

      .dot {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.5);
        cursor: pointer;
        transition: all 0.3s;
      }

      .dot.active {
        background: white;
        width: 30px;
        border-radius: 6px;
      }

      .slider-welcome-text {
        text-align: center;
        margin-top: 40px;
        padding: 40px 20px;
        background: linear-gradient(135deg, #0dd417, #00aa3e);
        border-radius: 20px;
        max-width: 800px;
        margin-left: auto;
        margin-right: auto;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      }

      .slider-welcome-text h2 {
        font-size: 3em;
        color: white;
        margin-bottom: 15px;
        font-weight: bold;
      }

      .slider-welcome-text p {
        font-size: 1.3em;
        color: white;
        opacity: 0.95;
      }

      /* Mobile responsive */
      @media (max-width: 768px) {
      .hamburger { display: block; }
      .nav-container > .nav-links { display: none; }
    }
      
      /* Field Info */
      .field-details {
        line-height: 2;
        color: #ffffff;
        font-size: 1.1em;
      }

      .price-list {
        margin: 20px 0;
        background: #f9fafb;
        padding: 20px 15px;
        border-radius: 10px;
      }

      .price-item {
        padding: 12px 0;
        border-bottom: 1px solid #e5e7eb;
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 15px;
      }

      .price-item:last-child {
        border-bottom: none;
      }

      .field-name {
        font-weight: bold;
        color: #1f2937;
        font-size: 1.1em;
        flex-shrink: 0;
      }

      .field-price {
        color: #22c55e;
        font-weight: bold;
        font-size: 1.1em;
        text-align: right;
      }

      /* Map */
      .map-container {
        margin-top: 20px;
        border-radius: 15px;
        overflow: hidden;
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
      }

      .map-container iframe {
        display: block;
        width: 100%;
        height: 450px;
      }

      /* Rules */
      .rules-list {
        counter-reset: rule-counter;
      }

      .rule-item {
        margin: 25px 0;
        padding: 20px;
        background: #f9fafb;
        border-radius: 10px;
        position: relative;
        padding-left: 60px;
        font-size: 1.05em;
        line-height: 1.8;
      }

      .rule-item:before {
        counter-increment: rule-counter;
        content: counter(rule-counter) ".";
        position: absolute;
        left: 20px;
        font-weight: bold;
        font-size: 1.3em;
        color: #22c55e;
      }

      /* Time Slots */
      .time-slots-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 15px;
        margin-top: 15px;
      }

      .time-slot-btn {
  padding: 15px;
  border: 2px solid #d1d5db;
  border-radius: 10px;
  background: #000000;
  color: #ffffff;
  cursor: pointer;
  transition: all 0.3s;
  font-size: 1em;
  font-weight: 500;
  text-align: center;
  position: relative;
  -webkit-tap-highlight-color: transparent;
  user-select: none;
}
  @media (hover: hover) and (pointer: fine) {
      .time-slot-btn:hover {
        border-color: #71eb1f;
        background: #050505;
        color:  #e2cc09;
        transform: translateY(-2px);
      }
      }
      .time-slot-btn.selected {
        background:  #07b815;
        color:  #ffffff;
        border-color: #e2cc09;
      }

      .time-slot-btn.available {
        padding: 15px;
       border: 2px solid #d1d5db;
    border-radius: 10px;
    background: #000000;
    color: #ffffff;
    cursor: pointer;
    transition: all 0.3s;
    font-size: 1em;
    font-weight: 500;
    text-align: center;
    position: relative;
    -webkit-tap-highlight-color: transparent;
    user-select: none;
}
  @media (hover: hover) and (pointer: fine) {
      .time-slot-btn:hover {
        border-color: #71eb1f;
        background: #050505;
        color:  #e2cc09;
        transform: translateY(-2px);
      }
      }
      .time-slot-btn.selected {
        background:  #07b815;
        color:  #ffffff;
        border-color: #e2cc09;
      }

 
      .time-slot-btn.booked {
        background:  #e62a2a;
        border-color: hsl(40, 100%, 99%);
        cursor: not-allowed;
        opacity: 0.7;
      }

      .time-slot-btn .status-badge {
        position: absolute;
        top: 5px;
        right: 5px;
        font-size: 0.8em;
        padding: 2px 8px;
        border-radius: 12px;
        font-weight: bold;
      }

      .time-slot-btn.available .status-badge {
        background: #07c44c;
        color: rgb(255, 255, 255);
         
      }

      .time-slot-btn.booked .status-badge {
        background: #ef4444;
        color: rgb(255, 251, 251);
      }
    
      .availability-legend {
        display: flex;
        justify-content: center;
        gap: 30px;
        margin: 20px 0;
        flex-wrap: wrap;
      }

      .legend-item {
        color: #ffffff;
        display: flex;
        align-items: center;
        gap: 10px;
        font-size: 1.1em;
      }

      .legend-box {
        width: 30px;
        height: 30px;
        border-radius: 5px;
        border: 2px solid #d1d5db;
      }

      .legend-box.available {
        background: #22c55e;
        border-color: #22c55e;
      }

      .legend-box.booked {
        background: #ef4444;
        border-color: #ef4444;
      }

      .availability-notice {
        background: #dbeafe;
        border: 2px solid #3b82f6;
        padding: 15px;
        border-radius: 10px;
        margin-bottom: 20px;
        text-align: center;
      }

      .availability-notice.checking {
        background: #fef3c7;
        border-color: #fbbf24;
      }

      /* Booking Card */
      .booking-card {
        background: rgba(249, 250, 251, 0.98);
        padding: 25px;
        border-radius: 15px;
        margin: 0 auto 20px;
        border-left: 5px solid #22c55e;
        position: relative;
        max-width: 600px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
        backdrop-filter: blur(5px);
      }

      .booking-card h3 {
        color: #ffffff;
        margin-bottom: 15px;
        text-align: center;
        font-size: 1.3em;
      }

      .booking-card p {
        margin: 8px 0;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .booking-card p strong {
        color: #ffffff;
      }

      .cancel-btn {
        background: #ef4444;
        color: white;
        border: none;
        padding: 12px 24px;
        border-radius: 8px;
        font-weight: bold;
        cursor: pointer;
        margin-top: 20px;
        transition: background 0.3s;
        display: block;
        margin-left: auto;
        margin-right: auto;
      }

      .cancel-btn:hover {
        background: #dc2626;
      }

      /* Gallery */
      .gallery-main-image {
        position: relative;
        width: 100%;
        height: 500px;
        margin-bottom: 30px;
        background: #000000;
        border-radius: 15px;
        overflow: hidden;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      }

      #galleryMainImage {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.3s ease;
      }

      .gallery-nav-btn {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        background: rgba(34, 197, 94, 0.9);
        color: rgb(253, 253, 253);
        border: none;
        font-size: 2.5rem;
        padding: 20px 25px;
        cursor: pointer;
        transition: all 0.3s;
        z-index: 10;
        border-radius: 50%;
        width: 60px;
        height: 60px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .gallery-nav-btn:hover {
        background: rgba(22, 163, 74, 1);
        transform: translateY(-50%) scale(1.1);
        box-shadow: 0 5px 20px rgba(34, 197, 94, 0.5);
      }

      .gallery-prev-btn {
        left: 20px;
      }

      .gallery-next-btn {
        right: 20px;
      }

      .gallery-thumbnails {
        display: flex;
        gap: 15px;
        justify-content: center;
        flex-wrap: wrap;
        padding: 20px 0;
      }

      .gallery-thumbnail {
        width: 150px;
        height: 100px;
        object-fit: cover;
        cursor: pointer;
        border: 4px solid transparent;
        border-radius: 10px;
        transition: all 0.3s;
        opacity: 0.6;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
      }

      .gallery-thumbnail:hover {
        opacity: 1;
        transform: scale(1.05);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
      }

      .gallery-thumbnail.active {
        border-color: #22c55e;
        opacity: 1;
        box-shadow: 0 0 20px rgba(34, 197, 94, 0.6);
      }

      .gallery-counter {
        text-align: center;
        margin-top: 20px;
        font-size: 1.2em;
        color: #ffffff;
        font-weight: bold;
      }

      /* Contact */
      .contact-wrapper {
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: center;
        gap: 60px;
        margin: 40px auto;
        max-width: 800px;
        flex-wrap: wrap;
      }

      .contact-logo-img {
        width: 220px;
        height: 220px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .contact-logo-img img {
        width: 100%;
        height: 100%;
        object-fit: contain;
        border-radius: 15px;
        filter: drop-shadow(0 8px 20px rgba(255, 254, 254, 0.15));
        transition: transform 0.3s;
      }

      .contact-logo-img img:hover {
        transform: scale(1.05);
      }

      .contact-info {
        color: #dcfce7;
        text-align: center;
      }

      .contact-phone {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 15px;
        margin: 15px 0;
        font-size: 1.3em;
      }

      .contact-phone span {
        font-size: 1.5em;
      }

      .thank-you-text {
        font-size: 5em;
        font-weight: bold;
        letter-spacing: 10px;
        margin-top: 60px;
        color: #ffffff;
        text-align: center;
      }

      /* Payment Modal */
      .payment-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.7);
        z-index: 1000;
        align-items: center;
        justify-content: center;
      }

      .payment-modal.active {
        display: flex;
      }

      .payment-content {
        background: white;
        border-radius: 20px;
        padding: 40px;
        max-width: 500px;
        width: 90%;
        max-height: 90vh;
        overflow-y: auto;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        animation: slideUp 0.3s ease-out;
      }

      @keyframes slideUp {
        from {
          opacity: 0;
          transform: translateY(50px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .payment-header {
        text-align: center;
        margin-bottom: 30px;
        padding-bottom: 20px;
        border-bottom: 2px solid #e5e7eb;
      }

      .payment-header h2 {
        font-size: 1.8em;
        color: #1f2937;
        margin-bottom: 10px;
      }

      .payment-summary {
        background: #f9fafb;
        padding: 20px;
        border-radius: 10px;
        margin-bottom: 20px;
      }

      .summary-row {
        display: flex;
        justify-content: space-between;
        padding: 10px 0;
        border-bottom: 1px solid #e5e7eb;
      }

      .summary-row:last-child {
        border-bottom: none;
        font-weight: bold;
        font-size: 1.2em;
        color: #22c55e;
        padding-top: 15px;
        margin-top: 10px;
        border-top: 2px solid #22c55e;
      }

      .summary-label {
        color: #6b7280;
      }

      .summary-value {
        font-weight: 600;
        color: #1f2937;
      }

      .deposit-highlight {
        background: #dcfce7;
        padding: 15px;
        border-radius: 10px;
        margin: 20px 0;
        border-left: 4px solid #22c55e;
      }

      .deposit-highlight strong {
        color: #16a34a;
        font-size: 1.2em;
      }

      .qr-code-container {
        text-align: center;
        padding: 20px;
        background: #f9fafb;
        border-radius: 10px;
        margin: 20px 0;
      }

      .qr-code-image {
        width: 250px;
        height: 250px;
        margin: 20px auto;
        background: white;
        padding: 15px;
        border-radius: 10px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      }

      .payment-info {
        background: #fef3c7;
        border: 2px solid #fbbf24;
        padding: 15px;
        border-radius: 10px;
        margin: 20px 0;
      }

      .payment-info p {
        margin: 8px 0;
        color: #92400e;
        font-weight: 500;
      }

      .upload-section {
        margin: 25px 0;
      }

      .upload-label {
        display: block;
        font-weight: bold;
        color: #1f2937;
        margin-bottom: 10px;
        font-size: 1.1em;
      }

      .upload-area {
        border: 3px dashed #d1d5db;
        border-radius: 10px;
        padding: 40px;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s;
        background: #f9fafb;
      }

      .upload-area:hover {
        border-color: #22c55e;
        background: #f0fdf4;
      }

      .upload-area.dragover {
        border-color: #22c55e;
        background: #dcfce7;
      }

      #slipPreview {
        max-width: 100%;
        max-height: 300px;
        margin-top: 15px;
        border-radius: 10px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      }

      .payment-buttons {
        display: flex;
        gap: 15px;
        margin-top: 25px;
      }

      .payment-buttons button {
        flex: 1;
        padding: 15px;
        border: none;
        border-radius: 10px;
        font-size: 1.1em;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s;
      }

      .upload-slip-btn {
        background: #22c55e;
        color: white;
      }

      .upload-slip-btn:hover {
        background: #16a34a;
      }

      .upload-slip-btn:disabled {
        background: #d1d5db;
        cursor: not-allowed;
      }

      .cancel-payment-btn {
        background: #f3f4f6;
        color: #6b7280;
      }

      .cancel-payment-btn:hover {
        background: #e5e7eb;
        color: #374151;
      }

      .payment-terms {
        background: #fee2e2;
        border: 2px solid #ef4444;
        padding: 15px;
        border-radius: 10px;
        margin: 20px 0;
      }

      .payment-terms h4 {
        color: #dc2626;
        margin-bottom: 10px;
        font-size: 1.1em;
      }

      .payment-terms ul {
        list-style: none;
        padding: 0;
      }

      .payment-terms li {
        padding: 8px 0;
        color: #991b1b;
        font-weight: 500;
      }

      .payment-terms li:before {
        content: "‚Ä¢ ";
        color: #ef4444;
        font-weight: bold;
        margin-right: 8px;
      }

      .timer-warning {
        text-align: center;
        color: #dc2626;
        font-weight: bold;
        font-size: 1.1em;
        margin-top: 20px;
        padding: 10px;
        background: #fee2e2;
        border-radius: 8px;
      }

      /* Spinner */
      .spinner {
        display: inline-block;
        width: 12px;
        height: 12px;
        border: 2px solid #fff;
        border-top-color: transparent;
        border-radius: 50%;
        animation: spin 0.6s linear infinite;
        margin-left: 8px;
      }

      /* Responsive */
      @media (max-width: 768px) {
        section {
          padding: 20px 10px;
        }

        .section-title {
          font-size: 1.8em;
          margin-bottom: 15px;
        }

        .content-card {
          padding: 15px 10px;
        }

        .hero {
          padding: 60px 20px;
        }

        .hero h1 {
          font-size: 2em;
        }

        .hero p {
          font-size: 1.1em;
        }

        /* ‡∏ã‡πà‡∏≠‡∏ô‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏ö‡∏±‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤ */
        .hero-logo-left {
          display: none;
        }

        .slider-container {
          height: 300px;
        }

        .slider-welcome-text {
          padding: 30px 15px;
        }

        .slider-welcome-text h2 {
          font-size: 2em;
        }

        .slider-welcome-text p {
          font-size: 1.1em;
        }

        .time-slots-grid {
          grid-template-columns: repeat(2, 1fr);
        }

        .auth-modal {
          padding: 30px;
        }

        .thank-you-text {
          font-size: 3em;
          letter-spacing: 5px;
        }

        .gallery-main-image {
          height: 350px;
        }

        .gallery-thumbnail {
          width: 120px;
          height: 80px;
        }

        .gallery-nav-btn {
          font-size: 2rem;
          padding: 15px 20px;
          width: 50px;
          height: 50px;
        }

        .gallery-prev-btn {
          left: 10px;
        }

        .gallery-next-btn {
          right: 10px;
        }

        .map-container iframe {
          height: 350px;
        }

        .contact-logo-img {
          width: 120px;
          height: 120px;
        }
        
        .contact-phone {
          font-size: 1em;
        }
      }

      @media (max-width: 480px) {
        section {
          padding: 15px 8px;
        }

        .section-title {
          font-size: 1.5em;
          margin-bottom: 10px;
        }

        .content-card {
          padding: 12px 8px;
        }

        .hero {
          padding: 40px 15px;
        }

        .hero h1 {
          font-size: 1.5em;
        }

        .hero p {
          font-size: 0.9em;
        }

        /* ‡∏ã‡πà‡∏≠‡∏ô‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏ö‡∏±‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤ */
        .hero-logo-left {
          display: none;
        }

        .slider-container {
          height: 250px;
        }

        .slider-welcome-text {
          padding: 25px 10px;
        }

        .slider-welcome-text h2 {
          font-size: 1.5em;
        }

        .slider-welcome-text p {
          font-size: 1em;
        }

        .gallery-main-image {
          height: 250px;
          border-radius: 10px;
        }

        .gallery-thumbnail {
          width: 90px;
          height: 60px;
        }

        .gallery-nav-btn {
          font-size: 1.5rem;
          width: 40px;
          height: 40px;
          padding: 10px;
        }

        .map-container iframe {
          height: 300px;
        }

        .contact-logo-img {
          width: 90px;
          height: 90px;
        }
      }

/* ========================================
   STAFF GALLERY & ACTIVITIES STYLES
   ======================================== */
.staff-content-section {
  background: none;
  padding: 40px 20px;
  margin: 40px auto;
  max-width: 1200px;
  border-radius: 20px;
}

.staff-gallery-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  gap: 20px;
  margin: 30px 0;
}

.staff-gallery-card {
  background: none;
  border-radius: 15px;
  overflow: hidden;
 
  transition: all 0.3s ease;
  cursor: pointer;
}

.staff-gallery-card:hover {
  transform: translateY(-10px);
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
}

.staff-gallery-card img {
  width: 100%;
  height: 200px;
  object-fit: cover;
}

.staff-gallery-card-title {
  padding: 15px;
  text-align: center;
  font-weight: 600;
  color: #333;
  background: #f9fafb;
}

.activities-list {
  display: flex;
  flex-direction: column;
  gap: 25px;
  margin-top: 20px;
}

.activity-card {
  background: white;
  border-radius: 15px;
  padding: 25px;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
  transition: all 0.3s ease;
  border-left: 5px solid #16a34a;
}

.activity-card:hover {
  transform: translateX(10px);
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
}

.activity-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 15px;
  flex-wrap: wrap;
  gap: 10px;
}

.activity-title {
  font-size: 1.5em;
  color: #16a34a;
  font-weight: 700;
}

.activity-date {
  color: #666;
  font-size: 0.9em;
  background: #f3f4f6;
  padding: 6px 15px;
  border-radius: 20px;
}

.activity-content {
  color: #333;
  font-size: 1.1em;
  line-height: 1.8;
  white-space: pre-wrap;
}

.content-loading-state {
  text-align: center;
  padding: 60px 20px;
  color: #999;
  font-size: 1.2em;
}

.staff-gallery-modal {
  display: none;
  position: fixed;
  z-index: 10000;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.95);
}

.staff-gallery-modal.show {
  display: flex;
  align-items: center;
  justify-content: center;
}

.staff-gallery-modal img {
  max-width: 90%;
  max-height: 90vh;
  border-radius: 10px;
  position: relative;
  z-index: 1;
}

.staff-gallery-close {
  position: absolute;
  top: 20px;
  right: 40px;
  font-size: 50px;
  color: white;
  cursor: pointer;
  z-index: 10001;
  width: 60px;
  height: 60px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.3s;
  user-select: none;
}

.staff-gallery-close:hover {
  transform: scale(1.2);
  color: #ef4444;
}

.staff-gallery-close:active {
  transform: scale(0.9);
}

@media (max-width: 768px) {
  .staff-gallery-grid {
    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
  }
  .staff-gallery-card img {
    height: 150px;
  }
  .activity-title {
    font-size: 1.2em;
  }
  
  /* ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏° X ‡πÉ‡∏´‡πâ‡πÉ‡∏´‡∏ç‡πà‡πÅ‡∏•‡∏∞‡∏Ñ‡∏•‡∏¥‡∏Å‡∏á‡πà‡∏≤‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô‡∏ö‡∏ô Mobile */
  .staff-gallery-close {
    top: 10px;
    right: 10px;
    font-size: 60px;
    width: 70px;
    height: 70px;
    background: rgba(0, 0, 0, 0.5);
    border-radius: 50%;
  }
  
  .staff-gallery-modal img {
    max-width: 95%;
    max-height: 85vh;
  }
}
    </style>
    </style>
  </head>
  <body>
    <!-- Login/Register Modal -->
    <div id="loginModal" class="modal-overlay">
      <div class="auth-modal">
        <button class="modal-close-btn" onclick="closeLoginModal()">&times;</button>
        
        <div id="modalLoginForm">
  <h1 class="auth-title">‚öΩ ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</h1>
  <form onsubmit="handleLogin(event)">
    <div class="form-group">
      <label class="">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</label>
      <input type="text" id="modalLoginUsername" class="form-input" 
             placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ" 
             autocomplete="username" 
             required />
    </div>  <!-- ‚úÖ ‡∏õ‡∏¥‡∏î form-group ‡∏Ç‡∏≠‡∏á username -->
    
    <div class="form-group">  <!-- ‚úÖ form-group ‡πÉ‡∏´‡∏°‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö password -->
      <label class="">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
      <div style="position: relative;">
        <input type="password" id="modalLoginPassword" class="form-input" 
               placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô" 
               autocomplete="current-password" 
               required 
               style="padding-right: 45px;" />
        
        <button type="button" 
                onclick="togglePassword('modalLoginPassword', this)" 
                style="position: absolute; right: 10px; top: 50%; 
                       transform: translateY(-50%); background: none; 
                       border: none; cursor: pointer; font-size: 1.2em; 
                       padding: 5px;">
          üëÅÔ∏è
        </button>
      </div>
    </div>  
    <button type="submit" class="submit-btn">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
  </form>
  <div class="auth-switch">
    ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ? <a onclick="showRegisterInModal()">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</a>
  </div>
</div>
<div class="auth-switch">
  <a href="staff-login.html" style="color: #667eea; font-weight: 600; text-decoration: none;"
  > üë§ ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô </a>
</div>
        <div id="modalRegisterForm" style="display: none;">
  <h1 class="auth-title">üìù ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</h1>
  <form onsubmit="handleRegister(event)">
    <div class="form-group">
      <label class="form-label">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</label>
      <input type="text" id="modalRegUsername" class="form-input" 
             placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ" 
             autocomplete="username" 
             required />
    </div>
    
    <div class="form-group">
      <label class="form-label">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</label>
      <input type="text" id="modalRegFullname" class="form-input" 
             placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•" 
             autocomplete="name" 
             required />
    </div>
    
    <div class="form-group">
      <label class="form-label">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£</label>
      <input type="tel" id="modalRegPhone" class="form-input" 
             placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå" 
             autocomplete="tel" 
             required />
    </div>
    
    <div class="form-group">
      <label class="form-label">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
      <div style="position: relative;">
        <input type="password" id="modalRegPassword" class="form-input" 
               placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô" 
               autocomplete="new-password" 
               required 
               style="padding-right: 45px;" />
        
        <button type="button" 
                onclick="togglePassword('modalRegPassword', this)" 
                style="position: absolute; right: 10px; top: 50%; 
                       transform: translateY(-50%); background: none; 
                       border: none; cursor: pointer; font-size: 1.2em; 
                       padding: 5px;">
          üëÅÔ∏è
        </button>
      </div>
    </div>
    <button type="submit" class="submit-btn">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</button>
  </form>
  <div class="auth-switch">
    ‡∏°‡∏µ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÅ‡∏•‡πâ‡∏ß? <a onclick="showLoginInModal()">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</a>
  </div>
</div>
      </div>
    </div>

    <!-- Navigation Bar -->
     <nav class="navbar">
    <div class="nav-container">
      <div class="hamburger" id="hamburgerBtn">
        <span></span>
        <span></span>
        <span></span>
      </div>

      <div class="nav-links" id="desktopNav">
        <button class="nav-item" data-section="homeSection">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</button>
        <button class="nav-item" data-section="fieldInfoSection">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏ô‡∏≤‡∏°</button>
        <button class="nav-item" data-section="rulesSection">‡∏Å‡∏é‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ö</button>
        <button class="nav-item" data-section="bookingSection">‡∏à‡∏≠‡∏á‡∏™‡∏ô‡∏≤‡∏°</button>
        <button class="nav-item" data-section="checkBookingSection">‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</button>
        <button class="nav-item" data-section="gallerySection">‡πÅ‡∏Å‡∏•‡πÄ‡∏•‡∏≠‡∏£‡∏µ‡πà</button>
        <button class="nav-item" data-section="contactSection">‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏°</button>
      </div>
      <div class="user-section">

        <span class="login-btn" id="loginNavBtn">üîê login</span>
        <div id="userInfo" style="display:none;">
          <span>üë§ <span id="currentUser"></span></span>
          <span class="logout-btn" id="logoutBtn">logout</span>
        </div>
      </div>
    </div>
  </nav>
    
    <!-- Mobile Menu -->
  <div class="menu-overlay" id="menuOverlay">
    <div class="nav-links" id="mobileNav">
      <button class="nav-item" data-section="homeSection">üè† ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</button>
      <button class="nav-item" data-section="fieldInfoSection">‚ÑπÔ∏è ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏ô‡∏≤‡∏°</button>
      <button class="nav-item" data-section="rulesSection">üìã ‡∏Å‡∏é‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ö</button>
      <button class="nav-item" data-section="bookingSection">‚öΩ ‡∏à‡∏≠‡∏á‡∏™‡∏ô‡∏≤‡∏°</button>
      <button class="nav-item" data-section="checkBookingSection">‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</button>
      <button class="nav-item" data-section="gallerySection">üì∏ ‡πÅ‡∏Å‡∏•‡πÄ‡∏•‡∏≠‡∏£‡∏µ‡πà</button>
      <button class="nav-item" data-section="contactSection">üìû ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏°</button>
    </div>
  </div>

    <!-- Home Section -->
    <section id="homeSection">

      <div class="hero">
        <img src="f6.jpg" alt="Logo" class="hero-logo-left" />
        <h1>PRIJIT SPORT</h1>
        <p>‚öΩ ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏≠‡∏á‡∏™‡∏ô‡∏≤‡∏°‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏• 7 ‡∏Ñ‡∏ô ‚öΩ</p>
        <p>‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô ‡∏à‡∏≠‡∏á‡∏á‡πà‡∏≤‡∏¢ ‡∏™‡∏∞‡∏î‡∏ß‡∏Å ‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß</p>
        <p>‚ú® ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ üí°</p>
      </div>
      
      <div class="slider-section">
        <div class="slider-container">
          <div class="slider-wrapper">

            <div class="slide active"><img src="f11.jpg" alt="slide1" /></div>
            <div class="slide"><img src="f8.jpg" alt="slide2" /></div>
            <div class="slide"><img src="f9.jpg" alt="slide3" /></div>
            <div class="slide"><img src="f1.jpg" alt="slide4" /></div>
            <div class="slide"><img src="f10.jpg" alt="slide5" /></div>
          </div>

          <button class="slider-btn prev" onclick="changeSlide(-1)">‚Äπ</button>
          <button class="slider-btn next" onclick="changeSlide(1)">‚Ä∫</button>

          <div class="slider-dots">
            <span class="dot active" onclick="currentSlide(0)"></span>
            <span class="dot" onclick="currentSlide(1)"></span>
            <span class="dot" onclick="currentSlide(2)"></span>
            <span class="dot" onclick="currentSlide(3)"></span>
            <span class="dot" onclick="currentSlide(4)"></span>
          </div>
        </div>
      
        <div class="slider-welcome-text">
          <h2>‚öΩ Welcome ‚öΩ</h2>
          <p>‡∏™‡∏ô‡∏≤‡∏°‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏• PRIJIT SPORT</p>
          <p style="margin-top: 10px; color: #ffffff;">‡∏™‡∏ô‡∏≤‡∏°‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏•‡πÑ‡∏û‡∏£‡∏à‡∏¥‡∏ï‡∏£‡∏ó‡∏∏‡∏Å‡∏™‡∏ô‡∏≤‡∏°‡πÉ‡∏ä‡πâ‡∏´‡∏ç‡πâ‡∏≤‡πÄ‡∏ó‡∏µ‡∏¢‡∏°‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏î‡∏µ ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡πÑ‡∏°‡πà‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏à‡∏≤‡∏Å‡∏™‡∏ô‡∏≤ ‡∏°‡∏´‡∏ç‡πâ‡∏≤ ‡∏≠‡∏µ‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏¢‡∏±‡∏á‡∏°‡∏µ‡∏™‡∏¥‡πà‡∏á‡∏≠‡∏≥‡∏ô‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏î‡∏ß‡∏Å‡∏ï‡πà‡∏≤‡∏á‡πÜ‡πÅ‡∏•‡∏∞‡∏ó‡∏µ‡πà‡∏à‡∏≠‡∏î‡∏£‡∏ñ‡∏Å‡∏ß‡πâ‡∏≤‡∏á ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡πÜ‡∏°‡∏≤‡πÄ‡∏•‡πà‡∏ô‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢</p>
        </div>
      </div>
    </section>

    <!-- Field Info Section -->
    <section id="fieldInfoSection">
      <h2 class="section-title">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏ô‡∏≤‡∏°</h2>
      <div class="content-card">
        <div class="section-header">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏ô‡∏≤‡∏°‡πÅ‡∏•‡∏∞‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå</div>
        <div class="field-details">
          <p><strong>üèüÔ∏è ‡∏°‡∏µ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î 6 ‡∏™‡∏ô‡∏≤‡∏°</strong></p>
          <p>üí° ‡∏°‡∏µ‡∏™‡∏õ‡∏≠‡∏ï‡πÑ‡∏•‡∏ó‡πå ‡∏™‡∏ô‡∏≤‡∏°‡∏•‡∏∞ 6 ‡∏à‡∏∏‡∏î</p>
          <p>üå± ‡∏™‡∏ô‡∏≤‡∏°‡∏´‡∏ç‡πâ‡∏≤‡πÄ‡∏ó‡∏µ‡∏¢‡∏°</p>
          <p>üìä ‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏±‡∏ö‡∏ú‡∏•‡∏™‡∏Å‡∏≠‡∏£‡πå (Scoreboard)</p>
          <p>‚öΩ ‡∏•‡∏π‡∏Å‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏• ‡∏™‡∏ô‡∏≤‡∏°‡∏•‡∏∞ 2 ‡πÉ‡∏ö</p>
          <p>üöª ‡∏°‡∏µ‡∏´‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≥ 2 ‡∏à‡∏∏‡∏î</p>
        </div>

        <div class="price-list">
          <h3 style="margin-bottom: 20px; color: #000000; text-align: center;">üí∞ ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Ñ‡πà‡∏≤‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</h3>
          <div class="price-item">
            <span class="field-name">‡∏™‡∏ô‡∏≤‡∏° 1 (35√ó54m)</span>
            <span class="field-price">‡∏Å‡πà‡∏≠‡∏ô 6 ‡πÇ‡∏°‡∏á = 1,000 ‡∏ö‡∏≤‡∏ó | ‡∏´‡∏•‡∏±‡∏á 6 ‡πÇ‡∏°‡∏á = 1,200 ‡∏ö‡∏≤‡∏ó</span>
          </div>
          <div class="price-item">
            <span class="field-name">‡∏™‡∏ô‡∏≤‡∏° 2 (35√ó54m)</span>
            <span class="field-price">‡∏Å‡πà‡∏≠‡∏ô 6 ‡πÇ‡∏°‡∏á = 1,000 ‡∏ö‡∏≤‡∏ó | ‡∏´‡∏•‡∏±‡∏á 6 ‡πÇ‡∏°‡∏á = 1,200 ‡∏ö‡∏≤‡∏ó</span>
          </div>
          <div class="price-item">
            <span class="field-name">‡∏™‡∏ô‡∏≤‡∏° 3 (35√ó52m)</span>
            <span class="field-price">‡∏Å‡πà‡∏≠‡∏ô 6 ‡πÇ‡∏°‡∏á = 1,000 ‡∏ö‡∏≤‡∏ó | ‡∏´‡∏•‡∏±‡∏á 6 ‡πÇ‡∏°‡∏á = 1,200 ‡∏ö‡∏≤‡∏ó</span>
          </div>
          <div class="price-item">
            <span class="field-name">‡∏™‡∏ô‡∏≤‡∏° 4 (37√ó55m)</span>
            <span class="field-price">‡∏Å‡πà‡∏≠‡∏ô 6 ‡πÇ‡∏°‡∏á = 1,100 ‡∏ö‡∏≤‡∏ó | ‡∏´‡∏•‡∏±‡∏á 6 ‡πÇ‡∏°‡∏á = 1,300 ‡∏ö‡∏≤‡∏ó</span>
          </div>
          <div class="price-item">
            <span class="field-name">‡∏™‡∏ô‡∏≤‡∏° 5 (34√ó50m)</span>
            <span class="field-price">‡∏Å‡πà‡∏≠‡∏ô 6 ‡πÇ‡∏°‡∏á = 900 ‡∏ö‡∏≤‡∏ó | ‡∏´‡∏•‡∏±‡∏á 6 ‡πÇ‡∏°‡∏á = 1,100 ‡∏ö‡∏≤‡∏ó</span>
          </div>
          <div class="price-item">
            <span class="field-name">‡∏™‡∏ô‡∏≤‡∏° 6 (27√ó45m)</span>
            <span class="field-price">‡∏Å‡πà‡∏≠‡∏ô 6 ‡πÇ‡∏°‡∏á = 700 ‡∏ö‡∏≤‡∏ó | ‡∏´‡∏•‡∏±‡∏á 6 ‡πÇ‡∏°‡∏á = 900 ‡∏ö‡∏≤‡∏ó</span>
          </div>
        </div>

        <div class="section-header" style="margin-top: 40px;">üìç ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á</div>
        <div class="map-container">
          <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3876.519192244568!2d100.42645637479106!3d13.68697489879167!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x30e2bd50acd08fd7%3A0x9ec98b477706a73!2z4Liq4LiZ4Liy4Lih4Lif4Li44LiV4Lia4Lit4Lil4LmE4Lie4Lij4LiI4Li04LiV4Lij4Liq4Lib4Lit4Lij4LmM4LiV!5e0!3m2!1sth!2sth!4v1767945226405!5m2!1sth!2sth" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
        </div>

        <div style="text-align: center; margin-top: 20px; padding: 20px; background: #d1e94b; border-radius: 10px;">
          <p style="color: #16a34a; font-weight: bold; font-size: 1.1em;">üìå ‡∏à‡∏∏‡∏î‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï: ‡∏Å‡πà‡∏≠‡∏ô‡∏™‡∏µ‡πà‡πÅ‡∏¢‡∏Å‡∏ö‡∏≤‡∏á‡∏ö‡∏≠‡∏ô 1 ‡πÅ‡∏•‡∏∞ ‡∏ö‡∏≤‡∏á‡πÅ‡∏Ñ</p>
          <p style="color: #020202; margin-top: 10px;">üöó ‡∏°‡∏µ‡∏ó‡∏µ‡πà‡∏à‡∏≠‡∏î‡∏£‡∏ñ‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏Ç‡∏ß‡∏≤‡∏á ‡∏™‡∏∞‡∏î‡∏ß‡∏Å‡∏™‡∏ö‡∏≤‡∏¢</p>
        </div>
      </div> 
    </section>

    <!-- Rules Section -->
    <section id="rulesSection">
      <h2 class="section-title">‡∏Å‡∏é‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ö</h2>
      <div class="content-card">
        <div class="section-header">‡∏Ç‡πâ‡∏≠‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏™‡∏ô‡∏≤‡∏°</div>
        <div class="rules-list">
          <div class="rule-item">
            ‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏∞‡∏ö‡∏≠‡∏• ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏£‡∏≠‡∏á‡πÄ‡∏ó‡πâ‡∏≤‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏•‡∏™‡∏ô‡∏≤‡∏°‡∏´‡∏ç‡πâ‡∏≤‡πÄ‡∏ó‡∏µ‡∏¢‡∏° (Stud Turf/AG) ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏≠‡∏á‡πÄ‡∏ó‡πâ‡∏≤‡∏ü‡∏∏‡∏ï‡∏ã‡∏≠‡∏• ‡∏´‡πâ‡∏≤‡∏°‡πÉ‡∏ä‡πâ‡∏£‡∏≠‡∏á‡πÄ‡∏ó‡πâ‡∏≤‡∏´‡∏°‡∏∏‡∏î‡πÅ‡∏´‡∏•‡∏° ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏≠‡∏á‡πÄ‡∏ó‡πâ‡∏≤‡πÅ‡∏ö‡∏ö‡∏´‡∏°‡∏∏‡∏î‡πÄ‡∏´‡∏•‡πá‡∏Å ‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏≠‡∏≤‡∏à‡∏ó‡∏≥‡∏•‡∏≤‡∏¢‡∏™‡∏ô‡∏≤‡∏°‡πÑ‡∏î‡πâ
          </div>
          <div class="rule-item">
            ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏™‡∏ô‡∏≤‡∏° ‡∏´‡πâ‡∏≤‡∏°‡∏ô‡∏≥‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤ ‡∏´‡πâ‡∏≤‡∏°‡∏ô‡∏≥‡∏≠‡∏≤‡∏´‡∏≤‡∏£ ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°‡πÅ‡∏≠‡∏•‡∏Å‡∏≠‡∏Æ‡∏≠‡∏•‡πå‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤ ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏£‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏ö‡∏£‡∏¥‡πÄ‡∏ß‡∏ì‡∏™‡∏ô‡∏≤‡∏°
          </div>
          <div class="rule-item">
            ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ ‡∏´‡πâ‡∏≤‡∏°‡πÄ‡∏•‡πà‡∏ô‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á ‡πÉ‡∏ä‡πâ‡∏ó‡πà‡∏≤‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢ ‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡πÉ‡∏î‡πÜ ‡∏ó‡∏µ‡πà‡∏≠‡∏≤‡∏à‡∏Å‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏Å‡∏¥‡∏î‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô
          </div>
          <div class="rule-item">
            ‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ó‡∏¥‡πâ‡∏á‡∏Ç‡∏¢‡∏∞‡∏•‡∏á‡∏ñ‡∏±‡∏á‡∏Ç‡∏¢‡∏∞ ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
          </div>
          <div class="rule-item" style="background:#d1e94b; border-left: 5px solid #033f12;">
            ‚ö†Ô∏è ‡∏Ç‡πâ‡∏≠‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç: ‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏Ç‡∏≠‡∏á‡∏ï‡∏ô‡πÄ‡∏≠‡∏á ‡∏ó‡∏≤‡∏á‡∏™‡∏ô‡∏≤‡∏°‡πÑ‡∏°‡πà‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö‡∏ï‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏ç‡∏´‡∏≤‡∏¢‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏™‡∏¥‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•
          </div>
        </div>
      </div>
    </section>

    <!-- Booking Section -->
    <section id="bookingSection">
      <h2 class="section-title">‡∏à‡∏≠‡∏á‡∏™‡∏ô‡∏≤‡∏°</h2>
      <div class="content-card">
        <div class="section-header">‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏≠‡∏á‡∏™‡∏ô‡∏≤‡∏°</div>
        
        <div class="availability-legend">
          <div class="legend-item">
            <div class="legend-box available"></div>
            <span>‡∏ß‡πà‡∏≤‡∏á</span>
          </div>
          <div class="legend-item">
            <div class="legend-box booked"></div>
            <span>‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏á</span>
          </div>
        </div>
        
        <div class="form-group">
          <label class="form-label">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏ô‡∏≤‡∏°</label>
          <select id="fieldSelect" class="form-input" onchange="checkAvailability()">
            <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏ô‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£</option>
            <option value="‡∏™‡∏ô‡∏≤‡∏° 1">‡∏™‡∏ô‡∏≤‡∏° 1 (35√ó54m) - 1,000/1,200 ‡∏ö‡∏≤‡∏ó</option>
            <option value="‡∏™‡∏ô‡∏≤‡∏° 2">‡∏™‡∏ô‡∏≤‡∏° 2 (35√ó54m) - 1,000/1,200 ‡∏ö‡∏≤‡∏ó</option>
            <option value="‡∏™‡∏ô‡∏≤‡∏° 3">‡∏™‡∏ô‡∏≤‡∏° 3 (35√ó52m) - 1,000/1,200 ‡∏ö‡∏≤‡∏ó</option>
            <option value="‡∏™‡∏ô‡∏≤‡∏° 4">‡∏™‡∏ô‡∏≤‡∏° 4 (37√ó55m) - 1,100/1,300 ‡∏ö‡∏≤‡∏ó</option>
            <option value="‡∏™‡∏ô‡∏≤‡∏° 5">‡∏™‡∏ô‡∏≤‡∏° 5 (34√ó50m) - 900/1,100 ‡∏ö‡∏≤‡∏ó</option>
            <option value="‡∏™‡∏ô‡∏≤‡∏° 6">‡∏™‡∏ô‡∏≤‡∏° 6 (27√ó45m) - 700/900 ‡∏ö‡∏≤‡∏ó</option>
          </select>
        </div>

        <div class="form-group">
          <label class="form-label">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</label>
          <input type="date" id="dateSelect" class="form-input" onchange="checkAvailability()" />
        </div>
        <div id="availabilityStatus" class="availability-notice" style="display: none">
          <strong>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏™‡∏ô‡∏≤‡∏°...</strong>
        </div>
        
        <div class="form-group">
          <label class="form-label">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤</label>
          <div class="time-slots-grid" id="timeSlotsContainer">
            <button class="time-slot-btn" type="button" data-time="08:00 - 10:00">08:00 - 10:00</button>
            <button class="time-slot-btn" type="button" data-time="10:00 - 12:00">10:00 - 12:00</button>
            <button class="time-slot-btn" type="button" data-time="11:00 - 13:00">11:00 - 13:00</button>
            <button class="time-slot-btn" type="button" data-time="13:00 - 14:00">13:00 - 14:00</button>
            <button class="time-slot-btn" type="button" data-time="14:00 - 16:00">14:00 - 16:00</button>
            <button class="time-slot-btn" type="button" data-time="15:00 - 16:00">15:00 - 16:00</button>
            <button class="time-slot-btn" type="button" data-time="16:00 - 17:00">16:00 - 17:00</button>
            <button class="time-slot-btn" type="button" data-time="17:00 - 18:00">17:00 - 18:00</button>
            <button class="time-slot-btn" type="button" data-time="18:00 - 19:00">18:00 - 19:00</button>
            <button class="time-slot-btn" type="button" data-time="19:00 - 20:00">19:00 - 20:00</button>
          </div> 
        </div>
          <button class="submit-btn" onclick="confirmBooking()">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
          </button>
        </div>
    </section>

    <!-- Check Booking Section -->
    <section id="checkBookingSection">
      <h2 class="section-title">‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</h2>
      <div class="content-card">
        <div class="section-header">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</div>

        <div id="bookingList" style="min-height: 200px">
          <p style="text-align: center; color: #ffffff; padding: 40px">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</p>
        </div>
      </div>
    </section>

    <!-- Gallery Section -->
    <section id="gallerySection">
      <h2 class="section-title">‡πÅ‡∏Å‡∏•‡πÄ‡∏•‡∏≠‡∏£‡∏µ‡πà</h2>
      <div class="content-card">
        <div class="section-header">üì∏ ‡∏†‡∏≤‡∏û‡∏ö‡∏£‡∏£‡∏¢‡∏≤‡∏Å‡∏≤‡∏®‡∏™‡∏ô‡∏≤‡∏° PRIJIT SPORT</div>

        <div class="gallery-main-image">
          <img id="galleryMainImage" src="f11.jpg" alt="‡∏™‡∏ô‡∏≤‡∏°‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏• PRIJIT SPORT">
          <button class="gallery-nav-btn gallery-prev-btn" onclick="changeGalleryImage(-1)">‚ùÆ</button>
          <button class="gallery-nav-btn gallery-next-btn" onclick="changeGalleryImage(1)">‚ùØ</button>
        </div>

        <div class="gallery-counter">
          <span id="currentImageNumber">1</span> / <span id="totalImages">7</span>
        </div>

        <div class="gallery-thumbnails">
          <img class="gallery-thumbnail active" src="f11.jpg" onclick="selectGalleryImage(0)" alt="‡∏†‡∏≤‡∏û 1">
          <img class="gallery-thumbnail" src="f8.jpg" onclick="selectGalleryImage(1)" alt="‡∏†‡∏≤‡∏û 2">
          <img class="gallery-thumbnail" src="f9.jpg" onclick="selectGalleryImage(2)" alt="‡∏†‡∏≤‡∏û 3">
          <img class="gallery-thumbnail" src="f1.jpg" onclick="selectGalleryImage(3)" alt="‡∏†‡∏≤‡∏û 4">
          <img class="gallery-thumbnail" src="f10.jpg" onclick="selectGalleryImage(4)" alt="‡∏†‡∏≤‡∏û 5">
          <img class="gallery-thumbnail" src="f2.jpg" onclick="selectGalleryImage(5)" alt="‡∏†‡∏≤‡∏û 6">
          <img class="gallery-thumbnail" src="f3.jpg" onclick="selectGalleryImage(6)" alt="‡∏†‡∏≤‡∏û 7">
        </div>

        <div style="text-align: center; margin-top: 40px; padding: 30px; background: #f0fdf4; border-radius: 15px;">
          <p style="font-size: 1.3em; color: #16a34a; font-weight: bold;">‚öΩ ‡∏†‡∏≤‡∏û‡∏ö‡∏£‡∏£‡∏¢‡∏≤‡∏Å‡∏≤‡∏®‡∏™‡∏ô‡∏≤‡∏° ‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô ‡πÅ‡∏•‡∏∞‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ ‚öΩ</p>
          <p style="margin-top: 10px; color: #6b7280;">‡∏à‡∏≠‡∏á‡∏™‡∏ô‡∏≤‡∏°‡∏ú‡πà‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå ‡∏™‡∏∞‡∏î‡∏ß‡∏Å ‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß</p>
        </div>
      </div>
    </section>

    <!-- Contact Section -->

    <!-- Staff Gallery Section -->
    <section id="staffGallerySection" class="staff-content-section">
      <h2 class="section-title">üì∏ ‡∏†‡∏≤‡∏û‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</h2>
      <div class="content-card">
        <div class="section-header">‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏à‡∏≤‡∏Å‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô PRIJIT SPORT</div>
        <div id="staffGalleryContainer" class="staff-gallery-grid">
          <div class="content-loading-state">üîÑ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û...</div>
        </div>
      </div>
    
      
    
    <!-- Activities Section -->
    <section id="activitiesSection" class="staff-content-section">
      <h2 class="section-title">üì¢ ‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£/‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</h2>
      <div class="content-card">
        <div class="section-header">‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÅ‡∏•‡∏∞‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£‡∏à‡∏≤‡∏Å PRIJIT SPORT</div>
        <div id="activitiesContainer" class="activities-list">
          <div class="content-loading-state">üîÑ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£...</div>
        </div>
      </div>
    </section>

    <!-- Gallery Modal -->
    <div id="staffGalleryModal" class="staff-gallery-modal" onclick="closeStaffModal()">
      <span class="staff-gallery-close" onclick="closeStaffModal()">&times;</span>
      <img id="staffGalleryModalImg" src="" alt="">
    </div>
      </div>

    <section id="contactSection">
      <h2 class="section-title">‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏°</h2>
      <div class="content-card">
        <div class="section-header">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠</div>

        <div class="contact-wrapper">
          <div class="contact-logo-img">
            <img src="f6.jpg" alt="PRIJIT SPORT Logo" />
          </div>

          <div class="contact-info">
            <div class="contact-phone">
              <span>üìû</span>
              <strong>089-115-3822</strong>
            </div>
            <div class="contact-phone">
              <span>üìû</span>
              <strong>02-899-2448</strong>
            </div>
          </div>
        </div>

        <div class="thank-you-text">thank you</div>
        <p style="text-align: center;color: #ffffff;">‚öΩPRIJIT SPORT‚öΩ</p>
      </div>
    </section>
    
    <!-- Firebase Scripts -->
    <script>window.firebaseLoadError = false;</script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js" onerror="console.error('‚ùå Failed to load firebase-app-compat.js'); window.firebaseLoadError = true;"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js" onerror="console.error('‚ùå Failed to load firebase-auth-compat.js'); window.firebaseLoadError = true;"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js" onerror="console.error('‚ùå Failed to load firebase-database-compat.js'); window.firebaseLoadError = true;"></script>

    <script>
console.log('üöÄ [PRIJIT SPORT] Script starting...', new Date().toISOString());

// ========================================
// üêõ DEBUG CONFIGURATION
// ========================================
const DEBUG_MODE = false; // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô true ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏î‡∏π console logs
function debugLog(...args) {
  if (DEBUG_MODE) console.log(...args);
}
console.log("üêõ Debug mode:", DEBUG_MODE ? "ON" : "OFF");


// ========================================
// 1Ô∏è‚É£ CACHE CLEANUP
// ========================================
(function() {
  debugLog('üßπ [1/3] Cache cleanup...');
  try { localStorage.clear(); debugLog('  ‚úÖ localStorage cleared'); } catch(e) {}
  try { sessionStorage.clear(); debugLog('  ‚úÖ sessionStorage cleared'); } catch(e) {}
  debugLog('‚úÖ [1/3] Cache cleanup complete');
})();

// ========================================
// 2Ô∏è‚É£ GLOBAL VARIABLES
// ========================================
debugLog('üì¶ [2/3] Declaring global variables...');

// Firebase
let auth, database, currentUser = null;
let isCancelling = false;

// Booking
let selectedTimeSlot = null;
let currentBookingData = null;
let uploadedSlipFile = null;
let currentAvailabilityCheck = null;

// Navigation & Menu
let lastMenuToggleTime = 0;
const MENU_TOGGLE_DELAY = 300;
let lastNavigationTime = 0;
const NAVIGATION_DELAY = 300; 

// Slider
let currentSlideIndex = 0;
let slideInterval = null;

// Gallery
const galleryImages = ['f11.jpg', 'f8.jpg', 'f9.jpg', 'f1.jpg', 'f10.jpg', 'f2.jpg', 'f3.jpg'];
let currentGalleryIndex = 0;

// Payment
let paymentTimer = null;

// Constants
const DEPOSIT_PERCENTAGE = 0.3;
const MAX_BOOKING_DAYS = 30;
const MAX_FILE_SIZE_MB = 5;
const PAYMENT_TIMEOUT_MINUTES = 15;
const MAX_FILE_SIZE_BYTES = MAX_FILE_SIZE_MB * 1024 * 1024;

debugLog('‚úÖ [2/3] Global variables initialized');
debugLog('  ‚öôÔ∏è NAVIGATION_DELAY:', NAVIGATION_DELAY, 'ms');
debugLog('  ‚öôÔ∏è MENU_TOGGLE_DELAY:', MENU_TOGGLE_DELAY, 'ms');


// ========================================
// UTILITY FUNCTIONS
// ========================================
/**
 * Debounce utility function
 * Delays execution until after wait milliseconds have elapsed since the last call
 */
function debounce(func, wait) {
  let timeout;
  return function executedFunction(...args) {
    const later = () => {
      clearTimeout(timeout);
      func(...args);
    };
    clearTimeout(timeout);
    timeout = setTimeout(later, wait);
  };
}
// ========================================
// 3Ô∏è‚É£ INIT NAVIGATION (bind events)
// ========================================
function initNavigation() {
  debugLog('üéØ [3/3] Initializing navigation...');
  
  function bindEvents() {
    const navItems = document.querySelectorAll('.nav-item[data-section]');
    debugLog('  üîß Found', navItems.length, 'nav items');
    
    navItems.forEach((item, index) => {
      const sectionId = item.getAttribute('data-section');
      const loadBooking = item.getAttribute('data-load-booking') === 'true';
      
      let touchStartTime = 0;
      let touchHandled = false;
      
      // ‚úÖ TOUCHSTART EVENT (Immediate - ‡πÑ‡∏°‡πà‡∏°‡∏µ delay)
      item.addEventListener('touchstart', function(e) {
        touchStartTime = Date.now();
        
        // Visual feedback ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
        this.style.backgroundColor = 'rgba(255, 255, 255, 0.4)';
        
        debugLog(`üì± Touch START: ${sectionId} [${index}]`);
      }, { passive: true });
      
      // ‚úÖ TOUCHEND EVENT (Execute action)
      // Note: passive: false ‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ preventDefault() ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô ghost clicks
      item.addEventListener('touchend', function(e) {
        const now = Date.now();
        const touchDuration = now - touchStartTime;
        
        // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô accidental tap (‡πÄ‡∏£‡πá‡∏ß‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ)
        if (touchDuration < 50) {
          debugLog('  ‚ö†Ô∏è Touch too fast, ignoring');
          return;
        }
        
        // Debounce check
        if (now - lastNavigationTime > NAVIGATION_DELAY) {
          // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô ghost clicks ‡∏î‡πâ‡∏ß‡∏¢ preventDefault
          e.preventDefault();
          e.stopPropagation();
          
          lastNavigationTime = now;
          touchHandled = true;
          
          // Clear visual feedback
          this.style.backgroundColor = '';
          setTimeout(() => { touchHandled = false; }, 300);
          
          console.log(`‚úÖ Touch nav: ${sectionId} [${index}]`);
          
          // ‡πÄ‡∏û‡∏¥‡πà‡∏° micro-delay ‡πÄ‡∏û‡∏∑‡πà‡∏≠ Service Worker cleanup
          setTimeout(() => {
            navigateToSection(sectionId, loadBooking);
          }, 10);
        }
      }, { passive: false, once: false });
    
    // CLICK - Desktop fallback
    item.addEventListener('click', function(e) {
      // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô ghost click
      if (touchHandled || (Date.now() - lastNavigationTime) < 500) {
        e.preventDefault();
        return;
      }
      
      const now = Date.now();
      if (now - lastNavigationTime > NAVIGATION_DELAY) {
        lastNavigationTime = now;
        console.log(`üñ±Ô∏è Click nav: ${sectionId} [${index}]`);
        navigateToSection(sectionId, loadBooking);
      }
    }, { once: false });
  }); 
      
    // ‚úÖ HAMBURGER MENU
   const hamburger = document.getElementById('hamburgerBtn');
  if (hamburger) {
    let hamTouchHandled = false;
    let hamTouchStart = 0;
    
    hamburger.addEventListener('touchstart', function(e) {
      hamTouchStart = Date.now();
      this.style.backgroundColor = 'rgba(255, 255, 255, 0.5)';
    }, { passive: true });
    
    hamburger.addEventListener('touchend', function(e) {
      e.preventDefault();
      e.stopPropagation();
      
      const now = Date.now();
      const duration = now - hamTouchStart;
      
      if (duration >= 50 && now - lastMenuToggleTime > MENU_TOGGLE_DELAY) {
        hamTouchHandled = true;
        this.style.backgroundColor = '';
        setTimeout(() => { hamTouchHandled = false; }, 300);
        toggleMobileMenu();
      }
    }, { passive: false });
    
    hamburger.addEventListener('click', function(e) {
      if (hamTouchHandled || (Date.now() - lastMenuToggleTime) < 500) {
        e.preventDefault();
        return;
      }
      toggleMobileMenu();
    });
  }
    // ‚úÖ LOGIN/LOGOUT BUTTONS (same pattern)
    const loginBtn = document.getElementById('loginNavBtn');
    if (loginBtn) {
      let loginTouchHandled = false;
      
      loginBtn.addEventListener('touchend', function(e) {
        e.preventDefault();
        e.stopPropagation();
        loginTouchHandled = true;
        openLoginModal();
        setTimeout(() => { loginTouchHandled = false; }, 300);
      }, { passive: false });
      
      loginBtn.addEventListener('click', function(e) {
        if (loginTouchHandled) {
          e.preventDefault();
          return;
        }
        openLoginModal();
      });
    }
    
    const logoutBtn = document.getElementById('logoutBtn');
    if (logoutBtn) {
      let logoutTouchHandled = false;
      
      logoutBtn.addEventListener('touchend', function(e) {
        e.preventDefault();
        e.stopPropagation();
        logoutTouchHandled = true;
        handleLogout();
        setTimeout(() => { logoutTouchHandled = false; }, 300);
      }, { passive: false });
      
      logoutBtn.addEventListener('click', function(e) {
        if (logoutTouchHandled) {
          e.preventDefault();
          return;
        }
        handleLogout();
      });
    }

    // ‚úÖ FIELD ‡πÅ‡∏•‡∏∞ DATE SELECT - ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏™‡∏ô‡∏≤‡∏°
   function setupFieldDateListeners() {
  const fieldSelect = document.getElementById('fieldSelect');
  const dateSelect = document.getElementById('dateSelect');
  
  if (fieldSelect && dateSelect && typeof checkAvailability === 'function') {
    let checkTimeout = null;
    
    const debouncedCheck = () => {
      clearTimeout(checkTimeout);
      checkTimeout = setTimeout(() => {
        console.log('üîç Checking availability...');
        checkAvailability();
      }, 300);
    };
    
    fieldSelect.addEventListener('change', debouncedCheck);
    dateSelect.addEventListener('change', debouncedCheck);
    
    console.log('‚úÖ Field/Date listeners bound with debounce');
  }
}

  
  // ‚úÖ ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å bindEvents() ‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
 if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', setupFieldDateListeners);
} else {
  setupFieldDateListeners();
} 
   
    debugLog('‚úÖ [3/3] Navigation initialized');
  }
  bindEvents();
}


function togglePassword(inputId, button) {
  const input = document.getElementById(inputId);
  
  if (input.type === 'password') {
    input.type = 'text';       
    button.textContent = 'üôà';  
  } else {
    input.type = 'password';    
    button.textContent = 'üëÅÔ∏è';  
  }
}

// ========================================
// NAVIGATION FUNCTIONS
// ========================================
function closeMobileMenu() {
  const overlay = document.getElementById('menuOverlay');
  const hamburger = document.getElementById('hamburgerBtn');
  
  if (overlay) overlay.classList.remove('active');
  if (hamburger) hamburger.classList.remove('active');
  document.body.style.overflow = '';
}

function toggleMobileMenu() {
  const now = Date.now();
  
  if (now - lastMenuToggleTime < MENU_TOGGLE_DELAY) {
    debugLog('‚ö†Ô∏è Menu toggle debounced');
    return;
  }
  
  lastMenuToggleTime = now;
  
  const overlay = document.getElementById('menuOverlay');
  const hamburger = document.getElementById('hamburgerBtn');
  
  if (!overlay || !hamburger) return;
  
  const isActive = overlay.classList.contains('active');
  
  if (isActive) {
    closeMobileMenu();
    console.log('üîí Menu closed');
  } else {
    overlay.classList.add('active');
    hamburger.classList.add('active');
    document.body.style.overflow = 'hidden';
    console.log('üì± Menu opened');
  }
}

function navigateToSection(sectionId, loadBooking = false) {
  debugLog('üîó Navigate to:', sectionId);
  
  // Close mobile menu first
  closeMobileMenu();

  // Scroll to section
  const section = document.getElementById(sectionId);
  if (section) {
    // ‡πÉ‡∏ä‡πâ requestAnimationFrame ‡πÄ‡∏û‡∏∑‡πà‡∏≠ smooth performance
    requestAnimationFrame(() => {
      section.scrollIntoView({ behavior: 'smooth', block: 'start' });
    });
    
    // Load booking list if needed
    if (loadBooking && typeof updateBookingList === 'function') {
      setTimeout(() => {
        console.log('  üìã Loading booking list...');
        updateBookingList();
      }, 500); // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏≠‡πÉ‡∏´‡πâ scroll ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏Å‡πà‡∏≠‡∏ô
    }
  } else {
    console.error('  ‚ùå Section not found:', sectionId);
  }
}

// ========================================
// MODAL FUNCTIONS
// ========================================
function openLoginModal() {
  document.getElementById('loginModal').classList.add('active');
  showLoginInModal();
}
function closeLoginModal() {
  document.getElementById('loginModal').classList.remove('active');
}
function showLoginInModal() {
  document.getElementById('modalLoginForm').style.display = 'block';
  document.getElementById('modalRegisterForm').style.display = 'none';
}
function showRegisterInModal() {
  document.getElementById('modalLoginForm').style.display = 'none';
  document.getElementById('modalRegisterForm').style.display = 'block';
}
// ========================================
// GLOBAL LODING EXAMPLE
// ========================================
async function submitBooking() {
  showLoading('‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏≠‡∏á‡∏™‡∏ô‡∏≤‡∏°...');
  
  try {
    await bookingRef.set(bookingData);
    hideLoading();
    showToast('‚úÖ ‡∏à‡∏≠‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!');
  } catch (error) {
    hideLoading();
    showToast('‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î', 'error');
  }
}

// ========================================
// bUTTON LOADING SYSTEM
// ========================================
async function handleLogin() {
  const loginBtn = document.getElementById('loginBtn');
  LoadingSystem.showButton(loginBtn, '‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö');
  
  try {
    await auth.signInWithEmailAndPassword(email, password);
    LoadingSystem.hideButton(loginBtn);
    showToast('‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!', 'success');
  } catch (error) {
    LoadingSystem.hideButton(loginBtn);
    showToast('‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', 'error');
  }
}

// ========================================
// RATE LIMITER CLASS
// ========================================
class RateLimiter {
  constructor(maxCalls, timeWindow, message = null) {
    this.maxCalls = maxCalls;
    this.timeWindow = timeWindow; // milliseconds
    this.calls = [];
    this.message = message || `‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏≠ ${timeWindow/1000} ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ ‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏≥‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á`;
  }
  
  canCall() {
    const now = Date.now();
    
    // ‡∏•‡∏ö calls ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πà‡∏≤‡πÄ‡∏Å‡∏¥‡∏ô‡∏Å‡∏ß‡πà‡∏≤ timeWindow
    this.calls = this.calls.filter(timestamp => now - timestamp < this.timeWindow);
    
    if (this.calls.length >= this.maxCalls) {
      return false;
    }
    
    this.calls.push(now);
    return true;
  }
  
  tryCall(callback) {
    if (this.canCall()) {
      return callback();
    } else {
      showToast(this.message, 'warning');
      return null;
    }
  }
  
  reset() {
    this.calls = [];
  }
  
  getRemainingTime() {
    if (this.calls.length === 0) return 0;
    
    const now = Date.now();
    const oldestCall = Math.min(...this.calls);
    const remaining = this.timeWindow - (now - oldestCall);
    
    return Math.max(0, Math.ceil(remaining / 1000)); // seconds
  }
}

// ========================================
// RATE LIMITER INSTANCES
const RateLimiters = {
  booking: new RateLimiter(3, 10000, '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏≠ 10 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ ‡∏Å‡πà‡∏≠‡∏ô‡∏à‡∏≠‡∏á‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á'),
  login: new RateLimiter(5, 60000, '‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏° login ‡∏°‡∏≤‡∏Å‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏≠ 1 ‡∏ô‡∏≤‡∏ó‡∏µ'),
  payment: new RateLimiter(2, 5000, '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏≠ 5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ ‡∏Å‡πà‡∏≠‡∏ô‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏•‡∏¥‡∏õ‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á'),
  cancel: new RateLimiter(3, 30000, '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏≠ 30 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ ‡∏Å‡πà‡∏≠‡∏ô‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á')
};

// ========================================
// RATE LIMITER EXAMPLES
// ========================================

// ‚úÖ ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 1: ‡πÉ‡∏ä‡πâ canCall
async function submitBooking() {
  if (!RateLimiters.booking.canCall()) {
    const remaining = RateLimiters.booking.getRemainingTime();
    showToast(`‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏≠ ${remaining} ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ ‡∏Å‡πà‡∏≠‡∏ô‡∏à‡∏≠‡∏á‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á`, 'warning');
    return;
  }
  
  showLoading('‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏≠‡∏á‡∏™‡∏ô‡∏≤‡∏°...');
  // ... proceed with booking
}

// ‚úÖ ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 2: ‡πÉ‡∏ä‡πâ tryCall
function handleLogin() {
  RateLimiters.login.tryCall(async () => {
    showLoading('‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö...');
    await auth.signInWithEmailAndPassword(email, password);
    hideLoading();
    showToast('‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!', 'success');
  });
}

// ‚úÖ ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 3: ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏´‡∏•‡∏±‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
async function submitBooking() {
  if (!RateLimiters.booking.canCall()) return;
  
  try {
    await bookingRef.set(bookingData);
    RateLimiters.booking.reset(); // Reset ‡∏´‡∏•‡∏±‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
    showToast('‡∏à‡∏≠‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!', 'success');
  } catch (error) {
    showToast('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î', 'error');
  }
}

// ========================================
// VALIDATION FUNCTIONS
// ========================================
const Validator = {
  // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•
  name(value) {
    if (!value || value.trim().length < 2) {
      return '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• (‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 2 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£)';
    }
    if (value.trim().length > 100) {
      return '‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•‡∏¢‡∏≤‡∏ß‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ (‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 100 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£)';
    }
    return null;
  },
  
  // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£
  phone(value) {
    if (!value) {
      return '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå';
    }
    
    // ‡∏•‡∏ö spaces, dashes
    const cleaned = value.replace(/[\s-]/g, '');
    
    // ‡∏ï‡πâ‡∏≠‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏ï‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢ 0 ‡πÅ‡∏•‡∏∞‡∏°‡∏µ 10 ‡∏´‡∏•‡∏±‡∏Å
    if (!/^0[0-9]{9}$/.test(cleaned)) {
      return '‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (‡∏ï‡πâ‡∏≠‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏ï‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢ 0 ‡πÅ‡∏•‡∏∞‡∏°‡∏µ 10 ‡∏´‡∏•‡∏±‡∏Å)';
    }
    
    return null;
  },
  
  // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö email
  email(value) {
    if (!value) {
      return '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏≠‡∏µ‡πÄ‡∏°‡∏•';
    }
    
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!emailRegex.test(value)) {
      return '‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á';
    }
    
    return null;
  },
  
  // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô
  password(value) {
    if (!value) {
      return '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô';
    }
    
    if (value.length < 6) {
      return '‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 6 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£';
    }
    
    return null;
  },
  
  // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏ô‡∏≤‡∏°
  field(value) {
    if (!value) {
      return '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏ô‡∏≤‡∏°';
    }
    return null;
  },
  
  // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà
  date(value) {
    if (!value) {
      return '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà';
    }
    
    const selectedDate = new Date(value);
    const today = new Date();
    today.setHours(0, 0, 0, 0);
    
    if (selectedDate < today) {
      return '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ô‡∏≠‡∏î‡∏µ‡∏ï‡πÑ‡∏î‡πâ';
    }
    
    const maxDate = new Date();
    maxDate.setDate(maxDate.getDate() + 30);
    
    if (selectedDate > maxDate) {
      return '‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏à‡∏≠‡∏á‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤‡πÑ‡∏î‡πâ‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 30 ‡∏ß‡∏±‡∏ô';
    }
    
    return null;
  },
  
  // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏ß‡∏•‡∏≤
  time(value) {
    if (!value) {
      return '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏ß‡∏•‡∏≤';
    }
    return null;
  },
  
  // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÑ‡∏ü‡∏•‡πå
  file(file, maxSizeMB = 5) {
    if (!file) {
      return '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå';
    }
    
    const allowedTypes = ['image/jpeg', 'image/jpg', 'image/png'];
    if (!allowedTypes.includes(file.type)) {
      return '‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÑ‡∏ü‡∏•‡πå JPG ‡πÅ‡∏•‡∏∞ PNG ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô';
    }
    
    const maxSize = maxSizeMB * 1024 * 1024;
    if (file.size > maxSize) {
      return `‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏ç‡πà‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ (‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô ${maxSizeMB} MB)`;
    }
    
    return null;
  },
  
  // Validate form ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
  form(data) {
    const errors = {};
    
    Object.keys(data).forEach(field => {
      if (this[field]) {
        const error = this[field](data[field]);
        if (error) {
          errors[field] = error;
        }
      }
    });
    
    return Object.keys(errors).length > 0 ? errors : null;
  }
};

// Helper function ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á errors
function showValidationErrors(errors) {
  if (!errors) return;
  
  const errorMessages = Object.values(errors).join('\n');
  showToast(errorMessages, 'error', 5000);
  
  // Highlight fields with errors
  Object.keys(errors).forEach(field => {
    const input = document.getElementById(field);
    if (input) {
      input.classList.add('error');
      input.addEventListener('focus', () => input.classList.remove('error'), { once: true });
    }
  });
}
// ========================================
// SLIDER FUNCTIONS
// ========================================
function startSlider() {
  slideInterval = setInterval(() => changeSlide(1), 4000);
}

function stopSlider() {
  clearInterval(slideInterval);
}

function showSlide(index) {
  const slides = document.querySelectorAll(".slide");
  const dots = document.querySelectorAll(".dot");

  if (index >= slides.length) currentSlideIndex = 0;
  if (index < 0) currentSlideIndex = slides.length - 1;

  slides.forEach((slide) => slide.classList.remove("active"));
  dots.forEach((dot) => dot.classList.remove("active"));

  slides[currentSlideIndex].classList.add("active");
  dots[currentSlideIndex].classList.add("active");
}

function changeSlide(direction) {
  currentSlideIndex += direction;
  const slides = document.querySelectorAll(".slide");

  if (currentSlideIndex >= slides.length) currentSlideIndex = 0;
  else if (currentSlideIndex < 0) currentSlideIndex = slides.length - 1;

  showSlide(currentSlideIndex);
  stopSlider();
  startSlider();
}

function currentSlide(index) {
  currentSlideIndex = index;
  showSlide(currentSlideIndex);
  stopSlider();
  startSlider();
}

// ========================================
// GALLERY FUNCTIONS
// ========================================
function changeGalleryImage(direction) {
  currentGalleryIndex += direction;
  
  if (currentGalleryIndex < 0) currentGalleryIndex = galleryImages.length - 1;
  else if (currentGalleryIndex >= galleryImages.length) currentGalleryIndex = 0;
  
  updateGalleryDisplay();
}

function selectGalleryImage(index) {
  currentGalleryIndex = index;
  updateGalleryDisplay();
}

function updateGalleryDisplay() {
  document.getElementById('galleryMainImage').src = galleryImages[currentGalleryIndex];
  document.getElementById('currentImageNumber').textContent = currentGalleryIndex + 1;
  document.getElementById('totalImages').textContent = galleryImages.length;
  
  const thumbnails = document.querySelectorAll('.gallery-thumbnail');
  thumbnails.forEach((thumb, index) => {
    if (index === currentGalleryIndex) thumb.classList.add('active');
    else thumb.classList.remove('active');
  });
}

document.addEventListener('keydown', (e) => {
  const gallerySection = document.getElementById('gallerySection');
  if (gallerySection && isInViewport(gallerySection)) {
    if (e.key === 'ArrowLeft') changeGalleryImage(-1);
    else if (e.key === 'ArrowRight') changeGalleryImage(1);
  }
});

function isInViewport(element) {
  const rect = element.getBoundingClientRect();
  return (
    rect.top >= 0 &&
    rect.left >= 0 &&
    rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&
    rect.right <= (window.innerWidth || document.documentElement.clientWidth)
  );
}

// ========================================
// TIME SLOTS FUNCTIONS
// ========================================
function  initializeTimeSlots() {
  const timeSlots = document.querySelectorAll('.time-slot-btn');
  
  timeSlots.forEach(btn => {
    let touchHandled = false;
    
    // ‚úÖ TOUCHEND (Mobile)
    btn.addEventListener('touchend', function(e) {
      e.preventDefault();
      e.stopPropagation();
      
      if (this.classList.contains('booked')) {
        alert('‚ùå ‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏µ‡πâ‡∏ñ‡∏π‡∏Å‡∏à‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏∑‡πà‡∏ô');
        return;
      }
      
      touchHandled = true;
      selectTime(this);
      setTimeout(() => { touchHandled = false; }, 300);
    }, { passive: false });
    
    // ‚úÖ CLICK (Desktop fallback)
    btn.addEventListener('click', function(e) {
      // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô ghost click
      if (touchHandled) {
        e.preventDefault();
        return;
      }
      
      if (this.classList.contains('booked')) {
        alert('‚ùå ‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏µ‡πâ‡∏ñ‡∏π‡∏Å‡∏à‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏∑‡πà‡∏ô');
        return;
      }
      
      selectTime(this);
    });
  });
}

function selectTime(element) {
  if (element.classList.contains('booked')) return;
  
  const timeSlots = document.querySelectorAll(".time-slot-btn");
  timeSlots.forEach((slot) => slot.classList.remove("selected"));
  element.classList.add("selected");
  selectedTimeSlot = element.getAttribute('data-time');
}

function resetTimeSlots() {
  const timeSlots = document.querySelectorAll('.time-slot-btn');
  timeSlots.forEach(btn => {
    btn.classList.remove('available', 'booked', 'selected');
    btn.disabled = false;
    const badge = btn.querySelector('.status-badge');
    if (badge) badge.remove();
  });
}

function checkAvailability() {
  if (currentAvailabilityCheck && typeof currentAvailabilityCheck.off === 'function') {
    currentAvailabilityCheck.off();
  }
  currentAvailabilityCheck = null;

  const field = document.getElementById('fieldSelect').value;
  const date = document.getElementById('dateSelect').value;

  if (!field || !date) {
    resetTimeSlots();
    return;
  }

  const statusDiv = document.getElementById('availabilityStatus');
  statusDiv.style.display = 'block';
  statusDiv.className = 'availability-notice checking';
  statusDiv.innerHTML = '<strong>‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏™‡∏ô‡∏≤‡∏°...</strong>';

  const timeoutId = setTimeout(() => {
    statusDiv.innerHTML = '<strong style="color: #ef4444;">‚ö†Ô∏è ‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏•‡πà‡∏≤‡∏ä‡πâ‡∏≤ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</strong>';
  }, 10000);

  const query = database.ref('bookings').orderByChild('field').equalTo(field);
  currentAvailabilityCheck = query;

  query.once('value')
    .then((snapshot) => {
      clearTimeout(timeoutId);
      if (currentAvailabilityCheck !== query) {
        console.log('‚ö†Ô∏è Request ‡∏ñ‡∏π‡∏Å‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÅ‡∏•‡πâ‡∏ß');
        return;
      }
      
      const bookedTimes = [];
      snapshot.forEach((child) => {
        const booking = child.val();
        if (booking.date === date && booking.bookingStatus !== 'cancelled') {
          bookedTimes.push(booking.time);
        }
      });
    
      updateTimeSlotAvailability(bookedTimes);
      statusDiv.style.display = 'none';
      currentAvailabilityCheck = null;
    })
    .catch((error) => {
      clearTimeout(timeoutId);
      if (currentAvailabilityCheck !== query) return;

      console.error("Error checking availability:", error);
      statusDiv.className = 'availability-notice';
      statusDiv.style.display = 'block';
      statusDiv.innerHTML = '<strong style="color: #ef4444;">‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</strong>';
      currentAvailabilityCheck = null;
    });  
}

function updateTimeSlotAvailability(bookedTimes) {
  const timeSlots = document.querySelectorAll('.time-slot-btn');
  const bookedTimesSet = new Set(bookedTimes); // ‚úÖ O(1) lookup
  
  timeSlots.forEach(btn => {
    const time = btn.getAttribute('data-time');
    
    btn.classList.remove('available', 'booked', 'selected');
    const existingBadge = btn.querySelector('.status-badge');
    if (existingBadge) existingBadge.remove();

    if (bookedTimesSet.has(time)) { 
      btn.classList.add('booked');
      btn.disabled = true;
      const badge = document.createElement('span');
      badge.className = 'status-badge';
      badge.textContent = '‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏á';
      btn.appendChild(badge);
    } else {
      btn.classList.add('available');
      btn.disabled = false;
      const badge = document.createElement('span');
      badge.className = 'status-badge';
      badge.textContent = '‡∏ß‡πà‡∏≤‡∏á';
      btn.appendChild(badge);
    }
  });
}

function resetBookingForm() {
  document.getElementById('fieldSelect').value = '';
  document.getElementById('dateSelect').value = '';
  selectedTimeSlot = null;
  resetTimeSlots();
}

// ========================================
// AUTH FUNCTIONS
// ========================================
function handleLogin(e) {
  e.preventDefault();
  const username = document.getElementById("modalLoginUsername").value;
  const password = document.getElementById("modalLoginPassword").value;
  const email = username + "@prijitsport.com";
  
  auth.signInWithEmailAndPassword(email, password)
    .then(userCredential => {
      return database.ref('users/' + userCredential.user.uid).once('value');
    })
   .then(snapshot => {
      currentUser = { uid: auth.currentUser.uid, ...snapshot.val() };
      document.getElementById("currentUser").textContent = currentUser.fullname;
      document.getElementById("loginNavBtn").style.display = "none";
      document.getElementById("userInfo").style.display = "flex";
      closeLoginModal();
      showToast("‚úÖ ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!", 'success');
    })
    .catch(error => {
      showToast("‚ùå ‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á", 'error');
    });
}

function handleRegister(e) {
  e.preventDefault();
  const username = document.getElementById("modalRegUsername").value;
  const fullname = document.getElementById("modalRegFullname").value;
  const phone = document.getElementById("modalRegPhone").value;
  const password = document.getElementById("modalRegPassword").value;
  const email = username + "@prijitsport.com";
  
  auth.createUserWithEmailAndPassword(email, password)
    .then(userCredential => {
      return database.ref('users/' + userCredential.user.uid).set({
        username, fullname, phone,
        createdAt: new Date().toISOString()
      });
    })
 .then(() => {
      showToast("‚úÖ ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!", 'success');
      e.target.reset();
      showLoginInModal();
    })
    .catch(error => {
      if (error.code === 'auth/email-already-in-use') {
        showToast("‚ùå ‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß", 'error');
      } else {
        showToast("‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: " + error.message, 'error');
      }
    });
}

function handleLogout() {
  if (confirm("‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?")) {
    auth.signOut().then(() => {
      currentUser = null;
      document.getElementById("loginNavBtn").style.display = "inline-block";
      document.getElementById("userInfo").style.display = "none";
      showToast("‚úÖ ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢", 'success');
    });
  }
}


// ========================================
// BOOKING FUNCTIONS
// ========================================
function confirmBooking() {
  if (!currentUser) {
    showToast('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤ Login ‡∏Å‡πà‡∏≠‡∏ô‡∏à‡∏≠‡∏á‡∏™‡∏ô‡∏≤‡∏°', 'warning', 4000);
    setTimeout(() => openLoginModal(), 500);
    return;
  }

  const field = document.getElementById("fieldSelect").value;
  const date = document.getElementById("dateSelect").value;

  if (!field || !date || !selectedTimeSlot) {
    showToast("‚ùå ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô", 'error');
    return;
  }
  const selectedDate = new Date(date);
  const today = new Date();
  today.setHours(0, 0, 0, 0);

  if (selectedDate < today) {
    alert("‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏à‡∏≠‡∏á‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÑ‡∏î‡πâ");
    return;
  }
  
  const maxDate = new Date(today);
  maxDate.setDate(maxDate.getDate() + 30);
  if (selectedDate > maxDate) {
    alert("‚ùå ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏à‡∏≠‡∏á‡πÑ‡∏î‡πâ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 30 ‡∏ß‡∏±‡∏ô‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô");
    return;
  }

  let totalPrice = 0;
  const hour = parseInt(selectedTimeSlot.split(":")[0]);

  if (field.includes("‡∏™‡∏ô‡∏≤‡∏° 1") || field.includes("‡∏™‡∏ô‡∏≤‡∏° 2") || field.includes("‡∏™‡∏ô‡∏≤‡∏° 3")) {
    totalPrice = hour >= 18 ? 1200 : 1000;
  } else if (field.includes("‡∏™‡∏ô‡∏≤‡∏° 4")) {
    totalPrice = hour >= 18 ? 1300 : 1100;
  } else if (field.includes("‡∏™‡∏ô‡∏≤‡∏° 5")) {
    totalPrice= hour >= 18 ? 1100 : 900;
  } else if (field.includes("‡∏™‡∏ô‡∏≤‡∏° 6")) {
    totalPrice = hour >= 18 ? 900 : 700;
  }

  const depositAmount = Math.round(totalPrice * DEPOSIT_PERCENTAGE);
  const remainingAmount = totalPrice - depositAmount;

  currentBookingData = {
    field: field,
    date: date,
    time: selectedTimeSlot,
    totalPrice: totalPrice,
    depositAmount: depositAmount,
    remainingAmount: remainingAmount
  };

  const confirmMsg = `üìã ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á:

üìç ‡∏™‡∏ô‡∏≤‡∏°: ${field}
üìÖ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: ${date}
‚è∞ ‡πÄ‡∏ß‡∏•‡∏≤: ${selectedTimeSlot}

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üí∞ ‡∏Ñ‡πà‡∏≤‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: ${totalPrice.toLocaleString()} ‡∏ö‡∏≤‡∏ó
üíµ ‡∏Ñ‡πà‡∏≤‡∏°‡∏±‡∏î‡∏à‡∏≥ 30%: ${depositAmount.toLocaleString()} ‡∏ö‡∏≤‡∏ó
üí∏ ‡∏Ñ‡πà‡∏≤‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠: ${remainingAmount.toLocaleString()} ‡∏ö‡∏≤‡∏ó
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

üë§ ‡∏ú‡∏π‡πâ‡∏à‡∏≠‡∏á: ${currentUser.fullname}
üìû ‡πÄ‡∏ö‡∏≠‡∏£‡πå: ${currentUser.phone}

‚ö†Ô∏è ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç:
- ‡∏ä‡∏≥‡∏£‡∏∞‡∏Ñ‡πà‡∏≤‡∏°‡∏±‡∏î‡∏à‡∏≥ ${depositAmount.toLocaleString()} ‡∏ö‡∏≤‡∏ó‡∏ú‡πà‡∏≤‡∏ô QR Code
- ‡∏°‡∏≤‡∏ï‡∏≤‡∏°‡∏ô‡∏±‡∏î = ‡∏Ñ‡∏∑‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏°‡∏±‡∏î‡∏à‡∏≥‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
- ‡πÑ‡∏°‡πà‡∏°‡∏≤‡∏ï‡∏≤‡∏°‡∏ô‡∏±‡∏î = ‡∏£‡∏¥‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏°‡∏±‡∏î‡∏à‡∏≥

‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏ï‡πà‡∏≠?`;
  
  if (!confirm(confirmMsg)) return;

  showPaymentModal();
}

function showPaymentModal() {
  const data = currentBookingData;

  const modalHTML = `
    <div id="paymentModal" class="payment-modal active">
      <div class="payment-content">
        <div class="payment-header">
          <h2>üí≥ ‡∏ä‡∏≥‡∏£‡∏∞‡∏Ñ‡πà‡∏≤‡∏°‡∏±‡∏î‡∏à‡∏≥</h2>
          <p>‡∏à‡∏≠‡∏á‡∏™‡∏ô‡∏≤‡∏° ${data.field}</p>
        </div>

        <div class="payment-summary">
          <div class="summary-row">
            <span class="summary-label">üíµ ‡∏Ñ‡πà‡∏≤‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î:</span>
            <span class="summary-value">${data.totalPrice.toLocaleString()} ‡∏ö‡∏≤‡∏ó</span>
          </div>
          <div class="summary-row">
            <span class="summary-label">üìç ‡∏Ñ‡πà‡∏≤‡∏°‡∏±‡∏î‡∏à‡∏≥ 30%:</span>
            <span class="summary-value">${data.depositAmount.toLocaleString()} ‡∏ö‡∏≤‡∏ó</span>
          </div>
          <div class="summary-row">
            <span class="summary-label">üí∏ ‡∏Ñ‡πà‡∏≤‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠:</span>
            <span class="summary-value">${data.remainingAmount.toLocaleString()} ‡∏ö‡∏≤‡∏ó</span>
          </div>
          <div class="summary-row">
            <span class="summary-label">üí∞ ‡∏ï‡πâ‡∏≠‡∏á‡∏ä‡∏≥‡∏£‡∏∞‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ:</span>
            <span class="summary-value" style="color: #22c55e; font-size: 1.3em;">${data.depositAmount.toLocaleString()} ‡∏ö‡∏≤‡∏ó</span>
          </div>
        </div>

        <div class="deposit-highlight">
          <p><strong>üì± ‡∏™‡πÅ‡∏Å‡∏ô QR Code ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡∏≥‡∏£‡∏∞‡∏Ñ‡πà‡∏≤‡∏°‡∏±‡∏î‡∏à‡∏≥</strong></p>
          <p style="font-size: 0.95em; color: #16a34a; margin-top: 5px;">
            ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏û‡∏µ‡∏¢‡∏á ${data.depositAmount.toLocaleString()} ‡∏ö‡∏≤‡∏ó ‡∏Ñ‡πà‡∏≤‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏à‡πà‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏ô‡∏≤‡∏°
          </p>
        </div>

        <div class="qr-code-container">

          <div class="qr-code-image" style="position: relative; min-height: 300px;">
            <!-- Loading State -->
            <div id="qrLoading" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; color: #6b7280;">
              <div style="width: 40px; height: 40px; border: 3px solid #f3f4f6; border-top-color: #3b82f6; border-radius: 50%; animation: spin 0.8s linear infinite; margin: 0 auto 10px;"></div>
              <p style="font-size: 0.9em;">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î QR Code...</p>
            </div>
            <!-- QR Code Image -->
            <img id="qrCodeCanvas" src="qr-promptpay.png" alt="QR Code PromptPay" 
                style="width: 100%; height: 100%; object-fit: contain; display: none;"
                onload="this.style.display='block'; var loader = document.getElementById('qrLoading'); if (loader) loader.remove();"
                onerror="handleQRError(this)">
          </div>




        </div>
        
        <div class="payment-info">
          <p><strong>üí∞ ‡∏¢‡∏≠‡∏î‡∏ä‡∏≥‡∏£‡∏∞:</strong> ${data.depositAmount.toLocaleString()} ‡∏ö‡∏≤‡∏ó</p>
          <p><strong>üì± ‡πÄ‡∏•‡∏Ç‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏û‡∏¢‡πå:</strong> 1103100835163</p>
          <p><strong>üè¢ ‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ç‡∏ä‡∏µ:</strong> ‡∏ô‡∏≤‡∏¢ ‡∏û‡∏±‡∏™‡∏Å‡∏£ ‡∏£‡∏≤‡∏ä‡∏ä‡∏°‡∏†‡∏π</p>
          <p><strong>üÜî Ref:</strong> ${data.field.replace('‡∏™‡∏ô‡∏≤‡∏° ', 'F')}-${data.date.replace(/-/g, '')}</p>
        </div>

        <div class="upload-section">
          <label class="upload-label">üì§ ‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏•‡∏¥‡∏õ‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</label>
          <div class="upload-area" id="uploadArea" onclick="document.getElementById('slipInput').click()">
            <p>üìé ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏™‡∏•‡∏¥‡∏õ</p>
            <p style="font-size: 0.9em; color: #6b7280; margin-top: 10px;">
              ‡∏´‡∏£‡∏∑‡∏≠‡∏•‡∏≤‡∏Å‡πÑ‡∏ü‡∏•‡πå‡∏°‡∏≤‡∏ß‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà<br>
              ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö: JPG, PNG (‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏î‡∏µ‡∏¢‡∏ß)
            </p>
          </div>
          <input type="file" id="slipInput" accept="image/*" style="display: none;" onchange="handleSlipUpload(event)">
          <img id="slipPreview" style="display: none;">
        </div>

        <div class="payment-terms">
          <h4>‚ö†Ô∏è ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏°‡∏±‡∏î‡∏à‡∏≥</h4>
          <ul>
            <li>‚úÖ ‡∏°‡∏≤‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏±‡∏î: ‡∏Ñ‡∏∑‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏°‡∏±‡∏î‡∏à‡∏≥ ${data.depositAmount.toLocaleString()} ‡∏ö‡∏≤‡∏ó ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</li>
            <li>‚ùå ‡πÑ‡∏°‡πà‡∏°‡∏≤‡∏ï‡∏≤‡∏°‡∏ô‡∏±‡∏î: ‡∏£‡∏¥‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏°‡∏±‡∏î‡∏à‡∏≥‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</li>
            <li>üìå ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏°‡∏≤‡∏ñ‡∏∂‡∏á‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏ß‡∏•‡∏≤ 15 ‡∏ô‡∏≤‡∏ó‡∏µ</li>
          </ul>
        </div>

        <div class="payment-buttons">
          <button class="cancel-payment-btn" onclick="closePaymentModal()">‚ùå ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
          <button class="upload-slip-btn" id="confirmPaymentBtn" disabled onclick="submitPayment()">
            ‚¨ÜÔ∏è ‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏•‡∏¥‡∏õ
          </button>
        </div>

        <div class="timer-warning" id="paymentTimer">
          ‚è∞ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ä‡∏≥‡∏£‡∏∞‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 15 ‡∏ô‡∏≤‡∏ó‡∏µ
        </div>
      </div>
    </div>
  `;

  document.body.insertAdjacentHTML('beforeend', modalHTML);
  generateQRCode(data);
  startPaymentTimer();
  setupDragDrop();
}

function generateQRCode(data) { 
  console.log('‚úÖ QR Code loaded for deposit:', data.depositAmount, '‡∏ö‡∏≤‡∏ó');
}

function handleQRError(img) {
  img.style.display = 'none';
  const container = img.parentElement;
  container.innerHTML = `
    <div style="padding: 20px; text-align: center; color: #ef4444;">
      <p style="font-size: 1.2em; margin-bottom: 10px;">‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏û‡∏ö QR Code</p>
      <p style="font-size: 0.9em; color: #6b7280;">
        ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏õ‡∏ó‡∏µ‡πà:<br>
        <strong style="color: #1f2937;">‡πÄ‡∏•‡∏Ç‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏û‡∏¢‡πå: 1103100835163</strong><br>
        <strong style="color: #1f2937;">‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ç‡∏ä‡∏µ: ‡∏ô‡∏≤‡∏¢ ‡∏û‡∏±‡∏™‡∏Å‡∏£ ‡∏£‡∏≤‡∏ä‡∏ä‡∏°‡∏†‡∏π</strong>
      </p>
    </div>
  `;
  console.warn('‚ö†Ô∏è QR Code image not available, showing PromptPay details instead');
}

function handleSlipUpload(event) {
  const file = event.target.files[0];
  
  if (!file) return;
  
  const validTypes = ['image/jpeg', 'image/jpg', 'image/png'];
  if (!validTypes.includes(file.type)) {
    alert('‚ùå ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå‡∏†‡∏≤‡∏û‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô (JPG, PNG)');
    event.target.value = '';
    return;
  }
  
  if (file.size > MAX_FILE_SIZE_BYTES) {
    alert('‚ùå ‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏ç‡πà‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ! ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå‡∏Ç‡∏ô‡∏≤‡∏î‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô ' + MAX_FILE_SIZE_MB + ' MB\n' + 
          '‡∏Ç‡∏ô‡∏≤‡∏î‡πÑ‡∏ü‡∏•‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì: ' + (file.size / 1024 / 1024).toFixed(2) + ' MB');
    event.target.value = '';
    return;
  }
  
  uploadedSlipFile = file;
  const reader = new FileReader();
  reader.onload = function(e) {
    const preview = document.getElementById('slipPreview');
    preview.src = e.target.result;
    preview.style.display = 'block';
    document.getElementById('confirmPaymentBtn').disabled = false;
  };
  reader.readAsDataURL(file);
}

function setupDragDrop() {
  const uploadArea = document.getElementById('uploadArea');
  
  const handleDragOver = (e) => {
    e.preventDefault();
    uploadArea.classList.add('dragover');
  };
  
  const handleDragLeave = () => {
    uploadArea.classList.remove('dragover');
  };
  
  const handleDrop = (e) => {
    e.preventDefault();
    uploadArea.classList.remove('dragover');
    
    const file = e.dataTransfer.files[0];
    if (file && file.type.startsWith('image/')) {
      const input = document.getElementById('slipInput');
      const dataTransfer = new DataTransfer();
      dataTransfer.items.add(file);
      input.files = dataTransfer.files;
      handleSlipUpload({ target: input });
    }
  };
  
  // ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° { passive: false } ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ preventDefault()
  // ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: dragover ‡πÅ‡∏•‡∏∞ drop ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ preventDefault() ‡∏à‡∏£‡∏¥‡∏á ‡πÜ
  uploadArea.addEventListener('dragover', handleDragOver, { passive: false });
  uploadArea.addEventListener('dragleave', handleDragLeave, { passive: true });
  uploadArea.addEventListener('drop', handleDrop, { passive: false });
  
  uploadArea._dragHandlers = { handleDragOver, handleDragLeave, handleDrop };
}

function startPaymentTimer() {
  let timeLeft = PAYMENT_TIMEOUT_MINUTES * 60;
  const timerDiv = document.getElementById('paymentTimer');
  
  paymentTimer = setInterval(() => {
    timeLeft--;
    const minutes = Math.floor(timeLeft / 60);
    const seconds = timeLeft % 60;
    
    timerDiv.textContent = `‚è∞ ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏ß‡∏•‡∏≤ ${minutes}:${seconds.toString().padStart(2, '0')} ‡∏ô‡∏≤‡∏ó‡∏µ`;
    
    if (timeLeft <= 0) {
      clearInterval(paymentTimer);
      alert('‚ùå ‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á');
      closePaymentModal();
    }
  }, 1000);
}

function closePaymentModal() {
  clearInterval(paymentTimer);
  cleanupBookingLock();
  
  const uploadArea = document.getElementById('uploadArea');
  if (uploadArea && uploadArea._dragHandlers) {
    uploadArea.removeEventListener('dragover', uploadArea._dragHandlers.handleDragOver);
    uploadArea.removeEventListener('dragleave', uploadArea._dragHandlers.handleDragLeave);
    uploadArea.removeEventListener('drop', uploadArea._dragHandlers.handleDrop);
    delete uploadArea._dragHandlers;
  }

  const modal = document.getElementById('paymentModal');
  if (modal) modal.remove();
  
  currentBookingData = null;
  uploadedSlipFile = null;
}

function cleanupBookingLock() {
  if (currentBookingData) {
    const uniqueKey = `${currentBookingData.field}_${currentBookingData.date}_${currentBookingData.time}`;
    database.ref('booking_locks/' + uniqueKey).remove();
  }
}

window.addEventListener('beforeunload', () => {
  cleanupBookingLock();
});

function submitPayment() {
  if (!uploadedSlipFile) {
    alert('‚ùå ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏•‡∏¥‡∏õ‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô');
    return;
  }

  const btn = document.getElementById('confirmPaymentBtn');
  btn.disabled = true;
  btn.innerHTML = '‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î... <span class="spinner"></span>';
  
  uploadSlipAndCreateBooking();
}

function uploadSlipAndCreateBooking() {
  const data = currentBookingData;
  const reader = new FileReader();
  
  reader.onload = function(e) {
    const slipBase64 = e.target.result;
    
    const bookingRef = database.ref('bookings').push();
    const uniqueKey = `${data.field}_${data.date}_${data.time}`;

    const bookingData = {
      userId: currentUser.uid,
      username: currentUser.fullname,
      phone: currentUser.phone,
      field: data.field,
      date: data.date,
      time: data.time,
      totalPrice: data.totalPrice,
      depositAmount: data.depositAmount,
      remainingAmount: data.remainingAmount,
      depositStatus: 'pending',
      depositSlipUrl: slipBase64,
      depositPaidAt: new Date().toISOString(),
      remainingStatus: 'unpaid',
      remainingPaidAt: null,
      bookingStatus: 'pending_payment',
      checkedInAt: null,
      completedAt: null,
      depositRefunded: false,
      depositRefundedAt: null,
      depositForfeited: false,
      depositForfeitedAt: null,
      field_date_time: uniqueKey,
      createdAt: new Date().toISOString()
    };

    database.ref('booking_locks/' + uniqueKey).transaction((currentData) => {
      if (currentData === null) {
        return { locked: true, timestamp: Date.now() };
      } else {
        return undefined;
      }
    }, (error, committed, snapshot) => {
      if (error) {
        alert('‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ' + error.message);
        document.getElementById('confirmPaymentBtn').disabled = false;
        document.getElementById('confirmPaymentBtn').textContent = '‚¨ÜÔ∏è ‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏•‡∏¥‡∏õ';
      } else if (!committed) {
        alert('‚ùå ‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏µ‡πâ‡∏ñ‡∏π‡∏Å‡∏à‡∏≠‡∏á‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏∑‡πà‡∏ô');
        closePaymentModal();
        checkAvailability();
      } else {
        bookingRef.set(bookingData)
          .then(() => {
            clearInterval(paymentTimer);
            
            alert(`‚úÖ ‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏•‡∏¥‡∏õ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!

üìã ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á: #${bookingRef.key.substr(-6).toUpperCase()}

‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 5 ‡∏ô‡∏≤‡∏ó‡∏µ
‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ú‡πà‡∏≤‡∏ô SMS

üìç ‡∏™‡∏ô‡∏≤‡∏°: ${data.field}
üìÖ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: ${data.date}
‚è∞ ‡πÄ‡∏ß‡∏•‡∏≤: ${data.time}
üí∞ ‡∏°‡∏±‡∏î‡∏à‡∏≥: ${data.depositAmount.toLocaleString()} ‡∏ö‡∏≤‡∏ó ‚úÖ
üí∏ ‡∏Ñ‡πà‡∏≤‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠: ${data.remainingAmount.toLocaleString()} ‡∏ö‡∏≤‡∏ó

‚ö†Ô∏è ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏°‡∏≤‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏±‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏°‡∏±‡∏î‡∏à‡∏≥‡∏Ñ‡∏∑‡∏ô`);
          
            closePaymentModal();
            resetBookingForm();
            document.location.href = '#checkBookingSection';
            updateBookingList();
          })
          .catch((error) => {
            database.ref('booking_locks/' + uniqueKey).remove();
            alert('‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ' + error.message);
            document.getElementById('confirmPaymentBtn').disabled = false;
            document.getElementById('confirmPaymentBtn').textContent = '‚¨ÜÔ∏è ‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏•‡∏¥‡∏õ';
          });
      }
    });
  };

  reader.readAsDataURL(uploadedSlipFile);
}
function updateBookingList() {
  debugLog('üîÑ Updating booking list...');
  
  const bookingListDiv = document.getElementById('bookingList');
  if (!bookingListDiv) {
    console.log('‚ùå bookingList element not found');
    return;
  }

  const user = auth.currentUser;
  if (!user) {
    // ‚úÖ ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ login
    bookingListDiv.innerHTML = `
      <div style="text-align: center; padding: 40px;">
        <p style="color: #6b7280; font-size: 1.1em; margin-bottom: 20px;">
          ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤ Login ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
        </p>
        <button onclick="openLoginModal()" 
                style="background: #22c55e; color: white; padding: 12px 24px; 
                       border: none; border-radius: 8px; font-weight: 600; 
                       cursor: pointer; font-size: 1em;">
          üîê ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
        </button>
      </div>
    `;
    return;
  }
  bookingListDiv.innerHTML = '<p style="text-align: center; color: #666;">‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</p>';
  database.ref('bookings')
    .orderByChild('userId')
    .equalTo(user.uid)
    .once('value')
     .then((snapshot) => {
      debugLog('üìä Snapshot exists:', snapshot.exists());
      
      if (!snapshot.exists()) {
        bookingListDiv.innerHTML = `
          <div style="text-align: center; padding: 40px;">
            <p style="color: #6b7280; font-size: 1.1em;">
              ‚öΩ ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
            </p>
            <p style="color: #9ca3af; margin-top: 10px;">
              ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≠‡∏á‡∏™‡∏ô‡∏≤‡∏°‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢!
            </p>
          </div>
        `;
        return;
      }

      const bookings = [];
      snapshot.forEach((childSnapshot) => {
        const booking = childSnapshot.val();
        booking.id = childSnapshot.key;
        
        // ‡∏Å‡∏£‡∏≠‡∏á: ‡πÑ‡∏°‡πà‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò
        if (booking.bookingStatus !== 'rejected') {
          bookings.push(booking);
        }
      });

      debugLog('üìã Total bookings:', bookings.length);

      if (bookings.length === 0) {
        bookingListDiv.innerHTML = '<p style="text-align: center; color: #666;">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</p>';
        return;
      }

      // ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏°‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
      bookings.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));

      // ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
      bookingListDiv.innerHTML = bookings.map(booking => {
        return generateBookingCard(booking);
      }).join('');
    })
      .catch((error) => {
      console.error('‚ùå Error loading bookings:', error);
      bookingListDiv.innerHTML = `
        <div style="text-align: center; padding: 40px; color: #ef4444;">
          <p style="font-size: 1.1em; margin-bottom: 10px;">
            ‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
          </p>
          <p style="color: #6b7280; font-size: 0.9em;">
            ${error.message}
          </p>
          <button onclick="updateBookingList()" 
                  style="margin-top: 20px; background: #22c55e; color: white; 
                         padding: 10px 20px; border: none; border-radius: 8px; 
                         cursor: pointer;">
            üîÑ ‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà
          </button>
        </div>
      `;
    });
  }

function generateBookingCard(booking) {
  // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÅ‡∏•‡∏∞‡∏™‡∏µ
  let statusColor = '#f59e0b';
  let statusText = '‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö';
  let statusBg = '#fef3c7';
  
  if (booking.bookingStatus === 'approved') {
    statusColor = '#10b981';
    statusText = '‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÅ‡∏•‡πâ‡∏ß ‚úÖ';
    statusBg = '#d1fae5';
  } else if (booking.bookingStatus === 'pending_payment' || booking.bookingStatus === 'pending') {
    statusColor = '#f59e0b';
    statusText = '‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö ‚è≥';
    statusBg = '#fef3c7';
  } else if (booking.bookingStatus === 'confirmed') {
    statusColor = '#3b82f6';
    statusText = '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß';
    statusBg = '#dbeafe';
  } else if (booking.bookingStatus === 'completed') {
    statusColor = '#10b981';
    statusText = '‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô';
    statusBg = '#d1fae5';
  } else if (booking.bookingStatus === 'cancelled') {
    statusColor = '#6b7280';
    statusText = '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÅ‡∏•‡πâ‡∏ß';
    statusBg = '#f3f4f6';
  }

  const formatDate = (dateStr) => {
    if (!dateStr) return '-';
    const date = new Date(dateStr);
    return date.toLocaleDateString('th-TH', { 
      year: 'numeric', 
      month: 'long', 
      day: 'numeric' 
    });
  };

  const formatDateTime = (dateStr) => {
    if (!dateStr) return '-';
    const date = new Date(dateStr);
    return date.toLocaleString('th-TH', { 
      year: 'numeric', 
      month: 'short', 
      day: 'numeric',
      hour: '2-digit',
      minute: '2-digit'
    });
  };

  return `
    <div class="booking-card" style="background: white; border-radius: 12px; padding: 20px; margin-bottom: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); border-left: 4px solid ${statusColor};">
      
      <!-- Header -->
      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
        <h3 style="margin: 0; color: #1f2937; font-size: 18px;">üìã ${booking.field || '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏ô‡∏≤‡∏°'}</h3>
        <span style="background: ${statusBg}; color: ${statusColor}; padding: 6px 12px; border-radius: 20px; font-weight: 600; font-size: 14px;">
          ${statusText}
        </span>
      </div>

      <!-- Info Grid -->
      <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; margin-bottom: 15px;">
        <div>
          <p style="margin: 0; color: #6b7280; font-size: 13px;">üìÖ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏•‡πà‡∏ô</p>
          <p style="margin: 5px 0 0 0; color: #1f2937; font-weight: 600;">${formatDate(booking.date)}</p>
        </div>
        <div>
          <p style="margin: 0; color: #6b7280; font-size: 13px;">‚è∞ ‡πÄ‡∏ß‡∏•‡∏≤</p>
          <p style="margin: 5px 0 0 0; color: #1f2937; font-weight: 600;">${booking.time || '-'}</p>
        </div>
        <div>
          <p style="margin: 0; color: #6b7280; font-size: 13px;">üí∞ ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ß‡∏°</p>
          <p style="margin: 5px 0 0 0; color: #1f2937; font-weight: 600;">‡∏ø${(booking.totalPrice || 0).toLocaleString()}</p>
        </div>
        <div>
          <p style="margin: 0; color: #6b7280; font-size: 13px;">üíµ ‡∏°‡∏±‡∏î‡∏à‡∏≥</p>
          <p style="margin: 5px 0 0 0; color: #10b981; font-weight: 600;">‡∏ø${(booking.depositAmount || 0).toLocaleString()}</p>
        </div>
      </div>

      <!-- Created At -->
      <p style="margin: 10px 0 0 0; color: #9ca3af; font-size: 12px;">
        üìù ‡∏à‡∏≠‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠: ${formatDateTime(booking.createdAt)}
      </p>

      <!-- Actions -->
      ${booking.bookingStatus !== 'cancelled' && booking.bookingStatus !== 'completed' ? `
        <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid #e5e7eb;">
          <button onclick="cancelBooking('${booking.id}')" 
                  style="width: 100%; padding: 10px; background: #ef4444; color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer;">
            ‚ùå ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
          </button>
        </div>
      ` : ''}
    </div>
  `;
}


function cancelBooking(bookingId) {

  if (isCancelling) {
     debugLog('‚è≥ Already cancelling a booking...');
     return;
    }

  if (!confirm("‚ö†Ô∏è ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?\n\n‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏±‡∏ô‡∏ó‡∏µ")) {
    return;
  } 
  isCancelling = true;  
  debugLog('üóëÔ∏è Starting to cancel booking:', bookingId);

  // ‡πÉ‡∏ä‡πâ bookingId ‡∏´‡∏≤‡∏õ‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏Ñ‡∏•‡∏¥‡∏Å
  const cancelBtn = document.getElementById(`cancel-btn-${bookingId}`);
  const originalButtonText = cancelBtn ? cancelBtn.textContent : '‚ùå ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å';

  if (cancelBtn) {
    cancelBtn.textContent = '‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å...';
    cancelBtn.disabled = true;
  }

  const bookingRef = database.ref('bookings/' + bookingId);

  bookingRef.once('value')
    .then((snapshot) => {
      const booking = snapshot.val();

      debugLog('üìã Booking data:', booking);
      
      if (!booking) {
        throw new Error('‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á');
      }

      const currentUser = auth.currentUser;
      if (!currentUser) {
        throw new Error('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤ Login ‡∏Å‡πà‡∏≠‡∏ô‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á');
      }
        
      if (booking.user !== currentUser.user) {
        throw new Error('‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏ô‡∏µ‡πâ');
      }

      const uniqueKey = `${booking.field}_${booking.date}_${booking.time}`;
      debugLog('üîë Lock key:', uniqueKey);

      return Promise.all([
        database.ref('bookings/' + bookingId).remove(),
        database.ref('booking_locks/' + uniqueKey).remove()
      ]);
    })
    .then(() => {
      console.log('‚úÖ Booking cancelled successfully');
      alert("‚úÖ ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß\n\n‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏•‡πâ‡∏ß");
      updateBookingList();
    })
    .catch((error) => {
      console.error('‚ùå Cancel booking error:', error);
      alert("‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: " + error.message);
  
    }).finally(() => {
      isCancelling = false; 

      // ‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏î‡∏¥‡∏°
      if (cancelBtn) {
        cancelBtn.textContent = originalButtonText;
        cancelBtn.disabled = false;
      }
    })
}

// ========================================
// iNITIALIZATION
// ========================================

document.addEventListener("DOMContentLoaded", () => {
  console.log('üéØ DOM ready - initializing...');
  
  // ‚úÖ CRITICAL: Initialize navigation
  initNavigation();
  
  // ‚úÖ Start slider
  startSlider();
  
  // Close modal on background click
  const loginModal = document.getElementById('loginModal');
  if (loginModal) {
    loginModal.addEventListener('click', (e) => {
      if (e.target.id === 'loginModal' && typeof closeLoginModal === 'function') {
        closeLoginModal();
      }
    });
  }
  
  // ESC key
 document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      if (typeof closeLoginModal === 'function') closeLoginModal();
      
      const overlay = document.getElementById('menuOverlay');
      if (overlay && overlay.classList.contains('active')) {
        toggleMobileMenu();
      }
    }
  });
// ========================================
// MOBILE MENU TOGGLE WITH DEBOUNCE
// ========================================

// ========================================
// window RESIZE HANDLER (with debounce for better performance)
// ========================================
const handleResize = debounce(() => {
  if (window.innerWidth > 768) {
    const overlay = document.getElementById("menuOverlay");
    const hamburger = document.getElementById("hamburgerBtn");
    
    if (overlay) overlay.classList.remove("active");
    if (hamburger) hamburger.classList.remove("active");
    document.body.style.overflow = "";
  }
}, 150);

window.addEventListener("resize", handleResize);
});

// ========================================
// TOAST NOTIFICATION SYSTEM
// ========================================
const ToastSystem = {
  container: null,
  
  init() {
    if (!this.container) {
      this.container = document.getElementById('toast-container');
      if (!this.container) {
        this.container = document.createElement('div');
        this.container.id = 'toast-container';
        document.body.appendChild(this.container);
      }
    }
  },
  
  show(message, type = 'success', duration = 3000) {
    this.init();
    
    const icons = {
      success: '‚úÖ',
      error: '‚ùå',
      warning: '‚ö†Ô∏è',
      info: '‚ÑπÔ∏è'
    };
    
    const toast = document.createElement('div');
    toast.className = `toast toast-${type}`;
    toast.innerHTML = `
      <span class="toast-icon">${icons[type]}</span>
      <span class="toast-message">${message}</span>
      <button class="toast-close" onclick="this.parentElement.remove()">√ó</button>
    `;
    
    this.container.appendChild(toast);
    
    // Trigger animation
    setTimeout(() => toast.classList.add('show'), 10);
    
    // Auto remove
    setTimeout(() => {
      toast.classList.remove('show');
      setTimeout(() => toast.remove(), 300);
    }, duration);
    
    return toast;
  },
  
  success(message, duration) {
    return this.show(message, 'success', duration);
  },
  
  error(message, duration) {
    return this.show(message, 'error', duration);
  },
  
  warning(message, duration) {
    return this.show(message, 'warning', duration);
  },
  
  info(message, duration) {
    return this.show(message, 'info', duration);
  }
};

// Shorthand functions
function showToast(message, type = 'success', duration = 3000) {
  return ToastSystem.show(message, type, duration);
}

// ========================================
// GLOBAL LOADING OVERLAY SYSTEM
// ========================================
const LoadingSystem = {
  overlay: null,
  loadingText: null,
  
  init() {
    if (!this.overlay) {
      this.overlay = document.getElementById('global-loading');
      if (!this.overlay) {
        this.overlay = document.createElement('div');
        this.overlay.id = 'global-loading';
        this.overlay.innerHTML = `
          <div class="loading-overlay">
            <div class="spinner"></div>
            <p class="loading-text">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</p>
          </div>
        `;
        document.body.appendChild(this.overlay);
      }
      this.loadingText = this.overlay.querySelector('.loading-text');
    }
  },
  
  show(message = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...') {
    this.init();
    if (this.loadingText) {
      this.loadingText.textContent = message;
    }
    this.overlay.classList.add('active');
    document.body.style.overflow = 'hidden';
  },
  
  hide() {
    if (this.overlay) {
      this.overlay.classList.remove('active');
      document.body.style.overflow = '';
    }
  },
  
  // ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°
  showButton(button, originalText) {
    button.dataset.originalText = originalText || button.textContent;
    button.textContent = '';
    button.classList.add('btn-loading');
    button.disabled = true;
  },
  
  hideButton(button) {
    button.textContent = button.dataset.originalText || '‡∏ï‡∏Å‡∏•‡∏á';
    button.classList.remove('btn-loading');
    button.disabled = false;
  }
};

// Shorthand functions
function showLoading(message) {
  LoadingSystem.show(message);
}

function hideLoading() {
  LoadingSystem.hide();
}




// ========================================
// FIREBASE INITIALIZATION
// ========================================
let firebaseInitRetryCount = 0;
const MAX_FIREBASE_RETRIES = 50;

function initializeFirebase() {
  firebaseInitRetryCount++;
  if (window.firebaseLoadError) {
    console.error('‚ùå Firebase scripts failed to load (network error)');
    alert('‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î Firebase scripts ‡πÑ‡∏î‡πâ\n\n‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏õ‡πÑ‡∏î‡πâ:\n- Network ‡πÑ‡∏°‡πà‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£\n- Firewall ‡∏ö‡∏•‡πá‡∏≠‡∏Å www.gstatic.com\n- ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏õ‡∏¥‡∏î Console (F12) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î');
    return;
  }
  
  if (typeof firebase === 'undefined') {
    if (firebaseInitRetryCount > MAX_FIREBASE_RETRIES) {
      console.error('‚ùå Firebase scripts failed to load after ' + (MAX_FIREBASE_RETRIES * 100 / 1000) + ' seconds');
      alert('‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Firebase ‡πÑ‡∏î‡πâ\n\n‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö:\n- ‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡∏≠‡∏¥‡∏ô‡πÄ‡∏ó‡∏≠‡∏£‡πå‡πÄ‡∏ô‡πá‡∏ï\n- Firewall/Proxy settings\n- Browser console (F12) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î');
      return;
    }
    
    if (firebaseInitRetryCount === 1 || firebaseInitRetryCount % 10 === 0) {
      console.log('‚è≥ Waiting for Firebase scripts... (' + firebaseInitRetryCount + '/' + MAX_FIREBASE_RETRIES + ')');
    }
    setTimeout(initializeFirebase, 100);
    return;
  }

  try {
    const firebaseConfig = {
      apiKey: "AIzaSyB6jVc8qcyS9zIJvfi-E1BL7BaxrUorO7w",
      authDomain: "prijit-sport.firebaseapp.com",
      databaseURL: "https://prijit-sport-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "prijit-sport",
      storageBucket: "prijit-sport.firebasestorage.app",
      messagingSenderId: "19782245186",
      appId: "1:19782245186:web:8ff3e2e17a214edc3546db"
    };

    firebase.initializeApp(firebaseConfig);
    auth = firebase.auth();
    database = firebase.database();
    console.log("‚úÖ Firebase ready! (loaded in " + (firebaseInitRetryCount * 100) + "ms)");
    
    // Initialize time slots after Firebase is ready
    initializeTimeSlots();
    console.log("‚úÖ Time slots initialized");
    
    auth.onAuthStateChanged((user) => {
      if (user) {
        database.ref('users/' + user.uid).once('value')
          .then((snapshot) => {
            currentUser = {
              uid: user.uid,
              ...snapshot.val()
            };
            
            document.getElementById("currentUser").textContent = currentUser.fullname;
            document.getElementById("loginNavBtn").style.display = "none";
            document.getElementById("userInfo").style.display = "flex";
            
            updateBookingList();
            console.log("‚úÖ Session restored:", currentUser.fullname);
          })
          .catch((error) => {
            console.error("‚ùå Failed to load user:", error);
          });
      } else {
        currentUser = null;
        document.getElementById("loginNavBtn").style.display = "inline-block";
        document.getElementById("userInfo").style.display = "none";
      }
    });
    
    // ========================================
    // STAFF GALLERY FUNCTIONS
    // ========================================
    function loadStaffGallery() {
      const container = document.getElementById('staffGalleryContainer');
      if (!container) return;
      
      database.ref('gallery').orderByChild('order').on('value', (snapshot) => {
        container.innerHTML = '';
        
        if (!snapshot.exists()) {
          container.innerHTML = '<div class="content-loading-state">üì∑ ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</div>';
          return;
        }

        const items = [];
        snapshot.forEach((child) => {
          items.push({ id: child.key, ...child.val() });
        });

        items.sort((a, b) => (a.order || 0) - (b.order || 0));

        items.forEach(item => {
          const card = document.createElement('div');
          card.className = 'staff-gallery-card';
          card.onclick = () => openStaffModal(item.url);
          card.innerHTML = `
            <img src="${item.url}" alt="${item.title}" loading="lazy">
            <div class="staff-gallery-card-title">${item.title}</div>
          `;
          container.appendChild(card);
        });
      });
    }

    function openStaffModal(url) {
      const modal = document.getElementById('staffGalleryModal');
      const modalImg = document.getElementById('staffGalleryModalImg');
      
      if (!modal || !modalImg) {
        console.error('‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö Modal elements');
        return;
      }
      
      // Preload image ‡∏Å‡πà‡∏≠‡∏ô‡πÅ‡∏™‡∏î‡∏á ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏û‡∏£‡∏¥‡∏ö
      const img = new Image();
      img.onload = function() {
        modalImg.src = url;
      };
      img.onerror = function() {
        console.warn('‚ö†Ô∏è ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß, ‡∏•‡∏≠‡∏á‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á');
        modalImg.src = url; // ‡∏•‡∏≠‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á
      };
      img.src = url;
      
      modal.classList.add('show');
      document.body.style.overflow = 'hidden';
    }

    function closeStaffModal() {
      const modal = document.getElementById('staffGalleryModal');
      if (modal) {
        modal.classList.remove('show');
        document.body.style.overflow = '';
        console.log('‚úÖ Modal ‡∏õ‡∏¥‡∏î‡πÅ‡∏•‡πâ‡∏ß');
      } else {
        console.error('‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö Modal');
      }
    }


    // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏õ‡∏¥‡∏î Modal ‡∏î‡πâ‡∏ß‡∏¢ ESC key
    document.addEventListener('keydown', function(event) {
      if (event.key === 'Escape') {
        const modal = document.getElementById('staffGalleryModal');
        if (modal && modal.classList.contains('show')) {
          closeStaffModal();
        }
      }
    });

    // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡∏•‡∏¥‡∏Å‡∏Ç‡πâ‡∏≤‡∏á‡πÉ‡∏ô‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÅ‡∏•‡πâ‡∏ß Modal ‡∏õ‡∏¥‡∏î (‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô)
    const modalContent = document.querySelector('.staff-gallery-modal img');
    if (modalContent) {
      modalContent.addEventListener('click', function(event) {
        event.stopPropagation();
      });
    }

    // ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏õ‡∏∏‡πà‡∏° X ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô
    const closeButton = document.querySelector('.staff-gallery-close');
    if (closeButton) {
      closeButton.addEventListener('click', function(event) {
        event.stopPropagation(); // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô event bubble
        closeStaffModal();
      });
    }

    // ‡πÄ‡∏û‡∏¥‡πà‡∏° Touch Support ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Mobile
    window.addEventListener('load', function() {
      const modal = document.getElementById('staffGalleryModal');
      const modalImg = document.getElementById('staffGalleryModalImg');
      
      if (modal && modalImg) {
        let touchStartY = 0;
        let touchEndY = 0;
        
        // Swipe down ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏¥‡∏î Modal (Mobile UX)
        modal.addEventListener('touchstart', function(e) {
          touchStartY = e.changedTouches[0].screenY;
        }, { passive: true });
        
        modal.addEventListener('touchend', function(e) {
          touchEndY = e.changedTouches[0].screenY;
          const swipeDistance = touchEndY - touchStartY;
          
          // ‡∏ñ‡πâ‡∏≤ swipe down ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 100px ‡πÉ‡∏´‡πâ‡∏õ‡∏¥‡∏î Modal
          if (swipeDistance > 100) {
            closeStaffModal();
          }
        }, { passive: true });
        
        console.log('‚úÖ Mobile touch events initialized');
      }
    });

    // ========================================
    // ACTIVITIES FUNCTIONS
    // ========================================
    function loadActivities() {
      const container = document.getElementById('activitiesContainer');
      if (!container) return;
      
      database.ref('activities').orderByChild('createdAt').on('value', (snapshot) => {
        container.innerHTML = '';
        
        if (!snapshot.exists()) {
          container.innerHTML = '<div class="content-loading-state">üìù ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£</div>';
          return;
        }

        const items = [];
        snapshot.forEach((child) => {
          items.push({ id: child.key, ...child.val() });
        });

        items.reverse();

        items.forEach(item => {
          const card = document.createElement('div');
          card.className = 'activity-card';
          card.innerHTML = `
            <div class="activity-header">
              <div class="activity-title">${escapeHtml(item.title)}</div>
              <div class="activity-date">${formatDate(item.createdAt)}</div>
            </div>
            <div class="activity-content">${escapeHtml(item.content)}</div>
          `;
          container.appendChild(card);
        });
      });
    }

    function formatDate(iso) {
      if (!iso) return '-';
      const d = new Date(iso);
      return d.toLocaleDateString('th-TH', { 
        year: 'numeric', 
        month: 'long', 
        day: 'numeric',
        hour: '2-digit',
        minute: '2-digit'
      });
    }

    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }

    // Initialize
    loadStaffGallery();
    loadActivities();

    
  } catch (error) {
    console.error("‚ùå Firebase initialization failed:", error);
    alert("‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏î‡πâ\n\nError: " + error.message);
  }
}

// ========================================
// SERVICE WORKER ERROR HANDLING
// ========================================
// ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Service Worker errors ‡∏à‡∏≤‡∏Å Firebase Hosting
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.getRegistrations().then(registrations => {
      if (registrations.length > 0) {
        console.log('üîß Firebase Service Worker detected');
        
        // Disable navigation preload ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô errors
        registrations.forEach(registration => {
          if (registration.navigationPreload) {
            registration.navigationPreload.disable()
              .then(() => console.log('‚úÖ Navigation preload disabled'))
              .catch(() => {}); // Ignore errors
          }
        });
      }
    }).catch(() => {}); // Ignore errors
  });
}

// ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô unhandled promise rejections ‡∏à‡∏≤‡∏Å Service Worker
window.addEventListener('unhandledrejection', (event) => {
  if (event.reason && event.reason.message && 
      event.reason.message.includes('service worker')) {
    console.log('‚ö†Ô∏è Service Worker error caught and ignored');
    event.preventDefault();
  }
});

initializeFirebase();
    </script>
    
    <!-- Toast Container -->
    <div id="toast-container"></div>
    
    <!-- Global Loading Overlay -->
    <div id="global-loading">
      <div class="loading-overlay">
        <div class="spinner"></div>
        <p class="loading-text">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</p>
      </div>
    </div>
    
  </body>
</html>